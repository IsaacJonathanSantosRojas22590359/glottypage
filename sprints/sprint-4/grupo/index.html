
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentación técnica por Axolotl Solutions">
      
      
        <meta name="author" content="Axolotl Solutions">
      
      
        <link rel="canonical" href="https://isaacjonathansantosrojas22590359.github.io/glottypage/sprints/sprint-4/grupo/">
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../horarioPeriodo/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>R-Grupo - Sistema GLOTTY</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-blue" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#grupo-gestion-de-grupos-academicos" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Sistema GLOTTY" class="md-header__button md-logo" aria-label="Sistema GLOTTY" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Sistema GLOTTY
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              R-Grupo
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Sistema GLOTTY" class="md-nav__button md-logo" aria-label="Sistema GLOTTY" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Sistema GLOTTY
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inicio
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../evolucion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Evolución del Proyecto
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sprints
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sprints
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sprint 1
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sprint 1
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resumen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-1/autenticacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Autenticación
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-1/crud-profesores/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CRUD Profesores
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-1/coordinador/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modelo Coordinador
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-1/profesor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modelo Profesor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-1/usuario/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Modelo Usuario
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sprint 2
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sprint 2
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resumen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-2/aulas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gestión de Aulas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-2/aulaController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controlador de Aulas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-2/horarios/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Administración de Horarios
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-2/horarioController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controlador de Horarios
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sprint 3
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sprint 3
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resumen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-3/periodo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Periodos Académicos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-3/preregistros/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Preregistros
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-3/grupo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Gestión de Grupos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-3/coordinadorGrupoController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controlador Grupo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-3/periodoController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controlador Periodo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sprint-3/preregistroController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Controlador Preregistros
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" checked>
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Sprint 4
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Sprint 4
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Resumen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    R-Grupo
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    R-Grupo
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#descripcion-general" class="md-nav__link">
    <span class="md-ellipsis">
      
        Descripción General
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estructura-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Estructura de Datos
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Estructura de Datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-principales-y-configuracion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Campos Principales y Configuración
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sistema-de-estados-del-grupo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sistema de Estados del Grupo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#niveles-de-ingles-y-letras-de-grupo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Niveles de Inglés y Letras de Grupo
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relaciones-contextualizadas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relaciones Contextualizadas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Relaciones Contextualizadas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#relacion-con-periodo-academico" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relación con Periodo Académico
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-horario-contextualizado" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relación con Horario Contextualizado
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relaciones-con-recursos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relaciones con Recursos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-de-estudiantes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Estudiantes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sistema-de-consultas-especializadas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sistema de Consultas Especializadas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sistema de Consultas Especializadas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scopes-para-gestion-operativa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scopes para Gestión Operativa
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deteccion-de-conflictos-de-horario" class="md-nav__link">
    <span class="md-ellipsis">
      
        Detección de Conflictos de Horario
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metodos-de-utilidad-y-presentacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Métodos de Utilidad y Presentación
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Métodos de Utilidad y Presentación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generacion-de-nombres-y-formatos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generación de Nombres y Formatos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-de-capacidad-y-ocupacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Capacidad y Ocupación
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logica-de-negocio-avanzada" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lógica de Negocio Avanzada
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lógica de Negocio Avanzada">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validaciones-de-asignacion-de-recursos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validaciones de Asignación de Recursos
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validaciones de Asignación de Recursos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validacion-de-aula" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validación de Aula
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validacion-de-profesor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validación de Profesor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-de-estudiantes_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Estudiantes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestión de Estudiantes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asignacion-de-estudiantes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asignación de Estudiantes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remocion-de-estudiantes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Remoción de Estudiantes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sistema-de-validacion-automatica" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sistema de Validación Automática
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sistema de Validación Automática">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hook-de-validacion-pre-guardado" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hook de Validación Pre-Guardado
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-de-letras-disponibles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Letras Disponibles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestión de Letras Disponibles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asignacion-automatica-de-letras" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asignación Automática de Letras
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#impacto-de-la-reestructuracion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Impacto de la Reestructuración
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../horarioPeriodo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Horario Periodo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../periodo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    R-Periodo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../periodoController/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    R-Controlador Periodo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../preregistro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    R-Preregistro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../proximos-sprints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Próximos Sprints
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../equipo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Equipo
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#descripcion-general" class="md-nav__link">
    <span class="md-ellipsis">
      
        Descripción General
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#estructura-de-datos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Estructura de Datos
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Estructura de Datos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#campos-principales-y-configuracion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Campos Principales y Configuración
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sistema-de-estados-del-grupo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sistema de Estados del Grupo
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#niveles-de-ingles-y-letras-de-grupo" class="md-nav__link">
    <span class="md-ellipsis">
      
        Niveles de Inglés y Letras de Grupo
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#relaciones-contextualizadas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relaciones Contextualizadas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Relaciones Contextualizadas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#relacion-con-periodo-academico" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relación con Periodo Académico
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relacion-con-horario-contextualizado" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relación con Horario Contextualizado
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relaciones-con-recursos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Relaciones con Recursos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-de-estudiantes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Estudiantes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sistema-de-consultas-especializadas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sistema de Consultas Especializadas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sistema de Consultas Especializadas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scopes-para-gestion-operativa" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scopes para Gestión Operativa
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deteccion-de-conflictos-de-horario" class="md-nav__link">
    <span class="md-ellipsis">
      
        Detección de Conflictos de Horario
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metodos-de-utilidad-y-presentacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Métodos de Utilidad y Presentación
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Métodos de Utilidad y Presentación">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generacion-de-nombres-y-formatos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generación de Nombres y Formatos
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-de-capacidad-y-ocupacion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Capacidad y Ocupación
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logica-de-negocio-avanzada" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lógica de Negocio Avanzada
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lógica de Negocio Avanzada">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validaciones-de-asignacion-de-recursos" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validaciones de Asignación de Recursos
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Validaciones de Asignación de Recursos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#validacion-de-aula" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validación de Aula
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#validacion-de-profesor" class="md-nav__link">
    <span class="md-ellipsis">
      
        Validación de Profesor
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gestion-de-estudiantes_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Estudiantes
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestión de Estudiantes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asignacion-de-estudiantes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asignación de Estudiantes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remocion-de-estudiantes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Remoción de Estudiantes
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sistema-de-validacion-automatica" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sistema de Validación Automática
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sistema de Validación Automática">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hook-de-validacion-pre-guardado" class="md-nav__link">
    <span class="md-ellipsis">
      
        Hook de Validación Pre-Guardado
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#gestion-de-letras-disponibles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Gestión de Letras Disponibles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gestión de Letras Disponibles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asignacion-automatica-de-letras" class="md-nav__link">
    <span class="md-ellipsis">
      
        Asignación Automática de Letras
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#impacto-de-la-reestructuracion" class="md-nav__link">
    <span class="md-ellipsis">
      
        Impacto de la Reestructuración
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="grupo-gestion-de-grupos-academicos">Grupo - Gestión de Grupos Académicos</h1>
<h2 id="descripcion-general">Descripción General</h2>
<p>El modelo Grupo representa la entidad central para la organización de estudiantes en el sistema GLOTTY después de la reestructuración del Sprint 4. Cada grupo queda contextualizado dentro de un periodo académico específico y establece relaciones con horarios, aulas y profesores, formando una estructura académica completa y coherente.</p>
<h2 id="estructura-de-datos">Estructura de Datos</h2>
<h3 id="campos-principales-y-configuracion">Campos Principales y Configuración</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="x">protected $fillable = [</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="x">    &#39;nivel_ingles&#39;,</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="x">    &#39;letra_grupo&#39;,</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="x">    &#39;periodo_id&#39;,</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="x">    &#39;horario_periodo_id&#39;,</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="x">    &#39;aula_id&#39;,</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="x">    &#39;profesor_id&#39;,</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="x">    &#39;capacidad_maxima&#39;,</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="x">    &#39;estudiantes_inscritos&#39;,</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="x">    &#39;estado&#39;</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="x">];</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="x">protected $casts = [</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="x">    &#39;nivel_ingles&#39; =&gt; &#39;integer&#39;,</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="x">    &#39;capacidad_maxima&#39; =&gt; &#39;integer&#39;,</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="x">    &#39;estudiantes_inscritos&#39; =&gt; &#39;integer&#39;</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="x">];</span>
</span></code></pre></div>
<p>El modelo gestiona la configuración completa de un grupo académico, incluyendo su nivel de inglés, identificación única mediante letra, relaciones contextuales con periodo y horario, asignación de recursos físicos y humanos, y control de capacidad e inscripciones.</p>
<h3 id="sistema-de-estados-del-grupo">Sistema de Estados del Grupo</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="x">const ESTADOS = [</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="x">    &#39;planificado&#39; =&gt; &#39;Planificado&#39;,</span>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="x">    &#39;con_profesor&#39; =&gt; &#39;Con Profesor&#39;, </span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="x">    &#39;con_aula&#39; =&gt; &#39;Con Aula&#39;,</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="x">    &#39;activo&#39; =&gt; &#39;Activo&#39;,</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="x">    &#39;cancelado&#39; =&gt; &#39;Cancelado&#39;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="x">];</span>
</span></code></pre></div>
<p>Los grupos siguen un flujo de estados progresivo que representa su nivel de configuración. Desde la planificación inicial hasta la activación completa, cada estado indica qué recursos han sido asignados y qué operaciones están permitidas.</p>
<h3 id="niveles-de-ingles-y-letras-de-grupo">Niveles de Inglés y Letras de Grupo</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="x">const NIVELES = [</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="x">    1 =&gt; &#39;Nivel 1&#39;,</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="x">    2 =&gt; &#39;Nivel 2&#39;, </span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="x">    3 =&gt; &#39;Nivel 3&#39;,</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="x">    4 =&gt; &#39;Nivel 4&#39;,</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="x">    5 =&gt; &#39;Nivel 5&#39;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="x">];</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="x">const LETRAS_GRUPO = [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;];</span>
</span></code></pre></div>
<p>El sistema soporta cinco niveles de inglés y utiliza letras consecutivas para identificar grupos dentro del mismo nivel y periodo, garantizando nombres únicos y significativos.</p>
<h2 id="relaciones-contextualizadas">Relaciones Contextualizadas</h2>
<h3 id="relacion-con-periodo-academico">Relación con Periodo Académico</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="x">public function periodo() </span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="x">{ </span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="x">    return $this-&gt;belongsTo(Periodo::class); </span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="x">}</span>
</span></code></pre></div>
<p>Cada grupo pertenece obligatoriamente a un periodo académico específico, estableciendo el contexto temporal fundamental para todas sus operaciones. Esta relación permite la gestión coherente de grupos dentro de ciclos escolares definidos.</p>
<h3 id="relacion-con-horario-contextualizado">Relación con Horario Contextualizado</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="x">public function horario() </span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="x">{ </span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="x">    return $this-&gt;belongsTo(HorarioPeriodo::class, &#39;horario_periodo_id&#39;); </span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="x">}</span>
</span></code></pre></div>
<p>La relación con HorarioPeriodo asegura que el horario del grupo esté contextualizado dentro del periodo académico, utilizando el modelo pivote que mantiene instantáneas específicas por periodo.</p>
<h3 id="relaciones-con-recursos">Relaciones con Recursos</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="x">public function aula() </span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="x">{ </span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="x">    return $this-&gt;belongsTo(Aula::class, &#39;aula_id&#39;); </span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="x">}</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="x">public function profesor() </span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="x">{ </span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="x">    return $this-&gt;belongsTo(Profesor::class, &#39;profesor_id&#39;, &#39;id_profesor&#39;);</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="x">}</span>
</span></code></pre></div>
<p>Las relaciones con Aula y Profesor gestionan la asignación de recursos físicos y humanos al grupo, con validaciones integradas para evitar conflictos y garantizar la viabilidad operativa.</p>
<h3 id="gestion-de-estudiantes">Gestión de Estudiantes</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="x">public function preregistros() </span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="x">{ </span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="x">    return $this-&gt;hasMany(Preregistro::class, &#39;grupo_asignado_id&#39;); </span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="x">}</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="x">public function estudiantesActivos() </span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="x">{ </span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="x">    return $this-&gt;preregistros()-&gt;whereIn(&#39;estado&#39;, [&#39;asignado&#39;, &#39;cursando&#39;]); </span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="x">}</span>
</span></code></pre></div>
<p>El grupo mantiene relación con los preregistros de estudiantes asignados, proporcionando métodos especializados para acceder específicamente a los estudiantes activos.</p>
<h2 id="sistema-de-consultas-especializadas">Sistema de Consultas Especializadas</h2>
<h3 id="scopes-para-gestion-operativa">Scopes para Gestión Operativa</h3>
<p>El modelo incluye scopes optimizados para las operaciones más comunes:</p>
<ul>
<li>activos: Grupos en estado operativo completo</li>
<li>planificados: Grupos en fase de configuración inicial</li>
<li>porNivel: Filtrado por nivel de inglés específico</li>
<li>porPeriodo: Grupos dentro de un periodo académico</li>
<li>conCapacidad: Grupos con disponibilidad para nuevos estudiantes</li>
</ul>
<h3 id="deteccion-de-conflictos-de-horario">Detección de Conflictos de Horario</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="x">public function scopeSolapados($query, $horarioId, $aulaId = null, $profesorId = null)</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="x">{</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="x">    return $query-&gt;where(&#39;horario_periodo_id&#39;, $horarioId)</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="x">        -&gt;where(function ($q) use ($aulaId, $profesorId) {</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="x">            if ($aulaId) {</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="x">                $q-&gt;where(&#39;aula_id&#39;, $aulaId);</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="x">            }</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="x">            if ($profesorId) {</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="x">                $q-&gt;orWhere(&#39;profesor_id&#39;, $profesorId);</span>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="x">            }</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="x">        })</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="x">        -&gt;whereNotIn(&#39;estado&#39;, [&#39;cancelado&#39;]);</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="x">}</span>
</span></code></pre></div>
<p>Este scope identifica grupos que podrían generar conflictos por solapamiento de horarios, considerando tanto aulas como profesores, y excluyendo grupos cancelados del análisis.</p>
<h2 id="metodos-de-utilidad-y-presentacion">Métodos de Utilidad y Presentación</h2>
<h3 id="generacion-de-nombres-y-formatos">Generación de Nombres y Formatos</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="x">public function getNombreCompletoAttribute()</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="x">{</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="x">    return &quot;{$this-&gt;nivel_ingles}-{$this-&gt;letra_grupo}&quot;;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="x">}</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="x">public function getNivelFormateadoAttribute()</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="x">{</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="x">    return self::NIVELES[$this-&gt;nivel_ingles] ?? &quot;Nivel {$this-&gt;nivel_ingles}&quot;;</span>
</span><span id="__span-8-9"><a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="x">}</span>
</span></code></pre></div>
<p>Los accesores proporcionan representaciones formateadas del grupo, incluyendo nombres completos y niveles legibles, optimizando la presentación en interfaces de usuario.</p>
<h3 id="gestion-de-capacidad-y-ocupacion">Gestión de Capacidad y Ocupación</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="x">public function getCapacidadDisponibleAttribute()</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="x">{</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="x">    return $this-&gt;capacidad_maxima - $this-&gt;estudiantes_inscritos;</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="x">}</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="x">public function getPorcentajeOcupacionAttribute()</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="x">{</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="x">    if ($this-&gt;capacidad_maxima === 0) return 0;</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="x">    return round(($this-&gt;estudiantes_inscritos / $this-&gt;capacidad_maxima) * 100, 2);</span>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="x">}</span>
</span></code></pre></div>
<p>Estos métodos calculan automáticamente la capacidad disponible y el porcentaje de ocupación del grupo, facilitando la toma de decisiones en procesos de asignación.</p>
<h2 id="logica-de-negocio-avanzada">Lógica de Negocio Avanzada</h2>
<h3 id="validaciones-de-asignacion-de-recursos">Validaciones de Asignación de Recursos</h3>
<h4 id="validacion-de-aula">Validación de Aula</h4>
<div class="language-php highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="x">public function validarAsignacionAula($aulaId)</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="x">{</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="x">    $aula = Aula::find($aulaId);</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="x">    if (!$aula) {</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="x">        throw new \Exception(&#39;El aula seleccionada no existe.&#39;);</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="x">    }</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="x">    if (!$aula-&gt;disponible) {</span>
</span><span id="__span-10-9"><a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="x">        throw new \Exception(&quot;El aula {$aula-&gt;nombre_completo} no está disponible.&quot;);</span>
</span><span id="__span-10-10"><a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="x">    }</span>
</span><span id="__span-10-11"><a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>
</span><span id="__span-10-12"><a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="x">    if (!$aula-&gt;soportaCapacidad($this-&gt;capacidad_maxima)) {</span>
</span><span id="__span-10-13"><a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="x">        throw new \Exception(&quot;El aula {$aula-&gt;nombre_completo} tiene capacidad para {$aula-&gt;capacidad} estudiantes, pero el grupo requiere {$this-&gt;capacidad_maxima}.&quot;);</span>
</span><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="x">    }</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="x">    if (!$aula-&gt;estaDisponibleEnHorario($this-&gt;horario_periodo_id)) {</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="x">        throw new \Exception(&quot;El aula {$aula-&gt;nombre_completo} ya está ocupada en este horario.&quot;);</span>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="x">    }</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="x">    return true;</span>
</span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="x">}</span>
</span></code></pre></div>
<p>El método realiza validaciones exhaustivas para la asignación de aulas, verificando existencia, disponibilidad global, capacidad suficiente y disponibilidad en el horario específico.</p>
<h4 id="validacion-de-profesor">Validación de Profesor</h4>
<div class="language-php highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="x">public function validarAsignacionProfesor($profesorId)</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="x">{</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="x">    $profesor = Profesor::find($profesorId);</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="x">    if (!$profesor) {</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="x">        throw new \Exception(&#39;El profesor seleccionado no existe.&#39;);</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="x">    }</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a>
</span><span id="__span-11-8"><a id="__codelineno-11-8" name="__codelineno-11-8" href="#__codelineno-11-8"></a><span class="x">    $conflictos = self::where(&#39;profesor_id&#39;, $profesorId)</span>
</span><span id="__span-11-9"><a id="__codelineno-11-9" name="__codelineno-11-9" href="#__codelineno-11-9"></a><span class="x">        -&gt;where(&#39;horario_periodo_id&#39;, $this-&gt;horario_periodo_id)</span>
</span><span id="__span-11-10"><a id="__codelineno-11-10" name="__codelineno-11-10" href="#__codelineno-11-10"></a><span class="x">        -&gt;where(&#39;id&#39;, &#39;!=&#39;, $this-&gt;id)</span>
</span><span id="__span-11-11"><a id="__codelineno-11-11" name="__codelineno-11-11" href="#__codelineno-11-11"></a><span class="x">        -&gt;whereNotIn(&#39;estado&#39;, [&#39;cancelado&#39;])</span>
</span><span id="__span-11-12"><a id="__codelineno-11-12" name="__codelineno-11-12" href="#__codelineno-11-12"></a><span class="x">        -&gt;exists();</span>
</span><span id="__span-11-13"><a id="__codelineno-11-13" name="__codelineno-11-13" href="#__codelineno-11-13"></a>
</span><span id="__span-11-14"><a id="__codelineno-11-14" name="__codelineno-11-14" href="#__codelineno-11-14"></a><span class="x">    if ($conflictos) {</span>
</span><span id="__span-11-15"><a id="__codelineno-11-15" name="__codelineno-11-15" href="#__codelineno-11-15"></a><span class="x">        throw new \Exception(&quot;El profesor {$profesor-&gt;nombre_profesor} ya tiene un grupo asignado en este horario.&quot;);</span>
</span><span id="__span-11-16"><a id="__codelineno-11-16" name="__codelineno-11-16" href="#__codelineno-11-16"></a><span class="x">    }</span>
</span><span id="__span-11-17"><a id="__codelineno-11-17" name="__codelineno-11-17" href="#__codelineno-11-17"></a>
</span><span id="__span-11-18"><a id="__codelineno-11-18" name="__codelineno-11-18" href="#__codelineno-11-18"></a><span class="x">    return true;</span>
</span><span id="__span-11-19"><a id="__codelineno-11-19" name="__codelineno-11-19" href="#__codelineno-11-19"></a><span class="x">}</span>
</span></code></pre></div>
<p>Valida la asignación de profesores verificando existencia y detectando conflictos de horario con otros grupos activos.</p>
<h3 id="gestion-de-estudiantes_1">Gestión de Estudiantes</h3>
<h4 id="asignacion-de-estudiantes">Asignación de Estudiantes</h4>
<div class="language-php highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="x">public function asignarEstudiante($preregistroId)</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="x">{</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="x">    if (!$this-&gt;tieneCapacidad()) {</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="x">        throw new \Exception(&#39;El grupo no tiene capacidad disponible.&#39;);</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="x">    }</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="x">    $preregistro = Preregistro::find($preregistroId);</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="x">    if (!$preregistro || !$preregistro-&gt;puedeSerAsignado()) {</span>
</span><span id="__span-12-9"><a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="x">        throw new \Exception(&#39;El estudiante no puede ser asignado a un grupo.&#39;);</span>
</span><span id="__span-12-10"><a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a><span class="x">    }</span>
</span><span id="__span-12-11"><a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>
</span><span id="__span-12-12"><a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="x">    if ($preregistro-&gt;grupo_asignado_id &amp;&amp; $preregistro-&gt;grupo_asignado_id != $this-&gt;id) {</span>
</span><span id="__span-12-13"><a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="x">        throw new \Exception(&#39;El estudiante ya está asignado a otro grupo.&#39;);</span>
</span><span id="__span-12-14"><a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="x">    }</span>
</span><span id="__span-12-15"><a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>
</span><span id="__span-12-16"><a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="x">    \DB::transaction(function () use ($preregistro) {</span>
</span><span id="__span-12-17"><a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="x">        $preregistro-&gt;update([</span>
</span><span id="__span-12-18"><a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="x">            &#39;grupo_asignado_id&#39; =&gt; $this-&gt;id,</span>
</span><span id="__span-12-19"><a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="x">            &#39;estado&#39; =&gt; &#39;asignado&#39;</span>
</span><span id="__span-12-20"><a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="x">        ]);</span>
</span><span id="__span-12-21"><a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a>
</span><span id="__span-12-22"><a id="__codelineno-12-22" name="__codelineno-12-22" href="#__codelineno-12-22"></a><span class="x">        $this-&gt;increment(&#39;estudiantes_inscritos&#39;);</span>
</span><span id="__span-12-23"><a id="__codelineno-12-23" name="__codelineno-12-23" href="#__codelineno-12-23"></a><span class="x">    });</span>
</span><span id="__span-12-24"><a id="__codelineno-12-24" name="__codelineno-12-24" href="#__codelineno-12-24"></a>
</span><span id="__span-12-25"><a id="__codelineno-12-25" name="__codelineno-12-25" href="#__codelineno-12-25"></a><span class="x">    return true;</span>
</span><span id="__span-12-26"><a id="__codelineno-12-26" name="__codelineno-12-26" href="#__codelineno-12-26"></a><span class="x">}</span>
</span></code></pre></div>
<p>El método gestiona la asignación de estudiantes con validaciones completas y transacciones atómicas, asegurando la consistencia de datos.</p>
<h4 id="remocion-de-estudiantes">Remoción de Estudiantes</h4>
<div class="language-php highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="x">public function removerEstudiante($preregistroId)</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="x">{</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="x">    $preregistro = Preregistro::find($preregistroId);</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="x">    if (!$preregistro || $preregistro-&gt;grupo_asignado_id !== $this-&gt;id) {</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="x">        throw new \Exception(&#39;El estudiante no está asignado a este grupo.&#39;);</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="x">    }</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
</span><span id="__span-13-8"><a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="x">    \DB::transaction(function () use ($preregistro) {</span>
</span><span id="__span-13-9"><a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="x">        $preregistro-&gt;update([</span>
</span><span id="__span-13-10"><a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="x">            &#39;grupo_asignado_id&#39; =&gt; null,</span>
</span><span id="__span-13-11"><a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a><span class="x">            &#39;estado&#39; =&gt; &#39;pendiente&#39;</span>
</span><span id="__span-13-12"><a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="x">        ]);</span>
</span><span id="__span-13-13"><a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a>
</span><span id="__span-13-14"><a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="x">        if ($this-&gt;estudiantes_inscritos &gt; 0) {</span>
</span><span id="__span-13-15"><a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="x">            $this-&gt;decrement(&#39;estudiantes_inscritos&#39;);</span>
</span><span id="__span-13-16"><a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="x">        }</span>
</span><span id="__span-13-17"><a id="__codelineno-13-17" name="__codelineno-13-17" href="#__codelineno-13-17"></a><span class="x">    });</span>
</span><span id="__span-13-18"><a id="__codelineno-13-18" name="__codelineno-13-18" href="#__codelineno-13-18"></a>
</span><span id="__span-13-19"><a id="__codelineno-13-19" name="__codelineno-13-19" href="#__codelineno-13-19"></a><span class="x">    return true;</span>
</span><span id="__span-13-20"><a id="__codelineno-13-20" name="__codelineno-13-20" href="#__codelineno-13-20"></a><span class="x">}</span>
</span></code></pre></div>
<p>Permite la remoción segura de estudiantes mediante transacciones que mantienen la consistencia entre el grupo y el preregistro.</p>
<h2 id="sistema-de-validacion-automatica">Sistema de Validación Automática</h2>
<h3 id="hook-de-validacion-pre-guardado">Hook de Validación Pre-Guardado</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="x">protected static function boot()</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="x">{</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="x">    parent::boot();</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="x">    static::saving(function ($grupo) {</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="x">        if ($grupo-&gt;aula_id &amp;&amp; !$grupo-&gt;aulaSoportaCapacidad()) {</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="x">            throw new \Exception(&quot;El aula no tiene suficiente capacidad para el grupo.&quot;);</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="x">        }</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
</span><span id="__span-14-10"><a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="x">        if ($grupo-&gt;tieneConflictosHorario()) {</span>
</span><span id="__span-14-11"><a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="x">            $conflictos = $grupo-&gt;obtenerConflictos();</span>
</span><span id="__span-14-12"><a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="x">            $mensaje = &quot;Conflicto de horario detectado: &quot;;</span>
</span><span id="__span-14-13"><a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>
</span><span id="__span-14-14"><a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a><span class="x">            foreach ($conflictos as $conflicto) {</span>
</span><span id="__span-14-15"><a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a><span class="x">                if ($conflicto-&gt;aula_id == $grupo-&gt;aula_id) {</span>
</span><span id="__span-14-16"><a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a><span class="x">                    $mensaje .= &quot;Aula ocupada por grupo {$conflicto-&gt;nombre_completo}. &quot;;</span>
</span><span id="__span-14-17"><a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a><span class="x">                }</span>
</span><span id="__span-14-18"><a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a><span class="x">                if ($conflicto-&gt;profesor_id == $grupo-&gt;profesor_id) {</span>
</span><span id="__span-14-19"><a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a><span class="x">                    $mensaje .= &quot;Profesor asignado a grupo {$conflicto-&gt;nombre_completo}. &quot;;</span>
</span><span id="__span-14-20"><a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a><span class="x">                }</span>
</span><span id="__span-14-21"><a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a><span class="x">            }</span>
</span><span id="__span-14-22"><a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>
</span><span id="__span-14-23"><a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a><span class="x">            throw new \Exception($mensaje);</span>
</span><span id="__span-14-24"><a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a><span class="x">        }</span>
</span><span id="__span-14-25"><a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a><span class="x">    });</span>
</span><span id="__span-14-26"><a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a><span class="x">}</span>
</span></code></pre></div>
<p>El hook automático valida la capacidad del aula y detecta conflictos de horario antes de guardar cualquier cambio en el grupo, previniendo inconsistencias en la configuración académica.</p>
<h2 id="gestion-de-letras-disponibles">Gestión de Letras Disponibles</h2>
<h3 id="asignacion-automatica-de-letras">Asignación Automática de Letras</h3>
<div class="language-php highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="x">public static function letrasDisponibles($nivel, $periodoId)</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="x">{</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="x">    $letrasOcupadas = self::where(&#39;nivel_ingles&#39;, $nivel)</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="x">        -&gt;where(&#39;periodo_id&#39;, $periodoId)</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="x">        -&gt;pluck(&#39;letra_grupo&#39;)</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="x">        -&gt;toArray();</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="x">    return array_diff(self::LETRAS_GRUPO, $letrasOcupadas);</span>
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="x">}</span>
</span></code></pre></div>
<p>Este método identifica las letras disponibles para nuevos grupos dentro de un nivel y periodo específicos, facilitando la creación de grupos con identificadores únicos.</p>
<h2 id="impacto-de-la-reestructuracion">Impacto de la Reestructuración</h2>
<p>La integración obligatoria con el modelo Periodo transformó significativamente la gestión de grupos:</p>
<ul>
<li>Contextualización completa dentro de ciclos académicos específicos</li>
<li>Coordinación automática con el estado del periodo académico</li>
<li>Validaciones basadas en el contexto temporal del periodo</li>
<li>Capacidad de generar reportes históricos por periodo</li>
<li>Prevención de operaciones fuera de contexto temporal</li>
</ul>
<p>Esta arquitectura asegura que cada grupo opere dentro del contexto temporal correcto, proporcionando coherencia organizacional y facilitando la gestión académica institucional a través de relaciones jerárquicas claras y validadas.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>