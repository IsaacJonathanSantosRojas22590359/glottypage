{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Sistema GLOTTY - Documentaci\u00f3n T\u00e9cnica","text":"<p>Historial de Versiones | Versi\u00f3n | Fecha | Autor | Descripci\u00f3n de los Cambios | |---------|-------|-------|---------------------------| | 1.0 | 15/01/2025 | Isaac Jonathan Santos Rojas | Versi\u00f3n inicial de la p\u00e1gina principal | | 1.1 | 20/01/2025 | Isaac Jonathan Santos Rojas | Agregada navegaci\u00f3n completa de sprints | | | | | |</p>"},{"location":"#descripcion-del-proyecto","title":"Descripci\u00f3n del Proyecto","text":"<p>Bienvenido a la documentaci\u00f3n t\u00e9cnica oficial del Sistema GLOTTY, una plataforma de gesti\u00f3n acad\u00e9mica desarrollada en Laravel por el equipo Axolotl Solutions. Este sistema est\u00e1 dise\u00f1ado para instituciones educativas que requieren una soluci\u00f3n integral para la administraci\u00f3n de procesos acad\u00e9micos.</p>"},{"location":"#estado-del-proyecto","title":"Estado del Proyecto","text":""},{"location":"#sprints-completados","title":"Sprints Completados","text":"<ul> <li>Sprint 1: Sistema de Autenticaci\u00f3n y Gesti\u00f3n de Personal - Completado</li> <li>Sprint 2: Gesti\u00f3n de Infraestructura Acad\u00e9mica - Completado  </li> <li>Sprint 3: Implementaci\u00f3n de Procesos Acad\u00e9micos - Completado</li> <li>Sprint 4: Reestructuraci\u00f3n Arquitect\u00f3nica - Completado</li> </ul>"},{"location":"#proximos-sprints","title":"Pr\u00f3ximos Sprints","text":"<ul> <li>Sprint 5: Panel de Profesor para Gesti\u00f3n de Calificaciones - En Planificaci\u00f3n</li> <li>Sprint 6: Despliegue en Ambiente de Producci\u00f3n - En Planificaci\u00f3n</li> </ul>"},{"location":"#equipo-de-desarrollo","title":"Equipo de Desarrollo","text":"<p>Axolotl Solutions est\u00e1 compuesto por 8 profesionales especializados en desarrollo de software:</p> <ul> <li>Daniel Martinez Hernandez - Scrum Master / Product Owner</li> <li>Mauricio Dar\u00edo Sandoval Mandujano - Desarrollador Backend</li> <li>An\u00edbal Atzi Zarate Hern\u00e1ndez - Dise\u00f1ador UI/UX</li> <li>Leonardo Daniel Montes Barajas - Dise\u00f1ador Frontend</li> <li>Claudio Axel Ponce Guerrero - Ingeniero de Calidad</li> <li>Juan Enrique Basurto Luna - Analista de Sistemas</li> <li>Omar Garc\u00eda Perrusquia - Especialista en Pruebas</li> <li>Isaac Jonathan Santos Rojas - Documentador T\u00e9cnico</li> </ul>"},{"location":"#metodologia-de-desarrollo","title":"Metodolog\u00eda de Desarrollo","text":"<p>El proyecto sigue la metodolog\u00eda Scrum con sprints de 2 semanas de duraci\u00f3n. Cada iteraci\u00f3n incluye planificaci\u00f3n, desarrollo, revisi\u00f3n y retrospectiva, garantizando la entrega continua de valor y la adaptaci\u00f3n a los requerimientos del cliente.</p>"},{"location":"#arquitectura-del-sistema","title":"Arquitectura del Sistema","text":""},{"location":"#tecnologias-principales","title":"Tecnolog\u00edas Principales","text":"<ul> <li>Backend: Laravel 10.x, PHP 8.x</li> <li>Frontend: Blade Templates, Tailwind CSS, JavaScript</li> <li>Base de Datos: MySQL con Eloquent ORM</li> <li>Autenticaci\u00f3n: Sistema multi-rol con Guards de Laravel</li> <li>Control de Versiones: Git con GitHub</li> </ul>"},{"location":"#modulos-implementados","title":"M\u00f3dulos Implementados","text":"<ul> <li>M\u00f3dulo de Seguridad: Autenticaci\u00f3n y autorizaci\u00f3n multi-rol</li> <li>M\u00f3dulo Acad\u00e9mico: Gesti\u00f3n de periodos, grupos y preregistros</li> <li>M\u00f3dulo de Infraestructura: Administraci\u00f3n de aulas y horarios</li> <li>M\u00f3dulo de Personal: Gesti\u00f3n de profesores y coordinadores</li> </ul>"},{"location":"#navegacion-de-documentacion","title":"Navegaci\u00f3n de Documentaci\u00f3n","text":""},{"location":"#documentacion-por-sprint","title":"Documentaci\u00f3n por Sprint","text":"<ul> <li>Sprint 1 - Autenticaci\u00f3n y Gesti\u00f3n de Personal</li> <li>Sprint 2 - Infraestructura Acad\u00e9mica</li> <li>Sprint 3 - Procesos Acad\u00e9micos</li> <li>Sprint 4 - Reestructuraci\u00f3n Arquitect\u00f3nica</li> </ul>"},{"location":"#documentacion-general","title":"Documentaci\u00f3n General","text":"<ul> <li>Evoluci\u00f3n del Proyecto</li> <li>Equipo de Desarrollo</li> <li>Pr\u00f3ximos Sprints</li> </ul>"},{"location":"#caracteristicas-destacadas","title":"Caracter\u00edsticas Destacadas","text":""},{"location":"#arquitectura-centrada-en-periodos-academicos","title":"Arquitectura Centrada en Periodos Acad\u00e9micos","text":"<p>Despu\u00e9s de la reestructuraci\u00f3n del Sprint 4, el sistema establece el periodo acad\u00e9mico como entidad ra\u00edz de la que dependen todas las operaciones, garantizando coherencia organizacional y escalabilidad.</p>"},{"location":"#sistema-de-autenticacion-unificado","title":"Sistema de Autenticaci\u00f3n Unificado","text":"<p>Implementa un mecanismo de login multi-rol que permite el acceso seguro para tres tipos de usuario: alumnos, profesores y coordinadores, mediante el uso de Guards de Laravel.</p>"},{"location":"#gestion-contextualizada","title":"Gesti\u00f3n Contextualizada","text":"<p>Todas las entidades del sistema (grupos, horarios, preregistros) operan dentro del contexto de un periodo acad\u00e9mico espec\u00edfico, facilitando la gesti\u00f3n hist\u00f3rica y la trazabilidad.</p>"},{"location":"#estado-de-calidad","title":"Estado de Calidad","text":"<p>Todos los m\u00f3dulos desarrollados han sido verificados mediante pruebas manuales exhaustivas. Actualmente nos encontramos en proceso de implementaci\u00f3n de pruebas automatizadas y preparaci\u00f3n para el despliegue en producci\u00f3n.</p>"},{"location":"#conclusion","title":"Conclusi\u00f3n","text":"<p>El Sistema GLOTTY ha evolucionado desde una base fundamental de seguridad hacia una plataforma acad\u00e9mica robusta con arquitectura centrada en periodos acad\u00e9micos. La documentaci\u00f3n t\u00e9cnica proporciona informaci\u00f3n detallada sobre cada componente del sistema para facilitar el mantenimiento y futuras expansiones.</p> <p>Documentaci\u00f3n mantenida por Isaac Jonathan Santos Rojas - Axolotl Solutions \u00daltima actualizaci\u00f3n: Noviembre 2025</p>"},{"location":"equipo/","title":"Equipo Axolotl Solutions","text":""},{"location":"equipo/#integrantes-del-equipo","title":"Integrantes del Equipo","text":"Nombre Rol Responsabilidades Daniel Martinez Hernandez Scrum Master / Product Owner Gesti\u00f3n del proyecto, liderazgo t\u00e9cnico, toma de decisiones Mauricio Dar\u00edo Sandoval Mandujano Desarrollador Desarrollo backend, base de datos An\u00edbal Atzi Zarate Hern\u00e1ndez Dise\u00f1ador Dise\u00f1o de interfaces, experiencia de usuario, prototipos Leonardo Daniel Montes Barajas Dise\u00f1ador Implementaci\u00f3n de interfaces, CSS, dise\u00f1o frontend Claudio Axel Ponce Guerrero QA Control de calidad, pruebas, est\u00e1ndares de c\u00f3digo Juan Enrique Basurto Luna Analista An\u00e1lisis de requisitos Joshua Garc\u00eda Sol\u00eds Tester Pruebas funcionales, reporte de bugs, testing Isaac Jonathan Santos Rojas Documentador Documentaci\u00f3n"},{"location":"equipo/#metodologia-de-trabajo","title":"Metodolog\u00eda de Trabajo","text":"<p>Trabajamos con Metodolog\u00eda Scrum en sprints semanales.</p>"},{"location":"equipo/#flujo-de-desarrollo","title":"Flujo de Desarrollo","text":"<ol> <li>Planificaci\u00f3n: Definir objetivos del sprint</li> <li>Desarrollo: Codificaci\u00f3n y pruebas diarias</li> <li>Revisi\u00f3n: Demo de funcionalidades completadas</li> <li>Retrospectiva: Mejoras continuas del proceso</li> </ol>"},{"location":"equipo/#tecnologias-que-manejamos","title":"Tecnolog\u00edas que Manejamos","text":"<ul> <li>Backend: Laravel, PHP, PostgreSQL</li> <li>Frontend: HTML, CSS, JavaScript, Blade</li> <li>Herramientas: Git, GitHub, MkDocs</li> <li>Metodolog\u00edas: Scrum</li> </ul> <p>Equipo de desarrollo - Sistema GLOTTY</p>"},{"location":"evolucion/","title":"Evoluci\u00f3n de Desarrollo - Sistema GLOTTY","text":"<p>Historial de Versiones</p> Versi\u00f3n Fecha Autor Descripci\u00f3n de los Cambios 1.0 15/01/2025 Isaac Jonathan Santos Rojas Documentaci\u00f3n inicial de la evoluci\u00f3n del proyecto 1.1 20/01/2025 Isaac Jonathan Santos Rojas Agregado timeline completo y an\u00e1lisis de impacto"},{"location":"evolucion/#resumen-ejecutivo","title":"Resumen Ejecutivo","text":"<p>El proyecto GLOTTY ha evolucionado desde una base fundamental de cubrir una necesidad hacia una platadorma acad\u00e9mica generada con el fin de dar soluci\u00f3n a la problematica de mejorar la gestion y acceso a la informaci\u00f3n de el departamento de lenguas extranjeras.</p>"},{"location":"evolucion/#cronologia-de-desarrollo","title":"Cronolog\u00eda de Desarrollo","text":""},{"location":"evolucion/#resumen-de-la-evolucion","title":"Resumen de la Evoluci\u00f3n","text":""},{"location":"evolucion/#fase-1-fundamentos-del-sistema-sprints-1-2","title":"Fase 1: Fundamentos del Sistema (Sprints 1-2)","text":"<p>El proyecto inici\u00f3 con la implementaci\u00f3n de los componentes esenciales de seguridad y gesti\u00f3n. Durante los primeros dos sprints, se establecieron las bases t\u00e9cnicas que permitir\u00edan el desarrollo posterior de funcionalidades acad\u00e9micas complejas. El sistema de autenticaci\u00f3n multi-rol y la gesti\u00f3n de infraestructura sentaron las bases para una plataforma escalable y segura.</p>"},{"location":"evolucion/#fase-2-procesos-academicos-sprint-3","title":"Fase 2: Procesos Acad\u00e9micos (Sprint 3)","text":"<p>Con los fundamentos establecidos, el equipo desarroll\u00f3 los procesos acad\u00e9micos centrales del sistema. Esta fase introdujo la gesti\u00f3n de periodos escolares, el sistema de preregistros de estudiantes y la administraci\u00f3n de grupos acad\u00e9micos. Durante la revisi\u00f3n de este sprint, se identific\u00f3 la necesidad de una reestructuraci\u00f3n arquitect\u00f3nica para optimizar la organizaci\u00f3n del sistema.</p>"},{"location":"evolucion/#fase-3-transformacion-arquitectonica-sprint-4","title":"Fase 3: Transformaci\u00f3n Arquitect\u00f3nica (Sprint 4)","text":"<p>El cuarto sprint represent\u00f3 un punto de inflexi\u00f3n en la arquitectura del sistema. Se realiz\u00f3 una reingenier\u00eda completa para establecer el periodo acad\u00e9mico como entidad ra\u00edz de todas las operaciones. Esta transformaci\u00f3n introdujo el modelo pivote HorarioPeriodo, que permiti\u00f3 la reutilizaci\u00f3n contextual de horarios entre diferentes periodos acad\u00e9micos mientras se manten\u00edan instant\u00e1neas espec\u00edficas.</p>"},{"location":"evolucion/#fase-4-expansion-y-produccion-sprints-5-6","title":"Fase 4: Expansi\u00f3n y Producci\u00f3n (Sprints 5-6)","text":"<p>La fase actual del proyecto se enfoca en expandir las capacidades del sistema mediante el desarrollo del panel de profesor y preparar la plataforma para su despliegue en ambiente de producci\u00f3n. Estos sprints completar\u00e1n el ciclo de desarrollo inicial y posicionar\u00e1n al sistema para operaciones institucionales a gran escala.</p>"},{"location":"sprints/sprint-1/","title":"Sprint 1: Implementaci\u00f3n de Autenticaci\u00f3n y Gesti\u00f3n de Personal","text":"<p>Fecha: 24 Octubre - 5 Noviembre 2024 Estado: Completado Equipo: Axolotl Solutions</p> <p>Historial de Versiones | Versi\u00f3n | Fecha | Autor | Descripci\u00f3n de los Cambios | |---------|-------|-------|---------------------------| | 1.0 | 26/10/2025 | Isaac Jonathan Santos Rojas | Documentaci\u00f3n inicial del Sprint 1 | | 1.1 | 06/11/2025 | Isaac Jonathan Santos Rojas | Agregados diagramas y detalles t\u00e9cnicos | | | | | |</p>"},{"location":"sprints/sprint-1/#objetivo","title":"Objetivo","text":"<p>Establecer los fundamentos de seguridad del sistema y la administraci\u00f3n de recursos humanos acad\u00e9micos.</p>"},{"location":"sprints/sprint-1/#actividades-desarrolladas","title":"Actividades Desarrolladas","text":"<p>Se implement\u00f3 el sistema de autenticaci\u00f3n y autorizaci\u00f3n, junto con la gesti\u00f3n inicial de los perfiles acad\u00e9micos.</p>"},{"location":"sprints/sprint-1/#arquitectura-del-sprint-1","title":"Arquitectura del Sprint 1","text":"<p>El sistema de autenticaci\u00f3n de GLOTTY implementa un sistema unificado multi-rol que permite el acceso seguro a tres tipos de usuarios mediante un \u00fanico punto de entrada. Utiliza el sistema de Guards de Laravel para mantener sesiones separadas y seguras.</p>"},{"location":"sprints/sprint-1/#controladores-desarrollados","title":"Controladores Desarrollados","text":"<ul> <li><code>AuthController.php</code> - Gesti\u00f3n centralizada de autenticaci\u00f3n para todos los tipos de usuario</li> <li><code>ProfesorController.php</code> - Operaciones CRUD para la administraci\u00f3n del cuerpo docente</li> </ul>"},{"location":"sprints/sprint-1/#modelos-implementados","title":"Modelos Implementados","text":"<ul> <li><code>Usuario.php</code> - Modelo base para la gesti\u00f3n de alumnos internos y externos</li> <li><code>Profesor.php</code> - Modelo para la gesti\u00f3n de informaci\u00f3n del personal docente</li> <li><code>Coordinador.php</code> - Modelo para la administraci\u00f3n de usuarios coordinadores</li> </ul>"},{"location":"sprints/sprint-1/#sistema-de-autenticacion-unificado","title":"Sistema de Autenticaci\u00f3n Unificado","text":""},{"location":"sprints/sprint-1/#caracteristicas-principales","title":"Caracter\u00edsticas Principales","text":"<ul> <li>Login multi-rol para 3 tipos de usuario: Alumnos, Profesores y Coordinadores</li> <li>Sistema de Guards de Laravel para separaci\u00f3n de sesiones</li> <li>Registro seguro de alumnos con validaciones completas</li> <li>Redirecci\u00f3n inteligente a dashboards espec\u00edficos</li> </ul>"},{"location":"sprints/sprint-1/#flujo-de-autenticacion","title":"Flujo de Autenticaci\u00f3n","text":""},{"location":"sprints/sprint-1/#explicacion-del-flujo-de-autenticacion","title":"Explicaci\u00f3n del Flujo de Autenticaci\u00f3n","text":"<p>El diagrama representa el proceso completo que sigue el sistema GLOTTY cuando un usuario intenta iniciar sesi\u00f3n. Se muestran las interacciones entre cuatro componentes principales:</p> <p>1. Inicio del proceso</p> <p>El usuario proporciona su correo y contrase\u00f1a. Estas credenciales se env\u00edan al AuthController, que es el responsable de procesarlas.</p> <p>2. B\u00fasqueda del usuario en los modelos</p> <p>El controlador primero consulta los modelos para intentar identificar qu\u00e9 tipo de usuario est\u00e1 intentando iniciar sesi\u00f3n. La b\u00fasqueda inicia con Coordinador, luego Profesor y finalmente Alumno.</p> <p>3. Validaci\u00f3n por tipo de usuario</p> <p>El sistema sigue una secuencia de verificaciones.</p> <ol> <li> <p>Coordinador v\u00e1lido</p> <p>Si se encuentra un registro en el modelo de Coordinador y la contrase\u00f1a coincide, el AuthController inicia sesi\u00f3n usando el guard coordinador.</p> <p>Esto permite mantener su sesi\u00f3n separada de otros roles.</p> </li> <li> <p>Profesor v\u00e1lido</p> <p>Si no es coordinador, el sistema eval\u00faa la tabla de profesores. Si encuentra una coincidencia: El profesor inicia sesi\u00f3n con su propio guard, que posee rutas y vistas independientes.</p> </li> <li> <p>Alumno v\u00e1lido</p> <p>Si no es profesor, revisa el modelo de alumnos. Si coincide: El guard web se usa para los alumnos, ya que es el est\u00e1ndar en Laravel.</p> </li> <li> <p>Credenciales inv\u00e1lidas</p> <p>Si no coincide con ninguno de los tres modelos, entonces: Se env\u00eda un mensaje indicando que el correo o la contrase\u00f1a no son correctos.</p> </li> </ol>"},{"location":"sprints/sprint-1/autenticacion/","title":"Documentaci\u00f3n del Sistema de Autenticaci\u00f3n Unificado","text":"<p>Historial de Versiones | Versi\u00f3n | Fecha | Autor | Descripci\u00f3n de los Cambios | |---------|-------|-------|---------------------------| | 1.0 | 15/01/2025 | Isaac Jonathan Santos Rojas | Documentaci\u00f3n t\u00e9cnica completa del AuthController | | 1.1 | 20/01/2025 | Isaac Jonathan Santos Rojas | Agregada documentaci\u00f3n de modelos relacionados | | | | | |</p> <p>Este documento describe el funcionamiento del sistema de autenticaci\u00f3n implementado en el proyecto GLOTTY. Se explica el flujo general, la l\u00f3gica que sigue el controlador y la estructura del inicio de sesi\u00f3n con m\u00faltiples roles (alumno, profesor y coordinador).</p>"},{"location":"sprints/sprint-1/autenticacion/#introduccion","title":"Introducci\u00f3n","text":"<p>El sistema de autenticaci\u00f3n del proyecto GLOTTY fue dise\u00f1ado para permitir que tres tipos de usuarios ingresen al sistema desde un \u00fanico formulario. Para lograr esta funcionalidad, se utilizan distintos guards de Laravel, as\u00ed como validaciones y verificaciones manuales de credenciales que permiten determinar qu\u00e9 tipo de usuario intenta acceder.</p> <p>El AuthController centraliza todo el proceso de autenticaci\u00f3n, registro de alumnos y cierre de sesi\u00f3n. A continuaci\u00f3n se detalla su funcionamiento.</p>"},{"location":"sprints/sprint-1/autenticacion/#controlador-de-autenticacion-authcontroller","title":"Controlador de Autenticaci\u00f3n (AuthController)","text":"<p>El AuthController administra las siguientes funciones principales:</p> <ul> <li>Inicio de sesi\u00f3n unificado para alumnos, profesores y coordinadores.</li> <li>Registro exclusivo de alumnos.</li> <li>Cierre de sesi\u00f3n para cualquier tipo de usuario autenticado.</li> <li>Redirecci\u00f3n hacia el dashboard correspondiente seg\u00fan el rol.</li> <li>Obtenci\u00f3n del nombre y datos identificadores del usuario autenticado.</li> <li>Visualizaci\u00f3n del dashboard del coordinador.</li> </ul> <p>A continuaci\u00f3n se detalla cada secci\u00f3n del controlador.</p>"},{"location":"sprints/sprint-1/autenticacion/#inicio-de-sesion-unificado","title":"Inicio de Sesi\u00f3n Unificado","text":"<p>El m\u00e9todo <code>login</code> recibe las credenciales del usuario y verifica la coincidencia con cada uno de los modelos correspondientes. Este proceso se ejecuta en el siguiente orden:</p> <ol> <li>Coordinador  </li> <li>Profesor  </li> <li>Alumno  </li> </ol> <p>El sistema compara el correo ingresado con los campos correctos de cada tabla y verifica la contrase\u00f1a utilizando <code>Hash::check()</code>. Cuando se encuentra una coincidencia v\u00e1lida, se inicia sesi\u00f3n utilizando el guard apropiado.</p> <p>Si ninguno de los tres tipos coincide, se devuelve un error indicando que las credenciales son incorrectas.</p> <p>C\u00f3digo del m\u00e9todo:</p> <pre><code>public function login(Request $request)\n{\n    ...\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#redireccion-de-usuarios","title":"Redirecci\u00f3n de Usuarios","text":"<p>El m\u00e9todo <code>redirectByGuard</code> determina la ruta correcta para enviar al usuario una vez que inici\u00f3 sesi\u00f3n. Cada tabla posee su propio dashboard definido en las rutas del proyecto.</p> <p>Adem\u00e1s, este m\u00e9todo almacena en la sesi\u00f3n informaci\u00f3n \u00fatil como:</p> <ul> <li>Rol del usuario autenticado</li> <li>Nombre completo</li> <li>Identificador principal (RFC, n\u00famero de control o correo institucional)</li> </ul> <p>Estas funciones permiten personalizar la interfaz seg\u00fan el tipo de usuario.</p> <p>C\u00f3digo del m\u00e9todo:</p> <pre><code>private function redirectByGuard($guard)\n{\n    ...\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#obtencion-del-nombre-del-usuario","title":"Obtenci\u00f3n del Nombre del Usuario","text":"<p>El m\u00e9todo <code>getUserName</code> retorna el nombre completo del usuario seg\u00fan el guard con el que autentic\u00f3. Cada tabla posee campos distintos, por lo que es necesario manejar cada tipo por separado.</p> <p>Ejemplo:</p> <pre><code>private function getUserName($user, $guard)\n{\n    ...\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#obtencion-del-identificador-del-usuario","title":"Obtenci\u00f3n del Identificador del Usuario","text":"<p>El m\u00e9todo <code>getUserIdentifier</code> devuelve un identificador clave del usuario, el cual puede variar dependiendo del rol:</p> <ul> <li>Alumnos: n\u00famero de control o correo institucional  </li> <li>Profesores: RFC  </li> <li>Coordinadores: RFC  </li> </ul> <p>C\u00f3digo:</p> <pre><code>private function getUserIdentifier($user, $guard)\n{\n    ...\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#registro-de-alumnos","title":"Registro de Alumnos","text":"<p>El sistema \u00fanicamente permite registrar alumnos. Los coordinadores y profesores deben ser creados mediante otros procesos administrativos.</p> <p>El m\u00e9todo <code>register</code> valida los datos, crea un registro en la tabla de usuarios y autentica autom\u00e1ticamente al alumno usando el guard correspondiente.</p> <p>C\u00f3digo:</p> <pre><code>public function register(Request $request)\n{\n    ...\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#cierre-de-sesion","title":"Cierre de Sesi\u00f3n","text":"<p>El m\u00e9todo <code>logout</code> cierra la sesi\u00f3n del usuario sin importar con qu\u00e9 guard haya ingresado. Recorre los tres posibles guards y cierra sesi\u00f3n en el que est\u00e9 activo.</p> <p>Luego invalida la sesi\u00f3n y redirige al inicio.</p> <p>C\u00f3digo:</p> <pre><code>public function logout(Request $request)\n{\n    ...\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#dashboard-del-coordinador","title":"Dashboard del Coordinador","text":"<p>El m\u00e9todo <code>coordinadorDashboard</code> obtiene al coordinador autenticado mediante su guard y env\u00eda la informaci\u00f3n necesaria hacia la vista correspondiente. Tambi\u00e9n prepara estad\u00edsticas b\u00e1sicas que posteriormente podr\u00e1n ser alimentadas con datos reales del sistema.</p> <p>C\u00f3digo:</p> <pre><code>public function coordinadorDashboard()\n{\n    ...\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#vista-de-registro","title":"Vista de Registro","text":"<p>El m\u00e9todo <code>showRegisterForm</code> simplemente muestra la vista de registro de alumnos.</p> <p>C\u00f3digo:</p> <pre><code>public function showRegisterForm()\n{\n    return view('register');\n}\n</code></pre>"},{"location":"sprints/sprint-1/autenticacion/#conclusion","title":"Conclusi\u00f3n","text":"<p>Ela AuthController constituye el n\u00facleo de la autenticaci\u00f3n del sistema GLOTTY. Su dise\u00f1o permite gestionar m\u00faltiples roles desde un \u00fanico punto, asegurando una estructura flexible y escalable. La implementaci\u00f3n basada en guards facilita la separaci\u00f3n clara entre tipos de usuarios, mientras que el manejo detallado de sesiones y datos del usuario contribuye a una experiencia m\u00e1s personalizada. Este m\u00f3dulo constituye uno de los pilares fundamentales del Sprint 1, asegurando la seguridad y correcto control de acceso al sistema.</p>"},{"location":"sprints/sprint-1/coordinador/","title":"Modelo Coordinador","text":""},{"location":"sprints/sprint-1/coordinador/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Coordinador</code> representa a los coordinadores acad\u00e9micos dentro del sistema GLOTTY. Extiende <code>Authenticatable</code> para permitir autenticaci\u00f3n propia y uso de guards personalizados.</p> <p>Este modelo se encarga de: - Gestionar los datos del coordinador. - Manejar la autenticaci\u00f3n con contrase\u00f1a personalizada. - Proteger informaci\u00f3n sensible. - Integrarse con el sistema de login del proyecto.</p>"},{"location":"sprints/sprint-1/coordinador/#tabla-asociada","title":"Tabla Asociada","text":"<pre><code>protected $table = 'coordinadores';\n</code></pre>"},{"location":"sprints/sprint-1/coordinador/#explicacion","title":"Explicaci\u00f3n","text":"<p>El modelo utiliza la tabla <code>coordinadores</code>, donde se almacena toda la informaci\u00f3n de los coordinadores.</p>"},{"location":"sprints/sprint-1/coordinador/#atributos-asignables","title":"Atributos Asignables","text":"<pre><code>protected $fillable = [\n    'rfc_coordinador', 'nombre_coordinador', 'apellidos_coordinador',\n    'num_telefono', 'correo_coordinador', 'contrase\u00f1a'\n];\n</code></pre>"},{"location":"sprints/sprint-1/coordinador/#explicacion_1","title":"Explicaci\u00f3n","text":"<p>Estos campos pueden asignarse de forma masiva mediante:</p> <pre><code>Coordinador::create($data);\n</code></pre> <p>Incluyen informaci\u00f3n personal, de contacto y las credenciales necesarias para autenticaci\u00f3n.</p>"},{"location":"sprints/sprint-1/coordinador/#atributos-ocultos","title":"Atributos Ocultos","text":"<pre><code>protected $hidden = ['contrase\u00f1a', 'remember_token'];\n</code></pre>"},{"location":"sprints/sprint-1/coordinador/#explicacion_2","title":"Explicaci\u00f3n","text":"<p>Oculta informaci\u00f3n sensible cuando el modelo se convierte a JSON o array.</p>"},{"location":"sprints/sprint-1/coordinador/#autenticacion-personalizada","title":"Autenticaci\u00f3n Personalizada","text":""},{"location":"sprints/sprint-1/coordinador/#metodo-getauthpassword","title":"M\u00e9todo getAuthPassword()","text":"<pre><code>public function getAuthPassword()\n{\n    return $this-&gt;contrase\u00f1a;\n}\n</code></pre>"},{"location":"sprints/sprint-1/coordinador/#explicacion_3","title":"Explicaci\u00f3n","text":"<p>Laravel espera que la contrase\u00f1a se llame <code>password</code>, pero en este proyecto se almacena como <code>contrase\u00f1a</code>. Por ello, este m\u00e9todo sobreescribe el comportamiento est\u00e1ndar y le indica a Laravel que utilice este atributo para la validaci\u00f3n.</p>"},{"location":"sprints/sprint-1/coordinador/#resumen-general","title":"Resumen General","text":"<p>El modelo <code>Coordinador</code>:</p> <ul> <li>Permite que los coordinadores inicien sesi\u00f3n con un guard espec\u00edfico.</li> <li>Define y protege los atributos necesarios para la gesti\u00f3n de coordinadores.</li> <li>Se adapta al dise\u00f1o del proyecto mediante un campo de contrase\u00f1a personalizado.</li> <li>Se integra con el flujo de autenticaci\u00f3n del sistema GLOTTY.</li> </ul>"},{"location":"sprints/sprint-1/crud-profesores/","title":"Controlador ProfesorController","text":"<p>Historial de Versiones | Versi\u00f3n | Fecha | Autor | Descripci\u00f3n de los Cambios | |---------|-------|-------|---------------------------| | 1.0 | 15/01/2025 | Isaac Jonathan Santos Rojas | Documentaci\u00f3n t\u00e9cnica completa del ProfesorController | | 1.1 | 20/01/2025 | Isaac Jonathan Santos Rojas | Agregadas validaciones y casos de uso | | | | | |</p>"},{"location":"sprints/sprint-1/crud-profesores/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El controlador <code>ProfesorController</code> gestiona las operaciones CRUD relacionadas con la administraci\u00f3n de profesores. Contiene m\u00e9todos para listar, registrar, editar, actualizar y eliminar profesores, incluyendo validaciones y manejo de errores.</p>"},{"location":"sprints/sprint-1/crud-profesores/#metodos-del-controlador","title":"M\u00e9todos del Controlador","text":""},{"location":"sprints/sprint-1/crud-profesores/#1-index","title":"1. index()","text":""},{"location":"sprints/sprint-1/crud-profesores/#descripcion","title":"Descripci\u00f3n","text":"<p>Obtiene todos los profesores registrados y los env\u00eda a la vista correspondiente.</p>"},{"location":"sprints/sprint-1/crud-profesores/#flujo","title":"Flujo","text":"<ol> <li>Recupera todos los registros con <code>Profesor::all()</code>.</li> <li>Retorna la vista <code>coordinador.profesores</code>.</li> </ol>"},{"location":"sprints/sprint-1/crud-profesores/#proposito","title":"Prop\u00f3sito","text":"<p>Mostrar una lista completa de profesores disponibles en el sistema.</p>"},{"location":"sprints/sprint-1/crud-profesores/#2-create","title":"2. create()","text":""},{"location":"sprints/sprint-1/crud-profesores/#descripcion_1","title":"Descripci\u00f3n","text":"<p>Retorna la vista con el formulario para registrar un nuevo profesor.</p>"},{"location":"sprints/sprint-1/crud-profesores/#proposito_1","title":"Prop\u00f3sito","text":"<p>Permitir capturar la informaci\u00f3n de un profesor desde cero.</p>"},{"location":"sprints/sprint-1/crud-profesores/#3-storerequest-request","title":"3. store(Request $request)","text":""},{"location":"sprints/sprint-1/crud-profesores/#descripcion_2","title":"Descripci\u00f3n","text":"<p>Valida y registra un nuevo profesor en la base de datos.</p>"},{"location":"sprints/sprint-1/crud-profesores/#validaciones","title":"Validaciones","text":"<ul> <li><code>rfc_profesor</code>: requerido, \u00fanico, m\u00e1ximo 255 caracteres.</li> <li><code>nombre_profesor</code>: requerido.</li> <li><code>correo_profesor</code>: requerido, email, \u00fanico.</li> <li><code>password</code>: m\u00ednimo 8 caracteres, requiere confirmaci\u00f3n.</li> </ul>"},{"location":"sprints/sprint-1/crud-profesores/#flujo_1","title":"Flujo","text":"<ol> <li>Valida los datos.</li> <li>Crea el profesor con <code>Profesor::create()</code>.</li> <li>Encripta la contrase\u00f1a usando <code>Hash::make</code>.</li> <li>Redirige con mensaje de \u00e9xito o error.</li> </ol>"},{"location":"sprints/sprint-1/crud-profesores/#4-editid","title":"4. edit($id)","text":""},{"location":"sprints/sprint-1/crud-profesores/#descripcion_3","title":"Descripci\u00f3n","text":"<p>Obtiene un profesor por su ID y lo env\u00eda a la vista para editar sus datos.</p>"},{"location":"sprints/sprint-1/crud-profesores/#proposito_2","title":"Prop\u00f3sito","text":"<p>Modificar la informaci\u00f3n almacenada previamente.</p>"},{"location":"sprints/sprint-1/crud-profesores/#5-updaterequest-request-id","title":"5. update(Request $request, $id)","text":""},{"location":"sprints/sprint-1/crud-profesores/#descripcion_4","title":"Descripci\u00f3n","text":"<p>Actualiza la informaci\u00f3n de un profesor, incluyendo la validaci\u00f3n din\u00e1mica que evita conflictos con otros registros.</p>"},{"location":"sprints/sprint-1/crud-profesores/#validaciones_1","title":"Validaciones","text":"<ul> <li><code>rfc_profesor</code>: \u00fanico excepto el actual.</li> <li><code>correo_profesor</code>: \u00fanico excepto el actual.</li> <li><code>password</code>: opcional, m\u00ednimo 8 caracteres si se proporciona.</li> </ul>"},{"location":"sprints/sprint-1/crud-profesores/#flujo_2","title":"Flujo","text":"<ol> <li>Se validan los datos.</li> <li>Se prepara el arreglo de nuevos datos.</li> <li>Se encripta la contrase\u00f1a solo si fue proporcionada.</li> <li>Se actualiza el registro.</li> <li>Se redirige con la respuesta correspondiente.</li> </ol>"},{"location":"sprints/sprint-1/crud-profesores/#6-destroyid","title":"6. destroy($id)","text":""},{"location":"sprints/sprint-1/crud-profesores/#descripcion_5","title":"Descripci\u00f3n","text":"<p>Elimina un profesor si no tiene grupos asignados.</p>"},{"location":"sprints/sprint-1/crud-profesores/#flujo_3","title":"Flujo","text":"<ol> <li>Busca el profesor.</li> <li>Verifica si tiene grupos asignados mediante <code>grupos()-&gt;exists()</code>.</li> <li>Bloquea la eliminaci\u00f3n si existen grupos relacionados.</li> <li>Elimina el registro si no hay dependencias.</li> </ol>"},{"location":"sprints/sprint-1/crud-profesores/#proposito_3","title":"Prop\u00f3sito","text":"<p>Mantener la integridad referencial del sistema.</p>"},{"location":"sprints/sprint-1/crud-profesores/#resumen-general","title":"Resumen General","text":"<p>El controlador <code>ProfesorController</code> implementa un CRUD completo, asegurando: - Validaciones consistentes. - Encriptaci\u00f3n segura de contrase\u00f1as. - Protecci\u00f3n contra eliminaci\u00f3n cuando existen dependencias. - Manejo claro de errores y mensajes al usuario. - Vistas organizadas para cada operaci\u00f3n espec\u00edfica.</p> <p>Este m\u00f3dulo garantiza una administraci\u00f3n de profesores robusta, segura y f\u00e1cil de mantener.</p>"},{"location":"sprints/sprint-1/profesor/","title":"Modelo Profesor","text":""},{"location":"sprints/sprint-1/profesor/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Profesor</code> representa a los profesores dentro del sistema y extiende <code>Authenticatable</code>, lo cual permite que puedan autenticarse utilizando los mecanismos est\u00e1ndar de Laravel.</p> <p>Este modelo gestiona: - Campos asignables. - Campos ocultos. - Contrase\u00f1a personalizada. - Relaci\u00f3n con grupos asignados.</p>"},{"location":"sprints/sprint-1/profesor/#propiedades-del-modelo","title":"Propiedades del Modelo","text":""},{"location":"sprints/sprint-1/profesor/#tabla-y-llave-primaria","title":"Tabla y Llave Primaria","text":"<pre><code>protected $table = 'profesores';\nprotected $primaryKey = 'id_profesor';\n</code></pre>"},{"location":"sprints/sprint-1/profesor/#explicacion","title":"Explicaci\u00f3n","text":"<ul> <li>El modelo usa la tabla <code>profesores</code>.</li> <li>La clave primaria es <code>id_profesor</code> en lugar del est\u00e1ndar <code>id</code>.</li> </ul>"},{"location":"sprints/sprint-1/profesor/#atributos-asignables","title":"Atributos Asignables","text":"<pre><code>protected $fillable = [\n    'rfc_profesor', 'nombre_profesor', 'apellidos_profesor',\n    'num_telefono', 'correo_profesor', 'contrase\u00f1a'\n];\n</code></pre>"},{"location":"sprints/sprint-1/profesor/#explicacion_1","title":"Explicaci\u00f3n","text":"<p>Define los campos que pueden asignarse masivamente (mass assignment). Esto permite usar <code>Profesor::create()</code> de forma segura.</p>"},{"location":"sprints/sprint-1/profesor/#atributos-ocultos","title":"Atributos Ocultos","text":"<pre><code>protected $hidden = ['contrase\u00f1a', 'remember_token'];\n</code></pre>"},{"location":"sprints/sprint-1/profesor/#explicacion_2","title":"Explicaci\u00f3n","text":"<p>Evita que la contrase\u00f1a y el token de sesi\u00f3n aparezcan cuando se convierte el modelo a JSON o array. Protege informaci\u00f3n sensible.</p>"},{"location":"sprints/sprint-1/profesor/#autenticacion-personalizada","title":"Autenticaci\u00f3n Personalizada","text":""},{"location":"sprints/sprint-1/profesor/#metodo-getauthpassword","title":"M\u00e9todo getAuthPassword()","text":"<pre><code>public function getAuthPassword()\n{\n    return $this-&gt;contrase\u00f1a;\n}\n</code></pre>"},{"location":"sprints/sprint-1/profesor/#explicacion_3","title":"Explicaci\u00f3n","text":"<p>Laravel espera que el campo de contrase\u00f1a se llame <code>password</code>. Como en este proyecto se llama <code>contrase\u00f1a</code>, se sobrescribe este m\u00e9todo para indicarle a Laravel qu\u00e9 atributo debe usar como contrase\u00f1a.</p>"},{"location":"sprints/sprint-1/profesor/#relaciones","title":"Relaciones","text":""},{"location":"sprints/sprint-1/profesor/#relacion-con-grupos","title":"Relaci\u00f3n con grupos","text":"<pre><code>public function grupos()\n{\n    return $this-&gt;hasMany(Grupo::class, 'profesor_id', 'id_profesor');\n}\n</code></pre>"},{"location":"sprints/sprint-1/profesor/#explicacion_4","title":"Explicaci\u00f3n","text":"<p>Un profesor puede tener muchos grupos asignados.</p> <ul> <li><code>Grupo::class</code>: modelo relacionado.</li> <li><code>'profesor_id'</code>: clave for\u00e1nea en la tabla de grupos.</li> <li><code>'id_profesor'</code>: llave primaria del profesor.</li> </ul> <p>Esto permite acceder as\u00ed:</p> <pre><code>$profesor-&gt;grupos;\n</code></pre>"},{"location":"sprints/sprint-1/profesor/#resumen-general","title":"Resumen General","text":"<p>El modelo <code>Profesor</code>: - Permite la autenticaci\u00f3n para profesores. - Define de forma segura los atributos que pueden asignarse. - Mantiene confidenciales los valores sensibles. - Proporciona una relaci\u00f3n clara con los grupos que tiene asignados. - Se integra correctamente con todas las operaciones CRUD del sistema.</p> <p>Este modelo es fundamental para gestionar profesores dentro del sistema GLOTTY.</p>"},{"location":"sprints/sprint-1/usuario/","title":"Modelo Usuario","text":""},{"location":"sprints/sprint-1/usuario/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Usuario</code> representa a los diferentes tipos de usuarios del sistema GLOTTY. Extiende <code>Authenticatable</code>, lo que permite que pueda autenticarse mediante los mecanismos de Laravel.</p> <p>Este modelo administra: - Informaci\u00f3n personal del usuario. - Tipos de usuario (alumno, profesor, coordinador, etc.). - Relaci\u00f3n con preregistros. - Campos asignables y sensibles.</p>"},{"location":"sprints/sprint-1/usuario/#tabla-y-atributos-principales","title":"Tabla y Atributos Principales","text":""},{"location":"sprints/sprint-1/usuario/#nombre-de-la-tabla","title":"Nombre de la tabla","text":"<pre><code>protected $table = 'usuarios';\n</code></pre> <p>El modelo utiliza la tabla <code>usuarios</code>.</p>"},{"location":"sprints/sprint-1/usuario/#atributos-asignables","title":"Atributos Asignables","text":"<pre><code>protected $fillable = [\n    'correo_personal',\n    'nombre_completo',\n    'numero_telefonico',\n    'genero',\n    'fecha_nacimiento',\n    'tipo_usuario',\n    'correo_institucional',\n    'numero_control',\n    'especialidad',\n    'contrase\u00f1a'\n];\n</code></pre>"},{"location":"sprints/sprint-1/usuario/#explicacion","title":"Explicaci\u00f3n","text":"<p>Estos campos pueden rellenarse mediante asignaci\u00f3n masiva, por ejemplo:</p> <pre><code>Usuario::create($data);\n</code></pre> <p>Incluyen informaci\u00f3n general del usuario, escolaridad, e incluso su tipo dentro del sistema.</p>"},{"location":"sprints/sprint-1/usuario/#atributos-ocultos","title":"Atributos Ocultos","text":"<pre><code>protected $hidden = [\n    'contrase\u00f1a'\n];\n</code></pre>"},{"location":"sprints/sprint-1/usuario/#explicacion_1","title":"Explicaci\u00f3n","text":"<p>Evita que el campo <code>contrase\u00f1a</code> aparezca en respuestas JSON o exportaciones, protegiendo informaci\u00f3n sensible.</p>"},{"location":"sprints/sprint-1/usuario/#relaciones","title":"Relaciones","text":""},{"location":"sprints/sprint-1/usuario/#preregistros-asociados","title":"Preregistros asociados","text":"<pre><code>public function preregistros()\n{\n    return $this-&gt;hasMany(Preregistro::class, 'usuario_id');\n}\n</code></pre>"},{"location":"sprints/sprint-1/usuario/#explicacion_2","title":"Explicaci\u00f3n","text":"<p>Un usuario puede tener muchos preregistros. La clave for\u00e1nea utilizada es <code>usuario_id</code>.</p> <p>Uso t\u00edpico:</p> <pre><code>$usuario-&gt;preregistros;\n</code></pre>"},{"location":"sprints/sprint-1/usuario/#resumen-general","title":"Resumen General","text":"<p>El modelo <code>Usuario</code>:</p> <ul> <li>Representa a cualquier usuario del sistema GLOTTY.</li> <li>Permite autenticaci\u00f3n gracias a <code>Authenticatable</code>.</li> <li>Define informaci\u00f3n personal, escolar y administrativa.</li> <li>Mantiene protegidos los datos sensibles como la contrase\u00f1a.</li> <li>Se relaciona correctamente con los preregistros.</li> <li>Funciona como base para varios procesos del sistema, incluyendo login, preregistro y gesti\u00f3n de datos.</li> </ul>"},{"location":"sprints/sprint-2/","title":"Resumen Detallado del Sprint 2 - Sistema de Gesti\u00f3n Acad\u00e9mica","text":"<p>Historial de Versiones | Versi\u00f3n | Fecha | Autor | Descripci\u00f3n de los Cambios | |---------|-------|-------|---------------------------| | 1.0 | 15/01/2025 | Isaac Jonathan Santos Rojas | Documentaci\u00f3n inicial del Sprint 2 | | 1.1 | 20/01/2025 | Isaac Jonathan Santos Rojas | Agregada documentaci\u00f3n del modelo Aula | | | | | |</p>"},{"location":"sprints/sprint-2/#objetivos-y-alcance-del-sprint","title":"Objetivos y Alcance del Sprint","text":"<p>El Sprint 2 se centr\u00f3 en el desarrollo completo de los m\u00f3dulos fundamentales para la gesti\u00f3n acad\u00e9mica del sistema. Se implementaron cinco componentes principales que forman la base operativa del sistema de coordinaci\u00f3n de cursos de ingl\u00e9s. Cada m\u00f3dulo fue dise\u00f1ado con validaciones robustas, flujos de trabajo definidos y una arquitectura escalable que permite la gesti\u00f3n integral del ciclo acad\u00e9mico.</p>"},{"location":"sprints/sprint-2/#modulos-implementados","title":"M\u00f3dulos Implementados","text":""},{"location":"sprints/sprint-2/#1-sistema-de-gestion-de-aulas","title":"1. Sistema de Gesti\u00f3n de Aulas","text":"<p>Se desarroll\u00f3 un sistema completo para la administraci\u00f3n de espacios f\u00edsicos acad\u00e9micos. El modelo Aula incorpora diferentes tipos de espacios educativos con capacidades espec\u00edficas y sistema de disponibilidad. El controlador correspondiente maneja operaciones CRUD completas con validaciones avanzadas que previenen conflictos operativos.</p> <p>Las aulas pueden ser de cuatro tipos: aulas regulares, laboratorios, salas de c\u00f3mputo y aulas audiovisuales, cada una con caracter\u00edsticas espec\u00edficas. El sistema incluye validaci\u00f3n de capacidad que garantiza que no se reduzca la capacidad de un aula por debajo de lo requerido por los grupos actualmente asignados. Adem\u00e1s, se implement\u00f3 una API para consultar la disponibilidad de aulas en horarios espec\u00edficos, facilitando la asignaci\u00f3n inteligente de espacios.</p>"},{"location":"sprints/sprint-2/#2-sistema-de-gestion-de-horarios-base","title":"2. Sistema de Gesti\u00f3n de Horarios Base","text":"<p>Se cre\u00f3 un m\u00f3dulo especializado para la administraci\u00f3n de horarios acad\u00e9micos base. Este sistema distingue entre horarios semanales (lunes a viernes) y sabatinos (exclusivamente s\u00e1bados), con validaciones estrictas que aseguran la coherencia entre el tipo de horario y los d\u00edas asignados.</p> <p>El modelo Horario incluye funcionalidades para gestionar la activaci\u00f3n y desactivaci\u00f3n de horarios, as\u00ed como prevenci\u00f3n de modificaciones o eliminaciones cuando los horarios est\u00e1n siendo utilizados en periodos activos. El controlador implementa flujos de trabajo completos para creaci\u00f3n, edici\u00f3n y eliminaci\u00f3n con validaciones de integridad referencial.</p>"},{"location":"sprints/sprint-2/#3-sistema-de-gestion-de-periodos-academicos","title":"3. Sistema de Gesti\u00f3n de Periodos Acad\u00e9micos","text":"<p>Se implement\u00f3 un m\u00f3dulo comprehensivo para la administraci\u00f3n de periodos acad\u00e9micos, que constituye el n\u00facleo del ciclo educativo. Los periodos siguen un flujo de estado definido que incluye seis estados: configuraci\u00f3n, preregistros activos, preregistros cerrados, en curso, finalizado y cancelado.</p> <p>El sistema incluye transiciones controladas entre estados con validaciones de dependencias. Por ejemplo, para activar los preregistros de un periodo, el sistema verifica que existan horarios activos, aulas disponibles y profesores registrados. El controlador de periodos maneja automatizaciones que sincronizan el estado de grupos y estudiantes cuando un periodo cambia de estado.</p>"},{"location":"sprints/sprint-2/#4-sistema-de-gestion-de-grupos-academicos","title":"4. Sistema de Gesti\u00f3n de Grupos Acad\u00e9micos","text":"<p>Se desarroll\u00f3 un m\u00f3dulo completo para la creaci\u00f3n y administraci\u00f3n de grupos de estudio. Los grupos evolucionan a trav\u00e9s de seis estados: planificado, con profesor, con aula, activo, en curso y finalizado/cancelado. El sistema determina autom\u00e1ticamente el estado del grupo basado en las asignaciones de profesor y aula.</p> <p>El modelo Grupo incluye validaciones avanzadas para detectar conflictos de horario entre profesores y aulas. El controlador proporciona funcionalidades para asignar y remover estudiantes de grupos, con validaciones de capacidad y verificaci\u00f3n de que los estudiantes est\u00e9n aptos para ser asignados. El sistema tambi\u00e9n gestiona la capacidad de los grupos, previniendo que se reduzca por debajo del n\u00famero de estudiantes actualmente inscritos.</p>"},{"location":"sprints/sprint-2/#5-sistema-de-preregistro-de-estudiantes","title":"5. Sistema de Preregistro de Estudiantes","text":"<p>Se implement\u00f3 un m\u00f3dulo para el preregistro de estudiantes en periodos acad\u00e9micos activos. Los preregistros siguen un flujo de cinco estados: pendiente, asignado, cursando, finalizado y cancelado. El sistema incluye gesti\u00f3n de estados de pago, incorporando el concepto de pr\u00f3rroga como estado intermedio entre pendiente y pagado.</p> <p>El modelo Preregistro valida que los estudiantes no tengan m\u00faltiples preregistros activos en el mismo periodo. El controlador proporciona interfaces para que los estudiantes realicen preregistros, seleccionen su nivel deseado y horario preferido, y realicen seguimiento a su estado de asignaci\u00f3n.</p>"},{"location":"sprints/sprint-2/#caracteristicas-tecnicas-implementadas","title":"Caracter\u00edsticas T\u00e9cnicas Implementadas","text":""},{"location":"sprints/sprint-2/#arquitectura-y-patrones-de-diseno","title":"Arquitectura y Patrones de Dise\u00f1o","text":"<p>El sistema sigue el patr\u00f3n MVC (Modelo-Vista-Controlador) de Laravel, con una clara separaci\u00f3n de responsabilidades. Los modelos contienen la l\u00f3gica de negocio y validaciones, los controladores gestionan los flujos de trabajo, y las vistas presentan la interfaz de usuario. Se implement\u00f3 el uso de scopes para consultas frecuentes, accessors para formateo de datos, y relaciones Eloquent para la gesti\u00f3n de asociaciones entre entidades.</p>"},{"location":"sprints/sprint-2/#validaciones-y-seguridad","title":"Validaciones y Seguridad","text":"<p>Se implementaron m\u00faltiples capas de validaci\u00f3n: validaciones de formulario usando el sistema de validaci\u00f3n de Laravel, validaciones de negocio en los modelos, y validaciones de integridad referencial en la base de datos. El sistema incluye control de acceso basado en autenticaci\u00f3n y autorizaci\u00f3n por roles, asegurando que los usuarios solo accedan a funcionalidades y datos apropiados para su perfil.</p>"},{"location":"sprints/sprint-2/#manejo-de-transacciones-y-consistencia","title":"Manejo de Transacciones y Consistencia","text":"<p>Para operaciones cr\u00edticas que involucran m\u00faltiples actualizaciones en la base de datos, se implement\u00f3 el uso de transacciones. Esto garantiza la consistencia de los datos en casos como la asignaci\u00f3n de estudiantes a grupos, donde se deben actualizar tanto el contador de estudiantes en el grupo como el estado del preregistro del estudiante.</p>"},{"location":"sprints/sprint-2/#sistema-de-logging-y-auditoria","title":"Sistema de Logging y Auditor\u00eda","text":"<p>Se incorpor\u00f3 un sistema comprehensivo de logging que registra operaciones importantes del sistema, proporcionando informaci\u00f3n contextual para debugging y auditor\u00eda. Los logs incluyen detalles como el usuario que realiz\u00f3 la acci\u00f3n, los datos involucrados y el resultado de la operaci\u00f3n.</p>"},{"location":"sprints/sprint-2/#flujos-de-trabajo-principales","title":"Flujos de Trabajo Principales","text":""},{"location":"sprints/sprint-2/#flujo-de-configuracion-academica","title":"Flujo de Configuraci\u00f3n Acad\u00e9mica","text":"<p>El sistema soporta un flujo completo de configuraci\u00f3n que inicia con la creaci\u00f3n de periodos acad\u00e9micos, seguido por la asignaci\u00f3n de horarios disponibles para ese periodo, la creaci\u00f3n de grupos por nivel, y finalmente la activaci\u00f3n de preregistros para que los estudiantes puedan inscribirse.</p>"},{"location":"sprints/sprint-2/#flujo-de-preregistro-y-asignacion","title":"Flujo de Preregistro y Asignaci\u00f3n","text":"<p>Los estudiantes realizan preregistros seleccionando su nivel deseado y horario preferido. Una vez que el periodo cierra los preregistros, el coordinador asigna estudiantes a grupos considerando sus preferencias y la capacidad disponible. El sistema valida que los estudiantes tengan su pago en orden antes de permitir la asignaci\u00f3n.</p>"},{"location":"sprints/sprint-2/#flujo-de-ejecucion-academica","title":"Flujo de Ejecuci\u00f3n Acad\u00e9mica","text":"<p>Cuando un periodo inicia, el sistema autom\u00e1ticamente actualiza el estado de los grupos y estudiantes a \"en curso\". Durante el periodo, se pueden realizar ajustes en la asignaci\u00f3n de estudiantes. Al finalizar el periodo, el sistema actualiza los estados a \"finalizado\" y genera las estad\u00edsticas correspondientes.</p>"},{"location":"sprints/sprint-2/#integraciones-y-relaciones-entre-modulos","title":"Integraciones y Relaciones entre M\u00f3dulos","text":"<p>Los m\u00f3dulos implementados est\u00e1n interconectados a trav\u00e9s de relaciones definidas en los modelos. Los periodos contienen horarios y grupos, los grupos pertenecen a periodos y tienen asignados aulas y profesores, y los preregistros est\u00e1n asociados a periodos y pueden ser asignados a grupos. Esta estructura relacional permite una gesti\u00f3n coherente y centralizada de la informaci\u00f3n acad\u00e9mica.</p>"},{"location":"sprints/sprint-2/#preparacion-para-sprints-futuros","title":"Preparaci\u00f3n para Sprints Futuros","text":"<p>La arquitectura implementada en el Sprint 2 establece las bases para funcionalidades avanzadas que se desarrollar\u00e1n en sprints posteriores. Los modelos y controladores est\u00e1n dise\u00f1ados para extenderse con caracter\u00edsticas como asignaci\u00f3n autom\u00e1tica de estudiantes, generaci\u00f3n de horarios complejos, sistema de evaluaciones, y reportes anal\u00edticos avanzados.</p> <p>El sistema resultante del Sprint 2 representa una plataforma robusta y escalable para la gesti\u00f3n acad\u00e9mica, con validaciones comprehensivas que previenen errores operativos y una experiencia de usuario optimizada para los diferentes roles involucrados en el proceso educativo.</p>"},{"location":"sprints/sprint-2/#resumen-sprint-2-sistema-de-gestion-academica","title":"Resumen Sprint 2 - Sistema de Gesti\u00f3n Acad\u00e9mica","text":""},{"location":"sprints/sprint-2/#objetivos-cumplidos","title":"Objetivos Cumplidos","text":""},{"location":"sprints/sprint-2/#modulo-de-aulas-completado","title":"M\u00f3dulo de Aulas Completado","text":"<ul> <li>Gesti\u00f3n completa de espacios f\u00edsicos (AulaController)</li> <li>Modelo Aula con relaciones y validaciones </li> <li>Sistema de disponibilidad y capacidad</li> <li>API para consulta de aulas disponibles</li> </ul>"},{"location":"sprints/sprint-2/#modulo-de-horarios-completado","title":"M\u00f3dulo de Horarios Completado","text":"<ul> <li>Gesti\u00f3n de horarios base (HorarioController)</li> <li>Modelo Horario con tipos semanal/sabatino</li> <li>Validaciones de integridad y reglas de negocio</li> <li>Sistema de periodos activos</li> </ul>"},{"location":"sprints/sprint-2/#arquitectura-implementada","title":"Arquitectura Implementada","text":""},{"location":"sprints/sprint-2/#controladores-desarrollados","title":"Controladores Desarrollados","text":""},{"location":"sprints/sprint-2/#aulacontroller-apphttpcontrollersaulacontrollerphp","title":"AulaController (<code>app/Http/Controllers/AulaController.php</code>)","text":"<pre><code>M\u00e9todos Principales:\n- index()    \u2192 Lista con filtros (edificio, tipo, disponibilidad)\n- create()   \u2192 Formulario creaci\u00f3n\n- store()    \u2192 Almacenamiento con validaciones\n- edit()     \u2192 Edici\u00f3n con informaci\u00f3n de uso\n- update()   \u2192 Actualizaci\u00f3n con validaci\u00f3n de capacidad\n- destroy()  \u2192 Eliminaci\u00f3n con verificaci\u00f3n de grupos\n- show()     \u2192 Vista detallada con estad\u00edsticas\n- toggleDisponible() \u2192 Cambio estado disponible\n</code></pre>"},{"location":"sprints/sprint-2/#horariocontroller-apphttpcontrollershorariocontrollerphp","title":"HorarioController (<code>app/Http/Controllers/HorarioController.php</code>)","text":"<pre><code>M\u00e9todos Principales:\n- index()    \u2192 Lista con estad\u00edsticas\n- create()   \u2192 Formulario con d\u00edas seg\u00fan tipo\n- store()    \u2192 Creaci\u00f3n con validaciones espec\u00edficas\n- edit()     \u2192 Edici\u00f3n con restricciones de uso\n- update()   \u2192 Actualizaci\u00f3n con validaciones\n- destroy()  \u2192 Eliminaci\u00f3n controlada\n- toggleActivo() \u2192 Activaci\u00f3n/desactivaci\u00f3n\n</code></pre>"},{"location":"sprints/sprint-2/#modelos-implementados","title":"Modelos Implementados","text":""},{"location":"sprints/sprint-2/#modelo-aula-appmodelsaulaphp","title":"Modelo Aula (<code>app/Models/Aula.php</code>)","text":"<pre><code>Caracter\u00edsticas:\n- Tipos de aula: regular, laboratorio, c\u00f3mputo, audiovisual\n- Relaci\u00f3n hasMany con Grupos\n- Scopes: disponibles(), porTipo(), porEdificio()\n- M\u00e9todos: estaDisponibleEnHorario(), soportaCapacidad()\n- Accessors: nombre_completo, tipo_formateado, info_resumida\n- API: disponiblesParaHorario()\n</code></pre>"},{"location":"sprints/sprint-2/#modelo-horario-appmodelshorariophp","title":"Modelo Horario (<code>app/Models/Horario.php</code>)","text":"<pre><code>Caracter\u00edsticas:\n- Tipos: semanal, sabatino\n- Casts: d\u00edas como array, horas como Carbon\n- Relaciones: horariosPeriodo(), periodosActivos()\n- Scopes: activos(), semanales(), sabatinos()\n- Validaciones: sePuedeEliminar(), enUsoEnPeriodosActivos()\n- Accessors: dias_formateados, horario_completo, duracion\n</code></pre>"},{"location":"sprints/sprint-2/#funcionalidades-clave-implementadas","title":"Funcionalidades Clave Implementadas","text":""},{"location":"sprints/sprint-2/#sistema-de-validaciones-avanzadas","title":"Sistema de Validaciones Avanzadas","text":""},{"location":"sprints/sprint-2/#para-aulas","title":"Para Aulas:","text":"<ul> <li>Capacidad no menor a grupos existentes</li> <li>No eliminar/desactivar con grupos activos</li> <li>Nombre \u00fanico por aula</li> <li>Capacidad entre 1-200 estudiantes</li> </ul>"},{"location":"sprints/sprint-2/#para-horarios","title":"Para Horarios:","text":"<ul> <li>Coherencia d\u00edas/tipo (sabatino=solo s\u00e1bado, semanal=sin s\u00e1bado)</li> <li>Horario fin despu\u00e9s de inicio</li> <li>No editar/eliminar en periodos activos</li> <li>Nombre \u00fanico por horario</li> </ul>"},{"location":"sprints/sprint-2/#sistema-de-consultas-y-scopes","title":"Sistema de Consultas y Scopes","text":""},{"location":"sprints/sprint-2/#aulas","title":"Aulas:","text":"<pre><code>Aula::disponibles()-&gt;porTipo('laboratorio')-&gt;get();\nAula::disponiblesParaHorario($horarioId, $capacidad);\n$aula-&gt;estaDisponibleEnHorario($horarioId);\n</code></pre>"},{"location":"sprints/sprint-2/#horarios","title":"Horarios:","text":"<pre><code>Horario::activos()-&gt;semanales()-&gt;get();\nHorario::sabatinos()-&gt;get();\n$horario-&gt;enUsoEnPeriodosActivos();\n</code></pre>"},{"location":"sprints/sprint-2/#api-y-integraciones","title":"API y Integraciones","text":"<ul> <li>Endpoint JSON para aulas disponibles por horario</li> <li>Estad\u00edsticas en tiempo real para dashboards</li> <li>Sistema de logs para auditor\u00eda</li> </ul>"},{"location":"sprints/sprint-2/#caracteristicas-de-seguridad","title":"Caracter\u00edsticas de Seguridad","text":""},{"location":"sprints/sprint-2/#manejo-de-transacciones","title":"Manejo de Transacciones","text":"<pre><code>DB::beginTransaction();\ntry {\n    // Operaciones cr\u00edticas\n    DB::commit();\n} catch (\\Exception $e) {\n    DB::rollBack();\n}\n</code></pre>"},{"location":"sprints/sprint-2/#validaciones-multi-nivel","title":"Validaciones Multi-nivel","text":"<ol> <li>Validaci\u00f3n de Formulario (Laravel Validation)</li> <li>Validaci\u00f3n de Negocio (M\u00e9todos personalizados)</li> <li>Validaci\u00f3n de Integridad (Relaciones y constraints)</li> </ol>"},{"location":"sprints/sprint-2/#manejo-de-errores","title":"Manejo de Errores","text":"<ul> <li>Logging detallado con contexto</li> <li>Mensajes de error espec\u00edficos al usuario</li> <li>Respuestas JSON para APIs</li> </ul>"},{"location":"sprints/sprint-2/#sistema-de-vistas-y-ux","title":"Sistema de Vistas y UX","text":""},{"location":"sprints/sprint-2/#vistas-implementadas","title":"Vistas Implementadas","text":"<ul> <li><code>coordinador.aulas.index</code> \u2192 Lista con filtros</li> <li><code>coordinador.aulas.create</code> \u2192 Formulario creaci\u00f3n</li> <li><code>coordinador.aulas.edit</code> \u2192 Edici\u00f3n con informaci\u00f3n contextual</li> <li><code>coordinador.aulas.show</code> \u2192 Vista detallada con estad\u00edsticas</li> <li><code>coordinador.horarios.*</code> \u2192 Vistas equivalentes para horarios</li> </ul>"},{"location":"sprints/sprint-2/#experiencia-de-usuario","title":"Experiencia de Usuario","text":"<ul> <li>Filtros din\u00e1micos en listados</li> <li>Mensajes flash de \u00e9xito/error</li> <li>Formularios con validaci\u00f3n en tiempo real</li> <li>Informaci\u00f3n contextual en edici\u00f3n</li> <li>Prevenci\u00f3n de acciones inv\u00e1lidas</li> </ul>"},{"location":"sprints/sprint-2/#metricas-y-estadisticas","title":"M\u00e9tricas y Estad\u00edsticas","text":""},{"location":"sprints/sprint-2/#para-aulas_1","title":"Para Aulas:","text":"<pre><code>[\n    'total_grupos',\n    'grupos_activos', \n    'ocupacion_promedio',\n    'capacidad_utilizada',\n    'horarios_ocupados'\n]\n</code></pre>"},{"location":"sprints/sprint-2/#para-horarios_1","title":"Para Horarios:","text":"<pre><code>[\n    'total',\n    'activos',\n    'semanales',\n    'sabatinos'\n]\n</code></pre>"},{"location":"sprints/sprint-2/#flujos-de-trabajo-completados","title":"Flujos de Trabajo Completados","text":""},{"location":"sprints/sprint-2/#gestion-de-aulas","title":"Gesti\u00f3n de Aulas:","text":"<ol> <li>Crear aula \u2192 Validar \u2192 Transacci\u00f3n \u2192 Confirmar</li> <li>Editar aula \u2192 Verificar capacidad \u2192 Actualizar \u2192 Log</li> <li>Eliminar aula \u2192 Verificar grupos \u2192 Eliminar \u2192 Confirmar</li> <li>Cambiar disponibilidad \u2192 Verificar grupos \u2192 Actualizar \u2192 Notificar</li> </ol>"},{"location":"sprints/sprint-2/#gestion-de-horarios","title":"Gesti\u00f3n de Horarios:","text":"<ol> <li>Crear horario \u2192 Validar tipo/d\u00edas \u2192 Crear \u2192 Log</li> <li>Editar horario \u2192 Verificar uso \u2192 Validar \u2192 Actualizar</li> <li>Eliminar horario \u2192 Verificar periodos \u2192 Eliminar \u2192 Confirmar</li> <li>Cambiar estado \u2192 Actualizar \u2192 Log \u2192 Notificar</li> </ol>"},{"location":"sprints/sprint-2/#resultados-del-sprint","title":"Resultados del Sprint","text":""},{"location":"sprints/sprint-2/#funcionalidades-entregadas","title":"** Funcionalidades Entregadas:**","text":"<ul> <li>[x] CRUD completo para Aulas</li> <li>[x] CRUD completo para Horarios  </li> <li>[x] Sistema de validaciones de negocio</li> <li>[x] API para consultas de disponibilidad</li> <li>[x] Sistema de estad\u00edsticas y reporting</li> <li>[x] Interfaz de usuario completa</li> <li>[x] Manejo de errores y logging</li> <li>[x] Documentaci\u00f3n t\u00e9cnica completa</li> </ul>"},{"location":"sprints/sprint-2/#proximos-pasos-sprint-3","title":"** Pr\u00f3ximos Pasos (Sprint 3):**","text":"<ul> <li>Integraci\u00f3n con m\u00f3dulo de Grupos</li> <li>Sistema de asignaci\u00f3n autom\u00e1tica</li> <li>Conflictos de horarios y aulas</li> <li>Reportes avanzados</li> <li>Optimizaci\u00f3n de rendimiento</li> </ul> <p>Estado del Sprint:  COMPLETADO Calidad de C\u00f3digo:  ALTA (Validaciones robustas, arquitectura s\u00f3lida) Documentaci\u00f3n: COMPLETA (Modelos, controladores, flujos)</p>"},{"location":"sprints/sprint-2/aulaController/","title":"Documentaci\u00f3n del Controlador AulaController","text":""},{"location":"sprints/sprint-2/aulaController/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El controlador AulaController gestiona toda la l\u00f3gica relacionada con la administraci\u00f3n de aulas acad\u00e9micas en el sistema. Proporciona funcionalidades completas para crear, editar, visualizar y eliminar aulas, as\u00ed como gestionar su disponibilidad y asignaci\u00f3n a grupos. Incluye validaciones avanzadas de capacidad, verificaci\u00f3n de horarios ocupados y estad\u00edsticas de uso.</p>"},{"location":"sprints/sprint-2/aulaController/#estructura-del-controlador","title":"Estructura del Controlador","text":""},{"location":"sprints/sprint-2/aulaController/#namespace-y-dependencias","title":"Namespace y Dependencias","text":"<pre><code>namespace App\\Http\\Controllers;\n\nuse App\\Models\\Aula;\nuse App\\Models\\Grupo;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Validation\\Rule;\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodos-principales","title":"M\u00e9todos Principales","text":""},{"location":"sprints/sprint-2/aulaController/#metodo-index","title":"M\u00e9todo: index()","text":"<p>Muestra una lista paginada de todas las aulas con sistema de filtros avanzado.</p> <pre><code>public function index(Request $request)\n{\n    $query = Aula::query();\n\n    // Filtro por edificio\n    if ($request-&gt;has('edificio') &amp;&amp; $request-&gt;edificio) {\n        $query-&gt;where('edificio', $request-&gt;edificio);\n    }\n\n    // Filtro por tipo\n    if ($request-&gt;has('tipo') &amp;&amp; $request-&gt;tipo) {\n        $query-&gt;where('tipo', $request-&gt;tipo);\n    }\n\n    // Filtro por disponibilidad\n    if ($request-&gt;has('disponible') &amp;&amp; $request-&gt;disponible !== '') {\n        $query-&gt;where('disponible', $request-&gt;disponible);\n    }\n\n    $aulas = $query-&gt;orderBy('edificio')\n                   -&gt;orderBy('nombre')\n                   -&gt;get();\n\n    // Datos para los filtros\n    $edificios = Aula::distinct()-&gt;pluck('edificio')-&gt;sort();\n    $tiposAula = Aula::TIPOS_AULA;\n\n    return view('coordinador.aulas.index', compact('aulas', 'edificios', 'tiposAula'));\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-create","title":"M\u00e9todo: create()","text":"<p>Muestra el formulario para crear una nueva aula.</p> <pre><code>public function create()\n{\n    $tiposAula = Aula::TIPOS_AULA;\n    return view('coordinador.aulas.create', compact('tiposAula'));\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-store","title":"M\u00e9todo: store()","text":"<p>Valida y almacena una nueva aula en la base de datos con manejo de transacciones.</p> <pre><code>public function store(Request $request)\n{\n    $validatedData = $request-&gt;validate([\n        'nombre' =&gt; 'required|string|max:100|unique:aulas,nombre',\n        'edificio' =&gt; 'required|string|max:50',\n        'capacidad' =&gt; 'required|integer|min:1|max:200',\n        'tipo' =&gt; ['required', Rule::in(array_keys(Aula::TIPOS_AULA))],\n        'equipamiento' =&gt; 'nullable|string|max:500',\n        'disponible' =&gt; 'boolean'\n    ]);\n\n    try {\n        DB::beginTransaction();\n\n        Aula::create($validatedData);\n\n        DB::commit();\n\n        return redirect()-&gt;route('coordinador.aulas.index')\n            -&gt;with('success', 'Aula creada exitosamente.');\n\n    } catch (\\Exception $e) {\n        DB::rollBack();\n\n        return back()-&gt;with('error', 'Error al crear el aula: ' . $e-&gt;getMessage())\n                    -&gt;withInput();\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-edit","title":"M\u00e9todo: edit()","text":"<p>Muestra el formulario para editar un aula existente incluyendo informaci\u00f3n de uso.</p> <pre><code>public function edit(Aula $aula)\n{\n    $tiposAula = Aula::TIPOS_AULA;\n\n    // Obtener informaci\u00f3n de uso del aula\n    $gruposAsignados = $aula-&gt;grupos()\n        -&gt;with(['periodo', 'horario'])\n        -&gt;whereNotIn('estado', ['cancelado'])\n        -&gt;get();\n\n    $horariosOcupados = $aula-&gt;obtenerHorariosOcupados();\n\n    return view('coordinador.aulas.edit', compact(\n        'aula', \n        'tiposAula', \n        'gruposAsignados',\n        'horariosOcupados'\n    ));\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-update","title":"M\u00e9todo: update()","text":"<p>Actualiza un aula existente con validaciones de capacidad y manejo de transacciones.</p> <pre><code>public function update(Request $request, Aula $aula)\n{\n    $validatedData = $request-&gt;validate([\n        'nombre' =&gt; [\n            'required',\n            'string',\n            'max:100',\n            Rule::unique('aulas')-&gt;ignore($aula-&gt;id)\n        ],\n        'edificio' =&gt; 'required|string|max:50',\n        'capacidad' =&gt; 'required|integer|min:1|max:200',\n        'tipo' =&gt; ['required', Rule::in(array_keys(Aula::TIPOS_AULA))],\n        'equipamiento' =&gt; 'nullable|string|max:500',\n        'disponible' =&gt; 'boolean'\n    ]);\n\n    try {\n        DB::beginTransaction();\n\n        // Validar que la capacidad no sea menor a los grupos actuales\n        if ($validatedData['capacidad'] &lt; $aula-&gt;capacidad) {\n            $gruposConMayorCapacidad = $aula-&gt;grupos()\n                -&gt;where('capacidad_maxima', '&gt;', $validatedData['capacidad'])\n                -&gt;whereNotIn('estado', ['cancelado'])\n                -&gt;exists();\n\n            if ($gruposConMayorCapacidad) {\n                throw new \\Exception('No se puede reducir la capacidad. Hay grupos asignados que requieren m\u00e1s capacidad.');\n            }\n        }\n\n        $aula-&gt;update($validatedData);\n\n        DB::commit();\n\n        return redirect()-&gt;route('coordinador.aulas.index')\n            -&gt;with('success', 'Aula actualizada exitosamente.');\n\n    } catch (\\Exception $e) {\n        DB::rollBack();\n\n        return back()-&gt;with('error', 'Error al actualizar el aula: ' . $e-&gt;getMessage())\n                    -&gt;withInput();\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-destroy","title":"M\u00e9todo: destroy()","text":"<p>Elimina un aula previa verificaci\u00f3n de que no tenga grupos activos asignados.</p> <pre><code>public function destroy(Aula $aula)\n{\n    try {\n        // Verificar grupos activos\n        if ($aula-&gt;grupos()-&gt;whereNotIn('estado', ['cancelado'])-&gt;count() &gt; 0) {\n            return redirect()-&gt;route('coordinador.aulas.index')\n                -&gt;with('error', 'No se puede eliminar el aula. Tiene grupos activos asignados.');\n        }\n\n        $aula-&gt;delete();\n\n        return redirect()-&gt;route('coordinador.aulas.index')\n            -&gt;with('success', 'Aula eliminada correctamente.');\n\n    } catch (\\Exception $e) {\n        return redirect()-&gt;route('coordinador.aulas.index')\n            -&gt;with('error', 'Error al eliminar el aula: ' . $e-&gt;getMessage());\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-toggledisponible","title":"M\u00e9todo: toggleDisponible()","text":"<p>Cambia el estado de disponibilidad del aula con validaci\u00f3n de grupos activos.</p> <pre><code>public function toggleDisponible(Aula $aula)\n{\n    try {\n        // Validar que no tenga grupos activos si se va a desactivar\n        if ($aula-&gt;disponible &amp;&amp; $aula-&gt;grupos()-&gt;whereNotIn('estado', ['cancelado'])-&gt;count() &gt; 0) {\n            return redirect()-&gt;route('coordinador.aulas.index')\n                -&gt;with('error', 'No se puede desactivar el aula. Tiene grupos activos asignados.');\n        }\n\n        $aula-&gt;update([\n            'disponible' =&gt; !$aula-&gt;disponible\n        ]);\n\n        $estado = $aula-&gt;disponible ? 'disponible' : 'no disponible';\n\n        return redirect()-&gt;route('coordinador.aulas.index')\n            -&gt;with('success', \"Aula marcada como {$estado}.\");\n\n    } catch (\\Exception $e) {\n        return redirect()-&gt;route('coordinador.aulas.index')\n            -&gt;with('error', 'Error al cambiar estado del aula: ' . $e-&gt;getMessage());\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-show","title":"M\u00e9todo: show()","text":"<p>Muestra informaci\u00f3n detallada del aula incluyendo grupos asignados y estad\u00edsticas.</p> <pre><code>public function show(Aula $aula)\n{\n    $gruposAsignados = $aula-&gt;grupos()\n        -&gt;with(['periodo', 'horario', 'profesor'])\n        -&gt;whereNotIn('estado', ['cancelado'])\n        -&gt;orderBy('horario_periodo_id')\n        -&gt;get();\n\n    $horariosOcupados = $aula-&gt;obtenerHorariosOcupados();\n    $estadisticas = $this-&gt;obtenerEstadisticasAula($aula);\n\n    return view('coordinador.aulas.show', compact(\n        'aula',\n        'gruposAsignados', \n        'horariosOcupados',\n        'estadisticas'\n    ));\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-obtenerestadisticasaula","title":"M\u00e9todo: obtenerEstadisticasAula()","text":"<p>M\u00e9todo privado que calcula estad\u00edsticas de uso del aula.</p> <pre><code>private function obtenerEstadisticasAula(Aula $aula)\n{\n    $gruposActivos = $aula-&gt;grupos()\n        -&gt;whereNotIn('estado', ['cancelado'])\n        -&gt;get();\n\n    return [\n        'total_grupos' =&gt; $gruposActivos-&gt;count(),\n        'grupos_activos' =&gt; $gruposActivos-&gt;where('estado', 'activo')-&gt;count(),\n        'ocupacion_promedio' =&gt; $gruposActivos-&gt;avg('porcentaje_ocupacion') ?? 0,\n        'capacidad_utilizada' =&gt; $gruposActivos-&gt;sum('estudiantes_inscritos'),\n        'horarios_ocupados' =&gt; $gruposActivos-&gt;unique('horario_periodo_id')-&gt;count()\n    ];\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#metodo-disponiblesparahorario","title":"M\u00e9todo: disponiblesParaHorario()","text":"<p>API que devuelve aulas disponibles para un horario espec\u00edfico.</p> <pre><code>public function disponiblesParaHorario(Request $request)\n{\n    $request-&gt;validate([\n        'horario_periodo_id' =&gt; 'required|exists:horarios_periodo,id',\n        'capacidad_requerida' =&gt; 'nullable|integer|min:1'\n    ]);\n\n    try {\n        $aulas = Aula::disponiblesParaHorario(\n            $request-&gt;horario_periodo_id,\n            $request-&gt;capacidad_requerida\n        );\n\n        return response()-&gt;json([\n            'success' =&gt; true,\n            'aulas' =&gt; $aulas-&gt;map(function ($aula) {\n                return [\n                    'id' =&gt; $aula-&gt;id,\n                    'nombre_completo' =&gt; $aula-&gt;nombre_completo,\n                    'capacidad' =&gt; $aula-&gt;capacidad,\n                    'tipo' =&gt; $aula-&gt;tipo_formateado,\n                    'info_resumida' =&gt; $aula-&gt;info_resumida\n                ];\n            })\n        ]);\n\n    } catch (\\Exception $e) {\n        return response()-&gt;json([\n            'success' =&gt; false,\n            'message' =&gt; 'Error al obtener aulas disponibles: ' . $e-&gt;getMessage()\n        ], 500);\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulaController/#caracteristicas-de-seguridad-y-validaciones","title":"Caracter\u00edsticas de Seguridad y Validaciones","text":""},{"location":"sprints/sprint-2/aulaController/#validaciones-implementadas","title":"Validaciones Implementadas","text":"<ul> <li>Nombre \u00fanico en el sistema para evitar duplicados</li> <li>Capacidad v\u00e1lida entre 1 y 200 estudiantes</li> <li>Tipo de aula dentro de los valores predefinidos</li> <li>Verificaci\u00f3n de grupos activos antes de eliminar o desactivar</li> <li>Validaci\u00f3n de capacidad al reducir el tama\u00f1o del aula</li> </ul>"},{"location":"sprints/sprint-2/aulaController/#manejo-de-transacciones","title":"Manejo de Transacciones","text":"<ul> <li>Uso de <code>DB::beginTransaction()</code> y <code>DB::commit()</code> en operaciones cr\u00edticas</li> <li><code>DB::rollBack()</code> en caso de errores para mantener la integridad de datos</li> </ul>"},{"location":"sprints/sprint-2/aulaController/#prevencion-de-conflictos","title":"Prevenci\u00f3n de Conflictos","text":"<ul> <li>No permite eliminar aulas con grupos activos</li> <li>No permite desactivar aulas con asignaciones vigentes</li> <li>Valida que la capacidad no sea menor a la requerida por grupos existentes</li> </ul>"},{"location":"sprints/sprint-2/aulaController/#relaciones-con-otros-modelos","title":"Relaciones con Otros Modelos","text":""},{"location":"sprints/sprint-2/aulaController/#relacion-con-grupo","title":"Relaci\u00f3n con Grupo","text":"<p>El controlador utiliza la relaci\u00f3n <code>grupos()</code> para: - Verificar asignaciones activas - Calcular estad\u00edsticas de uso - Validar restricciones de capacidad</p>"},{"location":"sprints/sprint-2/aulaController/#relacion-con-horario","title":"Relaci\u00f3n con Horario","text":"<p>A trav\u00e9s del m\u00e9todo <code>obtenerHorariosOcupados()</code> se consulta la disponibilidad del aula en diferentes periodos.</p>"},{"location":"sprints/sprint-2/aulaController/#respuestas-al-usuario","title":"Respuestas al Usuario","text":""},{"location":"sprints/sprint-2/aulaController/#mensajes-de-exito","title":"Mensajes de \u00c9xito","text":"<ul> <li>Aula creada exitosamente</li> <li>Aula actualizada exitosamente  </li> <li>Aula eliminada correctamente</li> <li>Aula marcada como disponible/no disponible</li> </ul>"},{"location":"sprints/sprint-2/aulaController/#mensajes-de-error","title":"Mensajes de Error","text":"<ul> <li>Error al crear/actualizar/eliminar el aula</li> <li>No se puede reducir la capacidad</li> <li>No se puede eliminar/desactivar el aula con grupos activos</li> </ul> <p>Este controlador proporciona una gesti\u00f3n completa y segura de las aulas acad\u00e9micas con validaciones robustas y manejo apropiado de errores, garantizando la integridad de los datos y la consistencia del sistema.</p>"},{"location":"sprints/sprint-2/aulas/","title":"Documentaci\u00f3n del Modelo Aula","text":""},{"location":"sprints/sprint-2/aulas/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Aula</code> representa los espacios f\u00edsicos acad\u00e9micos dentro del sistema de gesti\u00f3n educativa. Gestiona la informaci\u00f3n de aulas, laboratorios, salas de c\u00f3mputo y otros espacios de ense\u00f1anza, proporcionando funcionalidades avanzadas para la gesti\u00f3n de disponibilidad, capacidad y asignaciones.</p>"},{"location":"sprints/sprint-2/aulas/#estructura-del-modelo","title":"Estructura del Modelo","text":""},{"location":"sprints/sprint-2/aulas/#namespace-y-definicion-de-clase","title":"Namespace y Definici\u00f3n de Clase","text":"<pre><code>namespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Aula extends Model\n{\n    use HasFactory;\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#propiedades-del-modelo","title":"Propiedades del Modelo","text":""},{"location":"sprints/sprint-2/aulas/#atributos-mass-assignable","title":"Atributos Mass Assignable","text":"<pre><code>protected $fillable = [\n    'nombre',\n    'edificio', \n    'capacidad',\n    'tipo',\n    'equipamiento',\n    'disponible'\n];\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#casts-de-atributos","title":"Casts de Atributos","text":"<pre><code>protected $casts = [\n    'disponible' =&gt; 'boolean',\n    'capacidad' =&gt; 'integer'\n];\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#constantes-de-tipos-de-aula","title":"Constantes de Tipos de Aula","text":"<pre><code>const TIPOS_AULA = [\n    'regular' =&gt; 'Aula Regular',\n    'laboratorio' =&gt; 'Laboratorio',\n    'computo' =&gt; 'Sala de C\u00f3mputo', \n    'audiovisual' =&gt; 'Aula Audiovisual',\n];\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#relaciones","title":"Relaciones","text":""},{"location":"sprints/sprint-2/aulas/#relacion-con-grupos","title":"Relaci\u00f3n con Grupos","text":"<p><pre><code>public function grupos()\n{\n    return $this-&gt;hasMany(Grupo::class, 'aula_id');\n}\n</code></pre> Descripci\u00f3n: Establece una relaci\u00f3n uno-a-muchos con el modelo <code>Grupo</code>, donde un aula puede tener m\u00faltiples grupos asignados.</p>"},{"location":"sprints/sprint-2/aulas/#scopes-de-consulta","title":"Scopes de Consulta","text":""},{"location":"sprints/sprint-2/aulas/#scope-de-aulas-disponibles","title":"Scope de Aulas Disponibles","text":"<p><pre><code>public function scopeDisponibles($query)\n{\n    return $query-&gt;where('disponible', true);\n}\n</code></pre> Uso: Filtra solo las aulas que est\u00e1n marcadas como disponibles.</p>"},{"location":"sprints/sprint-2/aulas/#scope-por-tipo-de-aula","title":"Scope por Tipo de Aula","text":"<p><pre><code>public function scopePorTipo($query, $tipo)\n{\n    return $query-&gt;where('tipo', $tipo);\n}\n</code></pre> Uso: Filtra aulas por tipo espec\u00edfico (regular, laboratorio, etc.).</p>"},{"location":"sprints/sprint-2/aulas/#scope-por-edificio","title":"Scope por Edificio","text":"<p><pre><code>public function scopePorEdificio($query, $edificio)\n{\n    return $query-&gt;where('edificio', $edificio);\n}\n</code></pre> Uso: Filtra aulas por edificio espec\u00edfico.</p>"},{"location":"sprints/sprint-2/aulas/#metodos-de-disponibilidad-y-validacion","title":"M\u00e9todos de Disponibilidad y Validaci\u00f3n","text":""},{"location":"sprints/sprint-2/aulas/#verificar-disponibilidad-en-horario-especifico","title":"Verificar Disponibilidad en Horario Espec\u00edfico","text":"<p><pre><code>public function estaDisponibleEnHorario($horarioPeriodoId)\n{\n    // Si el aula no est\u00e1 disponible globalmente\n    if (!$this-&gt;disponible) {\n        return false;\n    }\n\n    // Verificar si ya est\u00e1 ocupada en ese horario\n    $ocupada = $this-&gt;grupos()\n        -&gt;where('horario_periodo_id', $horarioPeriodoId)\n        -&gt;whereNotIn('estado', ['cancelado'])\n        -&gt;exists();\n\n    return !$ocupada;\n}\n</code></pre> Prop\u00f3sito: Determina si el aula est\u00e1 disponible para un horario espec\u00edfico. Retorna: <code>true</code> si est\u00e1 disponible, <code>false</code> si est\u00e1 ocupada o no disponible.</p>"},{"location":"sprints/sprint-2/aulas/#obtener-horarios-ocupados","title":"Obtener Horarios Ocupados","text":"<p><pre><code>public function obtenerHorariosOcupados()\n{\n    return $this-&gt;grupos()\n        -&gt;whereNotIn('estado', ['cancelado'])\n        -&gt;with('horario')\n        -&gt;get()\n        -&gt;pluck('horario');\n}\n</code></pre> Prop\u00f3sito: Recupera todos los horarios en los que el aula est\u00e1 actualmente ocupada. Retorna: Colecci\u00f3n de modelos <code>Horario</code> ocupados.</p>"},{"location":"sprints/sprint-2/aulas/#verificar-capacidad-soportada","title":"Verificar Capacidad Soportada","text":"<p><pre><code>public function soportaCapacidad($capacidadRequerida)\n{\n    return $this-&gt;capacidad &gt;= $capacidadRequerida;\n}\n</code></pre> Prop\u00f3sito: Valida si el aula puede acomodar un n\u00famero espec\u00edfico de estudiantes. Retorna: <code>true</code> si la capacidad es suficiente, <code>false</code> en caso contrario.</p>"},{"location":"sprints/sprint-2/aulas/#accessors-getters-computados","title":"Accessors (Getters Computados)","text":""},{"location":"sprints/sprint-2/aulas/#nombre-completo-del-aula","title":"Nombre Completo del Aula","text":"<p><pre><code>public function getNombreCompletoAttribute()\n{\n    return \"{$this-&gt;edificio}-{$this-&gt;nombre}\";\n}\n</code></pre> Ejemplo: Si <code>edificio</code> es \"A\" y <code>nombre</code> es \"101\", retorna \"A-101\".</p>"},{"location":"sprints/sprint-2/aulas/#tipo-de-aula-formateado","title":"Tipo de Aula Formateado","text":"<p><pre><code>public function getTipoFormateadoAttribute()\n{\n    return self::TIPOS_AULA[$this-&gt;tipo] ?? $this-&gt;tipo;\n}\n</code></pre> Prop\u00f3sito: Convierte el c\u00f3digo del tipo de aula a su descripci\u00f3n legible. Ejemplo: Convierte \"laboratorio\" a \"Laboratorio\".</p>"},{"location":"sprints/sprint-2/aulas/#informacion-resumida-del-aula","title":"Informaci\u00f3n Resumida del Aula","text":"<p><pre><code>public function getInfoResumidaAttribute()\n{\n    $disponibilidad = $this-&gt;disponible ? 'Disponible' : 'No disponible';\n    return \"{$this-&gt;nombre_completo} - {$this-&gt;tipo_formateado} ({$this-&gt;capacidad} pers.) - {$disponibilidad}\";\n}\n</code></pre> Ejemplo: \"A-101 - Laboratorio (30 pers.) - Disponible\"</p>"},{"location":"sprints/sprint-2/aulas/#metodos-estaticos","title":"M\u00e9todos Est\u00e1ticos","text":""},{"location":"sprints/sprint-2/aulas/#obtener-aulas-disponibles-para-horario","title":"Obtener Aulas Disponibles para Horario","text":"<p><pre><code>public static function disponiblesParaHorario($horarioPeriodoId, $capacidadRequerida = null)\n{\n    $query = self::disponibles()\n        -&gt;whereDoesntHave('grupos', function ($q) use ($horarioPeriodoId) {\n            $q-&gt;where('horario_periodo_id', $horarioPeriodoId)\n              -&gt;whereNotIn('estado', ['cancelado']);\n        });\n\n    if ($capacidadRequerida) {\n        $query-&gt;where('capacidad', '&gt;=', $capacidadRequerida);\n    }\n\n    return $query-&gt;get();\n}\n</code></pre> Prop\u00f3sito: Busca aulas disponibles para un horario espec\u00edfico, opcionalmente filtrando por capacidad m\u00ednima. Par\u00e1metros: - <code>$horarioPeriodoId</code>: ID del horario a verificar - <code>$capacidadRequerida</code>: Capacidad m\u00ednima requerida (opcional)</p>"},{"location":"sprints/sprint-2/aulas/#obtener-estadisticas-del-sistema","title":"Obtener Estad\u00edsticas del Sistema","text":"<p><pre><code>public static function obtenerEstadisticas()\n{\n    return [\n        'total' =&gt; self::count(),\n        'disponibles' =&gt; self::where('disponible', true)-&gt;count(),\n        'por_tipo' =&gt; self::groupBy('tipo')\n                        -&gt;selectRaw('tipo, count(*) as total')\n                        -&gt;pluck('total', 'tipo'),\n        'por_edificio' =&gt; self::groupBy('edificio')\n                            -&gt;selectRaw('edificio, count(*) as total')\n                            -&gt;pluck('total', 'edificio')\n    ];\n}\n</code></pre> Prop\u00f3sito: Genera estad\u00edsticas agregadas sobre las aulas del sistema. Retorna: Array con: - <code>total</code>: N\u00famero total de aulas - <code>disponibles</code>: N\u00famero de aulas disponibles - <code>por_tipo</code>: Conteo de aulas por tipo - <code>por_edificio</code>: Conteo de aulas por edificio</p>"},{"location":"sprints/sprint-2/aulas/#flujos-de-trabajo-y-casos-de-uso","title":"Flujos de Trabajo y Casos de Uso","text":""},{"location":"sprints/sprint-2/aulas/#1-asignacion-de-grupos-a-aulas","title":"1. Asignaci\u00f3n de Grupos a Aulas","text":"<pre><code>// Verificar disponibilidad y capacidad\n$aula = Aula::find(1);\nif ($aula-&gt;estaDisponibleEnHorario($horarioId) &amp;&amp; $aula-&gt;soportaCapacidad(30)) {\n    // Asignar grupo al aula\n    $grupo-&gt;aula_id = $aula-&gt;id;\n    $grupo-&gt;save();\n}\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#2-busqueda-de-aulas-disponibles","title":"2. B\u00fasqueda de Aulas Disponibles","text":"<pre><code>// Encontrar aulas disponibles para un horario con capacidad m\u00ednima\n$aulasDisponibles = Aula::disponiblesParaHorario($horarioId, 25);\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#3-gestion-de-disponibilidad","title":"3. Gesti\u00f3n de Disponibilidad","text":"<pre><code>// Obtener horarios ocupados para mostrar conflictos\n$horariosOcupados = $aula-&gt;obtenerHorariosOcupados();\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#4-reportes-y-estadisticas","title":"4. Reportes y Estad\u00edsticas","text":"<pre><code>// Generar reporte general de aulas\n$estadisticas = Aula::obtenerEstadisticas();\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#validaciones-y-restricciones-de-negocio","title":"Validaciones y Restricciones de Negocio","text":""},{"location":"sprints/sprint-2/aulas/#reglas-de-validacion-implicitas","title":"Reglas de Validaci\u00f3n Impl\u00edcitas","text":"<ul> <li>La capacidad debe ser un n\u00famero entero positivo</li> <li>El tipo debe ser uno de los valores definidos en <code>TIPOS_AULA</code></li> <li>La disponibilidad se maneja como booleano</li> </ul>"},{"location":"sprints/sprint-2/aulas/#integridad-referencial","title":"Integridad Referencial","text":"<ul> <li>Las aulas con grupos asignados no deben eliminarse directamente</li> <li>Los cambios de disponibilidad deben validarse contra grupos activos</li> </ul>"},{"location":"sprints/sprint-2/aulas/#mejores-practicas-de-uso","title":"Mejores Pr\u00e1cticas de Uso","text":""},{"location":"sprints/sprint-2/aulas/#para-consultas-de-disponibilidad","title":"Para Consultas de Disponibilidad","text":"<pre><code>// Correcto - Usar m\u00e9todos del modelo\n$aula-&gt;estaDisponibleEnHorario($horarioId);\n\n// Incorrecto - Implementar l\u00f3gica manualmente\n</code></pre>"},{"location":"sprints/sprint-2/aulas/#para-filtrados","title":"Para Filtrados","text":"<pre><code>// Correcto - Usar scopes\nAula::disponibles()-&gt;porTipo('laboratorio')-&gt;get();\n\n// Incorrecto - Condiciones manuales\n</code></pre> <p>Este modelo proporciona una base s\u00f3lida para la gesti\u00f3n de espacios acad\u00e9micos, con funcionalidades completas para disponibilidad, capacidad y relaciones con otros componentes del sistema.</p>"},{"location":"sprints/sprint-2/horarioController/","title":"Documentaci\u00f3n del Controlador HorarioController","text":""},{"location":"sprints/sprint-2/horarioController/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El <code>HorarioController</code> es un controlador Laravel que gestiona toda la l\u00f3gica relacionada con la creaci\u00f3n, edici\u00f3n, visualizaci\u00f3n y eliminaci\u00f3n de horarios base en el sistema acad\u00e9mico. Maneja tanto horarios semanales como sabatinos, incluyendo validaciones complejas y restricciones de integridad referencial.</p>"},{"location":"sprints/sprint-2/horarioController/#estructura-del-controlador","title":"Estructura del Controlador","text":""},{"location":"sprints/sprint-2/horarioController/#namespace-y-dependencias","title":"Namespace y Dependencias","text":"<pre><code>namespace App\\Http\\Controllers;\n\nuse App\\Models\\Horario;\nuse App\\Models\\HorarioPeriodo;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Log;\n</code></pre>"},{"location":"sprints/sprint-2/horarioController/#metodos-principales","title":"M\u00e9todos Principales","text":""},{"location":"sprints/sprint-2/horarioController/#metodo-index","title":"M\u00e9todo: index()","text":"<p>Prop\u00f3sito: Muestra el listado de todos los horarios registrados con estad\u00edsticas generales.</p> <pre><code>public function index()\n{\n    $horarios = Horario::withCount(['horariosPeriodo'])\n                      -&gt;orderBy('tipo')\n                      -&gt;orderBy('hora_inicio')\n                      -&gt;get();\n\n    $estadisticas = [\n        'total' =&gt; $horarios-&gt;count(),\n        'activos' =&gt; $horarios-&gt;where('activo', true)-&gt;count(),\n        'semanales' =&gt; $horarios-&gt;where('tipo', 'semanal')-&gt;count(),\n        'sabatinos' =&gt; $horarios-&gt;where('tipo', 'sabatino')-&gt;count(),\n    ];\n\n    return view('coordinador.horarios.index', compact('horarios', 'estadisticas'));\n}\n</code></pre> <p>Caracter\u00edsticas: - Carga el conteo de horarios de periodo relacionados - Ordena por tipo y hora de inicio - Proporciona estad\u00edsticas para dashboards</p>"},{"location":"sprints/sprint-2/horarioController/#metodo-create","title":"M\u00e9todo: create()","text":"<p>Prop\u00f3sito: Muestra el formulario para crear un nuevo horario base.</p> <pre><code>public function create()\n{\n    $diasSemana = ['Lunes', 'Martes', 'Mi\u00e9rcoles', 'Jueves', 'Viernes'];\n    $diasSabado = ['S\u00e1bado'];\n\n    return view('coordinador.horarios.create', compact('diasSemana', 'diasSabado'));\n}\n</code></pre> <p>Par\u00e1metros para la vista: - <code>diasSemana</code>: D\u00edas disponibles para horarios semanales - <code>diasSabado</code>: D\u00edas disponibles para horarios sabatinos</p>"},{"location":"sprints/sprint-2/horarioController/#metodo-store","title":"M\u00e9todo: store()","text":"<p>Prop\u00f3sito: Valida y almacena un nuevo horario base en el sistema.</p> <pre><code>public function store(Request $request)\n{\n    \\Log::info('Datos del formulario:', $request-&gt;all());\n    \\Log::info('Horarios existentes:', Horario::pluck('nombre')-&gt;toArray());\n\n    $request-&gt;validate([\n        'nombre' =&gt; 'required|string|max:255|unique:horarios,nombre',\n        'tipo' =&gt; 'required|in:semanal,sabatino',\n        'dias' =&gt; 'required|array|min:1',\n        'dias.*' =&gt; 'string|in:Lunes,Martes,Mi\u00e9rcoles,Jueves,Viernes,S\u00e1bado',\n        'hora_inicio' =&gt; 'required|date_format:H:i',\n        'hora_fin' =&gt; 'required|date_format:H:i|after:hora_inicio',\n    ]);\n\n    // Validaciones espec\u00edficas por tipo de horario\n    if ($request-&gt;tipo === 'sabatino') {\n        if (!in_array('S\u00e1bado', $request-&gt;dias)) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'Los horarios sabatinos deben incluir el d\u00eda S\u00e1bado.')\n                -&gt;withInput();\n        }\n        if (count($request-&gt;dias) &gt; 1) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'Los horarios sabatinos solo pueden incluir el d\u00eda S\u00e1bado.')\n                -&gt;withInput();\n        }\n    }\n\n    if ($request-&gt;tipo === 'semanal' &amp;&amp; in_array('S\u00e1bado', $request-&gt;dias)) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'Los horarios semanales no pueden incluir S\u00e1bado.')\n            -&gt;withInput();\n    }\n\n    try {\n        $horario = Horario::create([\n            'nombre' =&gt; $request-&gt;nombre,\n            'tipo' =&gt; $request-&gt;tipo,\n            'dias' =&gt; $request-&gt;dias,\n            'hora_inicio' =&gt; $request-&gt;hora_inicio,\n            'hora_fin' =&gt; $request-&gt;hora_fin,\n            'activo' =&gt; $request-&gt;activo ?? true\n        ]);\n\n        Log::info('Horario base creado', [\n            'horario_id' =&gt; $horario-&gt;id,\n            'nombre' =&gt; $horario-&gt;nombre,\n            'tipo' =&gt; $horario-&gt;tipo\n        ]);\n\n        return redirect()-&gt;route('coordinador.horarios.index')\n            -&gt;with('success', 'Horario base creado exitosamente.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error creando horario base: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()\n            -&gt;with('error', 'Error al crear el horario base.')\n            -&gt;withInput();\n    }\n}\n</code></pre> <p>Validaciones Implementadas: - Nombre \u00fanico en el sistema - Tipo v\u00e1lido (semanal/sabatino) - D\u00edas coherentes con el tipo de horario - Horas v\u00e1lidas con formato correcto</p>"},{"location":"sprints/sprint-2/horarioController/#metodo-show","title":"M\u00e9todo: show()","text":"<p>Prop\u00f3sito: Muestra los detalles de un horario espec\u00edfico y los periodos donde est\u00e1 asignado.</p> <pre><code>public function show(Horario $horario)\n{\n    $periodosAsignados = $horario-&gt;periodosActivos()\n                               -&gt;withCount(['grupos'])\n                               -&gt;get();\n\n    return view('coordinador.horarios.show', compact('horario', 'periodosAsignados'));\n}\n</code></pre> <p>Informaci\u00f3n mostrada: - Detalles completos del horario - Periodos activos que utilizan el horario - Conteo de grupos por periodo</p>"},{"location":"sprints/sprint-2/horarioController/#metodo-edit","title":"M\u00e9todo: edit()","text":"<p>Prop\u00f3sito: Muestra el formulario para editar un horario existente.</p> <pre><code>public function edit(Horario $horario)\n{\n    if ($horario-&gt;enUsoEnPeriodosActivos()) {\n        return redirect()-&gt;route('coordinador.horarios.index')\n            -&gt;with('warning', 'No se puede editar un horario que est\u00e1 en uso en periodos activos.');\n    }\n\n    $diasSemana = ['Lunes', 'Martes', 'Mi\u00e9rcoles', 'Jueves', 'Viernes'];\n    $diasSabado = ['S\u00e1bado'];\n\n    return view('coordinador.horarios.edit', compact('horario', 'diasSemana', 'diasSabado'));\n}\n</code></pre> <p>Restricci\u00f3n de Seguridad: Previene la edici\u00f3n de horarios que est\u00e1n en uso en periodos activos.</p>"},{"location":"sprints/sprint-2/horarioController/#metodo-update","title":"M\u00e9todo: update()","text":"<p>Prop\u00f3sito: Actualiza un horario existente con validaciones.</p> <pre><code>public function update(Request $request, Horario $horario)\n{\n    if ($horario-&gt;enUsoEnPeriodosActivos()) {\n        return redirect()-&gt;route('coordinador.horarios.index')\n            -&gt;with('warning', 'No se puede editar un horario que est\u00e1 en uso en periodos activos.');\n    }\n\n    $request-&gt;validate([\n        'nombre' =&gt; 'required|string|max:255|unique:horarios,nombre,' . $horario-&gt;id,\n        'tipo' =&gt; 'required|in:semanal,sabatino',\n        'dias' =&gt; 'required|array|min:1',\n        'dias.*' =&gt; 'string|in:Lunes,Martes,Mi\u00e9rcoles,Jueves,Viernes,S\u00e1bado',\n        'hora_inicio' =&gt; 'required|date_format:H:i',\n        'hora_fin' =&gt; 'required|date_format:H:i|after:hora_inicio',\n    ]);\n\n    // Validaciones espec\u00edficas por tipo (igual que store)\n    // ...\n\n    try {\n        $horario-&gt;update([\n            'nombre' =&gt; $request-&gt;nombre,\n            'tipo' =&gt; $request-&gt;tipo,\n            'dias' =&gt; $request-&gt;dias,\n            'hora_inicio' =&gt; $request-&gt;hora_inicio,\n            'hora_fin' =&gt; $request-&gt;hora_fin,\n            'activo' =&gt; $request-&gt;activo ?? $horario-&gt;activo\n        ]);\n\n        Log::info('Horario base actualizado', [\n            'horario_id' =&gt; $horario-&gt;id,\n            'nombre' =&gt; $horario-&gt;nombre\n        ]);\n\n        return redirect()-&gt;route('coordinador.horarios.index')\n            -&gt;with('success', 'Horario base actualizado exitosamente.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error actualizando horario base: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()\n            -&gt;with('error', 'Error al actualizar el horario base.')\n            -&gt;withInput();\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-2/horarioController/#metodo-destroy","title":"M\u00e9todo: destroy()","text":"<p>Prop\u00f3sito: Elimina un horario del sistema con validaciones de integridad.</p> <pre><code>public function destroy(Horario $horario)\n{\n    if (!$horario-&gt;sePuedeEliminar()) {\n        return redirect()-&gt;route('coordinador.horarios.index')\n            -&gt;with('warning', 'No se puede eliminar el horario porque est\u00e1 siendo usado en periodos.');\n    }\n\n    try {\n        $nombreHorario = $horario-&gt;nombre;\n        $horario-&gt;delete();\n\n        Log::info('Horario base eliminado', ['horario_nombre' =&gt; $nombreHorario]);\n\n        return redirect()-&gt;route('coordinador.horarios.index')\n            -&gt;with('success', \"Horario \\\"{$nombreHorario}\\\" eliminado exitosamente.\");\n\n    } catch (\\Exception $e) {\n        Log::error('Error eliminando horario base: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al eliminar el horario base.');\n    }\n}\n</code></pre> <p>Validaci\u00f3n de Eliminaci\u00f3n: Usa el m\u00e9todo <code>sePuedeEliminar()</code> del modelo para verificar que no hay referencias activas.</p>"},{"location":"sprints/sprint-2/horarioController/#metodo-toggleactivo","title":"M\u00e9todo: toggleActivo()","text":"<p>Prop\u00f3sito: Cambia el estado activo/inactivo de un horario.</p> <pre><code>public function toggleActivo(Horario $horario)\n{\n    try {\n        $nuevoEstado = !$horario-&gt;activo;\n        $horario-&gt;update(['activo' =&gt; $nuevoEstado]);\n\n        $estadoTexto = $nuevoEstado ? 'activado' : 'desactivado';\n\n        Log::info('Estado de horario cambiado', [\n            'horario_id' =&gt; $horario-&gt;id,\n            'nuevo_estado' =&gt; $nuevoEstado\n        ]);\n\n        return redirect()-&gt;route('coordinador.horarios.index')\n            -&gt;with('success', \"Horario {$estadoTexto} exitosamente.\");\n\n    } catch (\\Exception $e) {\n        Log::error('Error cambiando estado del horario: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al cambiar el estado del horario.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-2/horarioController/#caracteristicas-de-seguridad","title":"Caracter\u00edsticas de Seguridad","text":""},{"location":"sprints/sprint-2/horarioController/#validaciones-de-integridad-referencial","title":"Validaciones de Integridad Referencial","text":"<ul> <li>No edici\u00f3n de horarios en uso en periodos activos</li> <li>No eliminaci\u00f3n de horarios con periodos asociados</li> <li>Validaci\u00f3n de tipo coherente con d\u00edas seleccionados</li> </ul>"},{"location":"sprints/sprint-2/horarioController/#manejo-de-logs","title":"Manejo de Logs","text":"<pre><code>Log::info('Horario base creado', [...]);  // Para operaciones exitosas\nLog::error('Error creando horario base: ...'); // Para errores\n</code></pre>"},{"location":"sprints/sprint-2/horarioController/#mensajes-de-respuesta","title":"Mensajes de Respuesta","text":"<ul> <li>\u00c9xito: Mensajes descriptivos con confirmaci\u00f3n de operaci\u00f3n</li> <li>Error: Mensajes espec\u00edficos con redirecci\u00f3n al formulario</li> <li>Advertencia: Para restricciones de negocio</li> </ul>"},{"location":"sprints/sprint-2/horarioController/#flujos-de-validacion-especificos","title":"Flujos de Validaci\u00f3n Espec\u00edficos","text":""},{"location":"sprints/sprint-2/horarioController/#para-horarios-sabatinos","title":"Para Horarios Sabatinos","text":"<ol> <li>Debe incluir exclusivamente el d\u00eda \"S\u00e1bado\"</li> <li>No puede tener m\u00e1s de un d\u00eda seleccionado</li> <li>No puede incluir d\u00edas de la semana</li> </ol>"},{"location":"sprints/sprint-2/horarioController/#para-horarios-semanales","title":"Para Horarios Semanales","text":"<ol> <li>No puede incluir el d\u00eda \"S\u00e1bado\"</li> <li>Debe incluir al menos un d\u00eda de Lunes a Viernes</li> <li>Puede tener m\u00faltiples d\u00edas seleccionados</li> </ol>"},{"location":"sprints/sprint-2/horarioController/#mejores-practicas-implementadas","title":"Mejores Pr\u00e1cticas Implementadas","text":""},{"location":"sprints/sprint-2/horarioController/#uso-de-route-model-binding","title":"Uso de Route Model Binding","text":"<pre><code>public function edit(Horario $horario)  // Laravel resuelve autom\u00e1ticamente el modelo\n</code></pre>"},{"location":"sprints/sprint-2/horarioController/#validaciones-en-dos-niveles","title":"Validaciones en Dos Niveles","text":"<ol> <li>Validaci\u00f3n de Formulario: Reglas b\u00e1sicas de Laravel</li> <li>Validaci\u00f3n de Negocio: L\u00f3gica espec\u00edfica del dominio</li> </ol>"},{"location":"sprints/sprint-2/horarioController/#manejo-de-excepciones","title":"Manejo de Excepciones","text":"<ul> <li>Try-catch en operaciones cr\u00edticas</li> <li>Logging detallado para debugging</li> <li>Respuestas apropiadas al usuario</li> </ul>"},{"location":"sprints/sprint-2/horarioController/#metodos-restful","title":"M\u00e9todos RESTful","text":"<ul> <li><code>index</code>, <code>create</code>, <code>store</code>, <code>show</code>, <code>edit</code>, <code>update</code>, <code>destroy</code></li> <li>M\u00e9todo adicional <code>toggleActivo</code> para funcionalidad espec\u00edfica</li> </ul> <p>Este controlador proporciona una gesti\u00f3n completa y segura de los horarios base del sistema, con validaciones robustas que garantizan la integridad de los datos y previenen conflictos en las asignaciones acad\u00e9micas.</p>"},{"location":"sprints/sprint-2/horarios/","title":"Documentaci\u00f3n del Modelo Horario","text":""},{"location":"sprints/sprint-2/horarios/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Horario</code> representa los horarios base del sistema acad\u00e9mico, definiendo las configuraciones de d\u00edas y horas disponibles para la asignaci\u00f3n de clases. Gestiona tanto horarios semanales como sabatinos, proporcionando funcionalidades para validaci\u00f3n, formateo y verificaci\u00f3n de uso en periodos activos.</p>"},{"location":"sprints/sprint-2/horarios/#estructura-del-modelo","title":"Estructura del Modelo","text":""},{"location":"sprints/sprint-2/horarios/#namespace-y-definicion-de-clase","title":"Namespace y Definici\u00f3n de Clase","text":"<pre><code>namespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Horario extends Model\n{\n    use HasFactory;\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#propiedades-del-modelo","title":"Propiedades del Modelo","text":""},{"location":"sprints/sprint-2/horarios/#atributos-mass-assignable","title":"Atributos Mass Assignable","text":"<pre><code>protected $fillable = [\n    'nombre',\n    'tipo', \n    'dias',\n    'hora_inicio',\n    'hora_fin',\n    'activo'\n];\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#casts-de-atributos","title":"Casts de Atributos","text":"<pre><code>protected $casts = [\n    'dias' =&gt; 'array',\n    'hora_inicio' =&gt; 'datetime:H:i',\n    'hora_fin' =&gt; 'datetime:H:i',\n    'activo' =&gt; 'boolean'\n];\n</code></pre> <p>Explicaci\u00f3n de Casts: - <code>dias</code>: Convierte el JSON de la base de datos a array de PHP - <code>hora_inicio</code> y <code>hora_fin</code>: Formatean las horas como objetos Carbon para manipulaci\u00f3n temporal - <code>activo</code>: Convierte el valor a booleano</p>"},{"location":"sprints/sprint-2/horarios/#relaciones","title":"Relaciones","text":""},{"location":"sprints/sprint-2/horarios/#relacion-con-horariosperiodo","title":"Relaci\u00f3n con HorariosPeriodo","text":"<p><pre><code>public function horariosPeriodo()\n{\n    return $this-&gt;hasMany(HorarioPeriodo::class, 'horario_base_id');\n}\n</code></pre> Descripci\u00f3n: Establece una relaci\u00f3n uno-a-muchos con el modelo <code>HorarioPeriodo</code>, donde un horario base puede tener m\u00faltiples instancias en diferentes periodos acad\u00e9micos.</p>"},{"location":"sprints/sprint-2/horarios/#relacion-con-periodos-activos","title":"Relaci\u00f3n con Periodos Activos","text":"<p><pre><code>public function periodosActivos()\n{\n    return $this-&gt;belongsToMany(Periodo::class, 'horarios_periodo', 'horario_base_id', 'periodo_id')\n                -&gt;wherePivot('activo', true)\n                -&gt;withTimestamps();\n}\n</code></pre> Descripci\u00f3n: Define una relaci\u00f3n muchos-a-muchos con el modelo <code>Periodo</code> a trav\u00e9s de la tabla pivote <code>horarios_periodo</code>, filtrando solo los periodos activos.</p>"},{"location":"sprints/sprint-2/horarios/#scopes-de-consulta","title":"Scopes de Consulta","text":""},{"location":"sprints/sprint-2/horarios/#scope-de-horarios-activos","title":"Scope de Horarios Activos","text":"<p><pre><code>public function scopeActivos($query)\n{\n    return $query-&gt;where('activo', true);\n}\n</code></pre> Uso: Filtra solo los horarios que est\u00e1n marcados como activos en el sistema.</p>"},{"location":"sprints/sprint-2/horarios/#scope-de-horarios-semanales","title":"Scope de Horarios Semanales","text":"<p><pre><code>public function scopeSemanales($query)\n{\n    return $query-&gt;where('tipo', 'semanal');\n}\n</code></pre> Uso: Filtra horarios de tipo semanal (Lunes a Viernes).</p>"},{"location":"sprints/sprint-2/horarios/#scope-de-horarios-sabatinos","title":"Scope de Horarios Sabatinos","text":"<p><pre><code>public function scopeSabatinos($query)\n{\n    return $query-&gt;where('tipo', 'sabatino');\n}\n</code></pre> Uso: Filtra horarios de tipo sabatino (exclusivamente S\u00e1bados).</p>"},{"location":"sprints/sprint-2/horarios/#metodos-de-utilidad","title":"M\u00e9todos de Utilidad","text":""},{"location":"sprints/sprint-2/horarios/#verificar-estado-activo","title":"Verificar Estado Activo","text":"<p><pre><code>public function estaActivo()\n{\n    return $this-&gt;activo;\n}\n</code></pre> Prop\u00f3sito: Verifica si el horario est\u00e1 activo en el sistema. Retorna: <code>true</code> si est\u00e1 activo, <code>false</code> si est\u00e1 inactivo.</p>"},{"location":"sprints/sprint-2/horarios/#obtener-dias-formateados","title":"Obtener D\u00edas Formateados","text":"<p><pre><code>public function getDiasFormateadosAttribute()\n{\n    if (!$this-&gt;dias) return '';\n\n    $diasMap = [\n        'Lunes' =&gt; 'Lun',\n        'Martes' =&gt; 'Mar', \n        'Mi\u00e9rcoles' =&gt; 'Mi\u00e9',\n        'Jueves' =&gt; 'Jue',\n        'Viernes' =&gt; 'Vie',\n        'S\u00e1bado' =&gt; 'S\u00e1b',\n        'Domingo' =&gt; 'Dom'\n    ];\n\n    return collect($this-&gt;dias)-&gt;map(function ($dia) use ($diasMap) {\n        return $diasMap[$dia] ?? $dia;\n    })-&gt;implode(', ');\n}\n</code></pre> Prop\u00f3sito: Convierte el array de d\u00edas a una cadena formateada con abreviaturas. Ejemplo: Convierte <code>['Lunes', 'Mi\u00e9rcoles', 'Viernes']</code> a <code>\"Lun, Mi\u00e9, Vie\"</code></p>"},{"location":"sprints/sprint-2/horarios/#obtener-horario-completo","title":"Obtener Horario Completo","text":"<p><pre><code>public function getHorarioCompletoAttribute()\n{\n    return \"{$this-&gt;dias_formateados} {$this-&gt;hora_inicio-&gt;format('H:i')} - {$this-&gt;hora_fin-&gt;format('H:i')}\";\n}\n</code></pre> Prop\u00f3sito: Genera una representaci\u00f3n completa y legible del horario. Ejemplo: <code>\"Lun, Mi\u00e9, Vie 08:00 - 10:00\"</code></p>"},{"location":"sprints/sprint-2/horarios/#calcular-duracion","title":"Calcular Duraci\u00f3n","text":"<p><pre><code>public function getDuracionAttribute()\n{\n    return $this-&gt;hora_inicio-&gt;diffInHours($this-&gt;hora_fin);\n}\n</code></pre> Prop\u00f3sito: Calcula la duraci\u00f3n total del horario en horas. Retorna: N\u00famero entero representando las horas de duraci\u00f3n.</p>"},{"location":"sprints/sprint-2/horarios/#metodos-de-validacion-de-negocio","title":"M\u00e9todos de Validaci\u00f3n de Negocio","text":""},{"location":"sprints/sprint-2/horarios/#verificar-si-se-puede-eliminar","title":"Verificar si se Puede Eliminar","text":"<p><pre><code>public function sePuedeEliminar()\n{\n    // No se puede eliminar si est\u00e1 siendo usado en alg\u00fan periodo\n    return $this-&gt;horariosPeriodo()-&gt;count() === 0;\n}\n</code></pre> Prop\u00f3sito: Determina si el horario puede ser eliminado del sistema. Retorna: <code>true</code> si no tiene horarios de periodo asociados, <code>false</code> si est\u00e1 en uso.</p>"},{"location":"sprints/sprint-2/horarios/#verificar-uso-en-periodos-activos","title":"Verificar Uso en Periodos Activos","text":"<p><pre><code>public function enUsoEnPeriodosActivos()\n{\n    return $this-&gt;horariosPeriodo()\n                -&gt;whereHas('periodo', function($query) {\n                    $query-&gt;where('estado', '!=', 'finalizado');\n                })\n                -&gt;exists();\n}\n</code></pre> Prop\u00f3sito: Verifica si el horario est\u00e1 siendo utilizado en periodos que no est\u00e1n finalizados. Retorna: <code>true</code> si est\u00e1 en uso en periodos activos, <code>false</code> en caso contrario.</p>"},{"location":"sprints/sprint-2/horarios/#flujos-de-trabajo-y-casos-de-uso","title":"Flujos de Trabajo y Casos de Uso","text":""},{"location":"sprints/sprint-2/horarios/#1-creacion-de-nuevo-horario","title":"1. Creaci\u00f3n de Nuevo Horario","text":"<pre><code>$horario = Horario::create([\n    'nombre' =&gt; 'Matutino Lunes-Mi\u00e9rcoles',\n    'tipo' =&gt; 'semanal',\n    'dias' =&gt; ['Lunes', 'Mi\u00e9rcoles'],\n    'hora_inicio' =&gt; '08:00',\n    'hora_fin' =&gt; '10:00',\n    'activo' =&gt; true\n]);\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#2-busqueda-de-horarios-disponibles","title":"2. B\u00fasqueda de Horarios Disponibles","text":"<pre><code>// Obtener horarios semanales activos\n$horariosSemanales = Horario::activos()-&gt;semanales()-&gt;get();\n\n// Obtener horarios sabatinos\n$horariosSabatinos = Horario::sabatinos()-&gt;get();\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#3-validacion-para-eliminacion","title":"3. Validaci\u00f3n para Eliminaci\u00f3n","text":"<pre><code>$horario = Horario::find(1);\n\nif ($horario-&gt;sePuedeEliminar()) {\n    $horario-&gt;delete();\n    return response()-&gt;json(['message' =&gt; 'Horario eliminado correctamente']);\n} else {\n    return response()-&gt;json(['error' =&gt; 'No se puede eliminar el horario: est\u00e1 en uso'], 400);\n}\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#4-formateo-para-interfaz-de-usuario","title":"4. Formateo para Interfaz de Usuario","text":"<pre><code>$horario = Horario::find(1);\necho $horario-&gt;horario_completo; // \"Lun, Mi\u00e9 08:00 - 10:00\"\necho $horario-&gt;duracion; // 2 (horas)\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#5-verificacion-de-uso-en-periodos","title":"5. Verificaci\u00f3n de Uso en Periodos","text":"<pre><code>if ($horario-&gt;enUsoEnPeriodosActivos()) {\n    return redirect()-&gt;back()-&gt;with('error', 'No se puede modificar el horario: est\u00e1 en uso en periodos activos');\n}\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#reglas-de-validacion-de-negocio","title":"Reglas de Validaci\u00f3n de Negocio","text":""},{"location":"sprints/sprint-2/horarios/#para-horarios-semanales","title":"Para Horarios Semanales","text":"<ul> <li>No pueden incluir el d\u00eda \"S\u00e1bado\" en el array de d\u00edas</li> <li>Deben incluir al menos un d\u00eda entre Lunes y Viernes</li> </ul>"},{"location":"sprints/sprint-2/horarios/#para-horarios-sabatinos","title":"Para Horarios Sabatinos","text":"<ul> <li>Deben incluir exclusivamente el d\u00eda \"S\u00e1bado\"</li> <li>No pueden incluir d\u00edas de la semana (Lunes a Viernes)</li> </ul>"},{"location":"sprints/sprint-2/horarios/#validaciones-de-tiempo","title":"Validaciones de Tiempo","text":"<ul> <li><code>hora_fin</code> debe ser posterior a <code>hora_inicio</code></li> <li>La duraci\u00f3n m\u00ednima debe ser de 1 hora</li> <li>No debe haber superposici\u00f3n de horarios con el mismo conjunto de d\u00edas</li> </ul>"},{"location":"sprints/sprint-2/horarios/#mejores-practicas-de-uso","title":"Mejores Pr\u00e1cticas de Uso","text":""},{"location":"sprints/sprint-2/horarios/#para-consultas-de-horarios","title":"Para Consultas de Horarios","text":"<pre><code>// \u2705 Correcto - Usar scopes definidos\n$horarios = Horario::activos()-&gt;semanales()-&gt;get();\n\n// \u274c Incorrecto - Condiciones manuales\n$horarios = Horario::where('activo', true)-&gt;where('tipo', 'semanal')-&gt;get();\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#para-validaciones-de-negocio","title":"Para Validaciones de Negocio","text":"<pre><code>// \u2705 Correcto - Usar m\u00e9todos del modelo\nif ($horario-&gt;enUsoEnPeriodosActivos()) {\n    // Manejar restricci\u00f3n\n}\n\n// \u274c Incorrecto - Implementar l\u00f3gica en el controlador\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#para-formateo-de-datos","title":"Para Formateo de Datos","text":"<pre><code>// \u2705 Correcto - Usar accessors\n$horarioCompleto = $horario-&gt;horario_completo;\n\n// \u274c Incorrecto - Formatear manualmente en vistas\n</code></pre>"},{"location":"sprints/sprint-2/horarios/#integracion-con-el-sistema","title":"Integraci\u00f3n con el Sistema","text":""},{"location":"sprints/sprint-2/horarios/#en-controladores","title":"En Controladores","text":"<p>El modelo Horario se utiliza principalmente en: - <code>HorarioController</code>: Para operaciones CRUD b\u00e1sicas - <code>HorarioPeriodoController</code>: Para gesti\u00f3n de horarios por periodo - <code>GrupoController</code>: Para asignaci\u00f3n de horarios a grupos</p>"},{"location":"sprints/sprint-2/horarios/#en-vistas","title":"En Vistas","text":"<p>Los accessors como <code>dias_formateados</code> y <code>horario_completo</code> facilitan la presentaci\u00f3n de datos sin necesidad de l\u00f3gica adicional en las vistas.</p> <p>Este modelo proporciona una base robusta para la gesti\u00f3n de horarios acad\u00e9micos, con validaciones de integridad y m\u00e9todos utilitarios que simplifican el desarrollo de funcionalidades relacionadas con la asignaci\u00f3n de tiempos en el sistema educativo.</p>"},{"location":"sprints/sprint-3/","title":"Resumen General del Sistema de Gesti\u00f3n Acad\u00e9mica","text":"<p>Historial de Versiones | Versi\u00f3n | Fecha | Autor | Descripci\u00f3n de los Cambios | |---------|-------|-------|---------------------------| | 1.0 | 15/01/2025 | Isaac Jonathan Santos Rojas | Documentaci\u00f3n inicial del Sprint 3 | | 1.1 | 20/01/2025 | Isaac Jonathan Santos Rojas | Agregados modelos Periodo y Preregistro | | | | | |</p>"},{"location":"sprints/sprint-3/#arquitectura-del-sistema","title":"Arquitectura del Sistema","text":""},{"location":"sprints/sprint-3/#estructura-mvc-implementada","title":"Estructura MVC Implementada","text":"<p>El sistema sigue el patr\u00f3n Modelo-Vista-Controlador (MVC) de Laravel, con una clara separaci\u00f3n de responsabilidades:</p> <ul> <li>Modelos: Gestionan datos y l\u00f3gica de negocio</li> <li>Controladores: Manejan la l\u00f3gica de aplicaci\u00f3n y flujos de trabajo</li> <li>Vistas: Presentan la interfaz de usuario</li> </ul>"},{"location":"sprints/sprint-3/#modulos-principales-implementados","title":"M\u00f3dulos Principales Implementados","text":""},{"location":"sprints/sprint-3/#1-gestion-de-aulas","title":"1. Gesti\u00f3n de Aulas","text":"<p>Modelo: <code>Aula</code> Controlador: <code>AulaController</code></p> <p>Funcionalidades: - CRUD completo de aulas acad\u00e9micas - Gesti\u00f3n de capacidad (15-200 estudiantes) - Tipos de aula: regular, laboratorio, c\u00f3mputo, audiovisual - Sistema de disponibilidad y horarios ocupados - Validaci\u00f3n de capacidad vs grupos asignados - API para consulta de aulas disponibles</p> <p>Estados: disponible/no disponible</p>"},{"location":"sprints/sprint-3/#2-gestion-de-horarios-base","title":"2. Gesti\u00f3n de Horarios Base","text":"<p>Modelo: <code>Horario</code> Controlador: <code>HorarioController</code></p> <p>Funcionalidades: - CRUD de horarios base (semanal/sabatino) - Validaci\u00f3n de d\u00edas seg\u00fan tipo (semanal: L-V, sabatino: solo s\u00e1bado) - Prevenci\u00f3n de edici\u00f3n/eliminaci\u00f3n en periodos activos - Sistema de activaci\u00f3n/desactivaci\u00f3n</p> <p>Estados: activo/inactivo</p>"},{"location":"sprints/sprint-3/#3-gestion-de-periodos-academicos","title":"3. Gesti\u00f3n de Periodos Acad\u00e9micos","text":"<p>Modelo: <code>Periodo</code> Controlador: <code>PeriodoController</code></p> <p>Funcionalidades: - CRUD de periodos acad\u00e9micos - Gesti\u00f3n de estados del periodo (6 estados) - Transiciones controladas entre estados - Validaci\u00f3n de dependencias (horarios, aulas, profesores) - Automatizaci\u00f3n de estados de grupos y estudiantes</p> <p>Estados:  - configuraci\u00f3n \u2192 preregistros_activos \u2192 preregistros_cerrados \u2192 en_curso \u2192 finalizado/cancelado</p>"},{"location":"sprints/sprint-3/#4-gestion-de-grupos","title":"4. Gesti\u00f3n de Grupos","text":"<p>Modelo: <code>Grupo</code> Controlador: <code>CoordinadorGrupoController</code></p> <p>Funcionalidades: - CRUD de grupos acad\u00e9micos - Asignaci\u00f3n de estudiantes a grupos - Validaci\u00f3n de capacidad y conflictos de horario - Estados autom\u00e1ticos seg\u00fan asignaciones - Gesti\u00f3n de profesores y aulas</p> <p>Estados: planificado \u2192 con_profesor \u2192 con_aula \u2192 activo \u2192 en_curso \u2192 finalizado/cancelado</p>"},{"location":"sprints/sprint-3/#5-gestion-de-preregistros","title":"5. Gesti\u00f3n de Preregistros","text":"<p>Modelo: <code>Preregistro</code> Controlador: <code>PreregistroController</code></p> <p>Funcionalidades: - Preregistro de estudiantes en periodos activos - Gesti\u00f3n de estados de pago (incluye pr\u00f3rroga) - Asignaci\u00f3n autom\u00e1tica a grupos - Sincronizaci\u00f3n con estados del periodo - Validaci\u00f3n de unicidad por periodo</p> <p>Estados: pendiente \u2192 asignado \u2192 cursando \u2192 finalizado/cancelado</p>"},{"location":"sprints/sprint-3/#caracteristicas-tecnicas-comunes","title":"Caracter\u00edsticas T\u00e9cnicas Comunes","text":""},{"location":"sprints/sprint-3/#validaciones-implementadas","title":"Validaciones Implementadas","text":"<ul> <li>Validaciones de formulario: Reglas Laravel est\u00e1ndar</li> <li>Validaciones de negocio: L\u00f3gica personalizada en modelos</li> <li>Validaciones de integridad: Prevenci\u00f3n de operaciones inv\u00e1lidas</li> <li>Validaciones de estado: Control de transiciones entre estados</li> </ul>"},{"location":"sprints/sprint-3/#seguridad-y-control-de-acceso","title":"Seguridad y Control de Acceso","text":"<ul> <li>Autenticaci\u00f3n requerida para todas las operaciones</li> <li>Autorizaci\u00f3n por roles (coordinador, estudiante)</li> <li>Verificaci\u00f3n de propiedad de datos</li> <li>Prevenci\u00f3n de operaciones inv\u00e1lidas seg\u00fan estado</li> </ul>"},{"location":"sprints/sprint-3/#manejo-de-transacciones","title":"Manejo de Transacciones","text":"<ul> <li>Operaciones cr\u00edticas usan transacciones de base de datos</li> <li>Consistencia garantizada en operaciones m\u00faltiples</li> <li>Rollback autom\u00e1tico en caso de errores</li> </ul>"},{"location":"sprints/sprint-3/#sistema-de-logging","title":"Sistema de Logging","text":"<ul> <li>Registro de operaciones importantes</li> <li>Informaci\u00f3n contextual para debugging</li> <li>Auditor\u00eda de cambios en el sistema</li> </ul>"},{"location":"sprints/sprint-3/#flujos-de-trabajo-principales","title":"Flujos de Trabajo Principales","text":""},{"location":"sprints/sprint-3/#1-configuracion-de-periodo","title":"1. Configuraci\u00f3n de Periodo","text":"<pre><code>Crear periodo \u2192 Agregar horarios \u2192 Activar preregistros\n</code></pre>"},{"location":"sprints/sprint-3/#2-preregistro-de-estudiantes","title":"2. Preregistro de Estudiantes","text":"<pre><code>Periodo activo \u2192 Preregistro estudiante \u2192 Pago \u2192 Asignaci\u00f3n a grupo\n</code></pre>"},{"location":"sprints/sprint-3/#3-gestion-de-grupos","title":"3. Gesti\u00f3n de Grupos","text":"<pre><code>Crear grupo \u2192 Asignar profesor/aula \u2192 Asignar estudiantes \u2192 Activar grupo\n</code></pre>"},{"location":"sprints/sprint-3/#4-ciclo-de-vida-academico","title":"4. Ciclo de Vida Acad\u00e9mico","text":"<pre><code>Inicio periodo \u2192 Grupos activos \u2192 Estudiantes cursando \u2192 Finalizaci\u00f3n\n</code></pre>"},{"location":"sprints/sprint-3/#estados-y-transiciones","title":"Estados y Transiciones","text":""},{"location":"sprints/sprint-3/#periodos-6-estados","title":"Periodos (6 estados)","text":"<ul> <li>configuraci\u00f3n: Configuraci\u00f3n inicial</li> <li>preregistros_activos: Aceptando preregistros</li> <li>preregistros_cerrados: Preregistros cerrados</li> <li>en_curso: Periodo activo</li> <li>finalizado: Periodo completado</li> <li>cancelado: Periodo cancelado</li> </ul>"},{"location":"sprints/sprint-3/#grupos-6-estados","title":"Grupos (6 estados)","text":"<ul> <li>planificado: Creado sin asignaciones</li> <li>con_profesor: Profesor asignado</li> <li>con_aula: Aula asignada</li> <li>activo: Listo para estudiantes</li> <li>en_curso: Impartiendo clases</li> <li>finalizado/cancelado: Estados finales</li> </ul>"},{"location":"sprints/sprint-3/#preregistros-5-estados","title":"Preregistros (5 estados)","text":"<ul> <li>pendiente: Esperando asignaci\u00f3n</li> <li>asignado: Asignado a grupo</li> <li>cursando: Activo en clases</li> <li>finalizado: Curso completado</li> <li>cancelado: Preregistro cancelado</li> </ul>"},{"location":"sprints/sprint-3/#integraciones-y-relaciones","title":"Integraciones y Relaciones","text":""},{"location":"sprints/sprint-3/#relaciones-entre-modelos","title":"Relaciones entre Modelos","text":"<ul> <li>Periodo \u2194 HorarioPeriodo \u2194 Horario (Base)</li> <li>Periodo \u2194 Grupo \u2194 Aula \u2194 Profesor</li> <li>Periodo \u2194 Preregistro \u2194 Usuario (Estudiante)</li> <li>Grupo \u2194 Preregistro (Estudiantes asignados)</li> </ul>"},{"location":"sprints/sprint-3/#dependencias-del-sistema","title":"Dependencias del Sistema","text":"<ul> <li>Para activar preregistros: Horarios + Aulas + Profesores</li> <li>Para activar grupos: Profesor + Aula + Capacidad</li> <li>Para asignar estudiantes: Preregistro pagado + Capacidad disponible</li> </ul>"},{"location":"sprints/sprint-3/#caracteristicas-de-usabilidad","title":"Caracter\u00edsticas de Usabilidad","text":""},{"location":"sprints/sprint-3/#para-coordinadores","title":"Para Coordinadores","text":"<ul> <li>Interfaces administrativas completas</li> <li>Filtros y b\u00fasquedas avanzadas</li> <li>Estad\u00edsticas en tiempo real</li> <li>Validaciones preventivas</li> </ul>"},{"location":"sprints/sprint-3/#para-estudiantes","title":"Para Estudiantes","text":"<ul> <li>Interfaz simplificada de preregistro</li> <li>Seguimiento de estado de solicitudes</li> <li>Informaci\u00f3n clara de grupos asignados</li> </ul>"},{"location":"sprints/sprint-3/#metricas-y-estadisticas","title":"M\u00e9tricas y Estad\u00edsticas","text":""},{"location":"sprints/sprint-3/#disponibles-en-el-sistema","title":"Disponibles en el Sistema","text":"<ul> <li>Ocupaci\u00f3n de aulas y grupos</li> <li>Distribuci\u00f3n por niveles</li> <li>Estados de preregistros y pagos</li> <li>Eficiencia de utilizaci\u00f3n de recursos</li> </ul> <p>Este sistema proporciona una plataforma completa para la gesti\u00f3n acad\u00e9mica de cursos de ingl\u00e9s, con validaciones robustas, automatizaciones inteligentes y una interfaz adecuada para los diferentes roles de usuario.</p>"},{"location":"sprints/sprint-3/coordinadorGrupoController/","title":"Documentaci\u00f3n del Controlador CoordinadorGrupoController","text":""},{"location":"sprints/sprint-3/coordinadorGrupoController/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El controlador <code>CoordinadorGrupoController</code> gestiona toda la l\u00f3gica relacionada con la administraci\u00f3n de grupos acad\u00e9micos en el sistema. Proporciona funcionalidades completas para crear, editar, visualizar y gestionar grupos, incluyendo la asignaci\u00f3n de estudiantes, gesti\u00f3n de capacidad y control de estados.</p>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#estructura-del-controlador","title":"Estructura del Controlador","text":""},{"location":"sprints/sprint-3/coordinadorGrupoController/#namespace-y-dependencias","title":"Namespace y Dependencias","text":"<pre><code>namespace App\\Http\\Controllers;\n\nuse App\\Models\\Grupo;\nuse App\\Models\\Periodo;\nuse App\\Models\\HorarioPeriodo;\nuse App\\Models\\Aula;\nuse App\\Models\\Profesor;\nuse App\\Models\\Preregistro;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\DB;\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodos-principales","title":"M\u00e9todos Principales","text":""},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-indexrequest-request","title":"M\u00e9todo: index(Request $request)","text":"<p>Muestra la lista paginada de grupos con sistema de filtros avanzados y estad\u00edsticas.</p> <pre><code>public function index(Request $request)\n{\n    $query = Grupo::with(['periodo', 'horario', 'aula', 'profesor', 'estudiantesActivos'])\n        -&gt;latest();\n\n    // Aplicaci\u00f3n de filtros\n    if ($request-&gt;filled('nivel')) {\n        $query-&gt;where('nivel_ingles', $request-&gt;nivel);\n    }\n\n    if ($request-&gt;filled('estado')) {\n        $query-&gt;where('estado', $request-&gt;estado);\n    }\n\n    if ($request-&gt;filled('periodo_id')) {\n        $query-&gt;where('periodo_id', $request-&gt;periodo_id);\n    }\n\n    $grupos = $query-&gt;paginate(20);\n    $periodos = Periodo::all();\n    $periodoActivo = Periodo::conPreRegistrosActivos()-&gt;first();\n\n    $estadisticas = $this-&gt;calcularEstadisticas($request);\n\n    return view('coordinador.grupos.index', compact(\n        'grupos', \n        'periodos', \n        'periodoActivo',\n        'estadisticas' \n    ));\n}\n</code></pre> <p>Caracter\u00edsticas: - Carga relaciones necesarias para optimizaci\u00f3n - Sistema de filtros por nivel, estado y periodo - Paginaci\u00f3n de 20 elementos por p\u00e1gina - C\u00e1lculo de estad\u00edsticas en tiempo real</p>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-calcularestadisticasrequest-request","title":"M\u00e9todo: calcularEstadisticas(Request $request)","text":"<p>M\u00e9todo privado que calcula m\u00e9tricas detalladas sobre los grupos.</p> <pre><code>private function calcularEstadisticas(Request $request)\n{\n    $query = Grupo::query();\n\n    // Aplicar mismos filtros que en el index\n    if ($request-&gt;filled('nivel')) {\n        $query-&gt;where('nivel_ingles', $request-&gt;nivel);\n    }\n\n    if ($request-&gt;filled('estado')) {\n        $query-&gt;where('estado', $request-&gt;estado);\n    }\n\n    if ($request-&gt;filled('periodo_id')) {\n        $query-&gt;where('periodo_id', $request-&gt;periodo_id);\n    }\n\n    $grupos = $query-&gt;get();\n\n    return [\n        'total' =&gt; $grupos-&gt;count(),\n        'planificados' =&gt; $grupos-&gt;where('estado', 'planificado')-&gt;count(),\n        'con_profesor' =&gt; $grupos-&gt;where('estado', 'con_profesor')-&gt;count(),\n        'con_aula' =&gt; $grupos-&gt;where('estado', 'con_aula')-&gt;count(),\n        'activos' =&gt; $grupos-&gt;where('estado', 'activo')-&gt;count(),\n        'cancelados' =&gt; $grupos-&gt;where('estado', 'cancelado')-&gt;count(),\n        'capacidad_total' =&gt; $grupos-&gt;sum('capacidad_maxima'),\n        'capacidad_utilizada' =&gt; $grupos-&gt;sum('estudiantes_inscritos'),\n        'ocupacion_promedio' =&gt; $grupos-&gt;avg('porcentaje_ocupacion') ?? 0\n    ];\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-create","title":"M\u00e9todo: create()","text":"<p>Muestra el formulario para crear un nuevo grupo.</p> <pre><code>public function create()\n{\n    $periodos = Periodo::whereIn('estado', ['configuracion', 'preregistros_activos', 'preregistros_cerrados'])-&gt;get();\n    $horarios = HorarioPeriodo::where('activo', true)-&gt;get();\n\n    $aulas = Aula::where('disponible', true)-&gt;get();\n    $profesores = Profesor::all();\n\n    $periodoActivo = Periodo::conPreRegistrosActivos()-&gt;first();\n\n    return view('coordinador.grupos.create', compact(\n        'periodos',\n        'horarios',\n        'aulas',\n        'profesores',\n        'periodoActivo'\n    ));\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-storerequest-request","title":"M\u00e9todo: store(Request $request)","text":"<p>Valida y almacena un nuevo grupo en el sistema con validaciones complejas.</p> <pre><code>public function store(Request $request)\n{\n    $request-&gt;validate([\n        'nivel_ingles' =&gt; 'required|integer|between:1,5',\n        'letra_grupo' =&gt; 'required|string|size:1|in:A,B,C,D,E,F',\n        'periodo_id' =&gt; 'required|exists:periodos,id',\n        'horario_periodo_id' =&gt; 'required|exists:horarios_periodo,id',\n        'aula_id' =&gt; 'nullable|exists:aulas,id',\n        'profesor_id' =&gt; 'nullable|exists:profesores,id_profesor',\n        'capacidad_maxima' =&gt; 'required|integer|min:15|max:40'\n    ]);\n\n    try {\n        // Verificar unicidad del grupo\n        $grupoExistente = Grupo::where('periodo_id', $request-&gt;periodo_id)\n            -&gt;where('nivel_ingles', $request-&gt;nivel_ingles)\n            -&gt;where('letra_grupo', $request-&gt;letra_grupo)\n            -&gt;first();\n\n        if ($grupoExistente) {\n            return back()-&gt;with('error', \n                \"Ya existe el grupo {$request-&gt;nivel_ingles}-{$request-&gt;letra_grupo} en este periodo.\"\n            )-&gt;withInput();\n        }\n\n        // Validaciones adicionales usando transacci\u00f3n\n        return DB::transaction(function () use ($request) {\n            // Crear instancia para validaciones\n            $grupo = new Grupo();\n            $grupo-&gt;fill($request-&gt;all());\n\n            // Validar aula si est\u00e1 asignada\n            if ($request-&gt;aula_id) {\n                $grupo-&gt;validarAsignacionAula($request-&gt;aula_id);\n            }\n\n            // Validar profesor si est\u00e1 asignado\n            if ($request-&gt;profesor_id) {\n                $grupo-&gt;validarAsignacionProfesor($request-&gt;profesor_id);\n            }\n\n            // Determinar estado autom\u00e1ticamente\n            $estado = $this-&gt;determinarEstadoInicial($request);\n\n            // Crear grupo\n            $grupo = Grupo::create([\n                'nivel_ingles' =&gt; $request-&gt;nivel_ingles,\n                'letra_grupo' =&gt; $request-&gt;letra_grupo,\n                'periodo_id' =&gt; $request-&gt;periodo_id,\n                'horario_periodo_id' =&gt; $request-&gt;horario_periodo_id,\n                'aula_id' =&gt; $request-&gt;aula_id,\n                'profesor_id' =&gt; $request-&gt;profesor_id,\n                'capacidad_maxima' =&gt; $request-&gt;capacidad_maxima,\n                'estado' =&gt; $estado,\n                'estudiantes_inscritos' =&gt; 0\n            ]);\n\n            return redirect()-&gt;route('coordinador.grupos.show', $grupo-&gt;id)\n                -&gt;with('success', \"Grupo {$grupo-&gt;nombre_completo} creado exitosamente.\");\n\n        });\n\n    } catch (\\Exception $e) {\n        return back()-&gt;with('error', 'Error al crear grupo: ' . $e-&gt;getMessage())-&gt;withInput();\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-showid","title":"M\u00e9todo: show($id)","text":"<p>Muestra los detalles completos de un grupo espec\u00edfico.</p> <pre><code>public function show($id)\n{\n    $grupo = Grupo::with([\n        'periodo',\n        'horario',\n        'aula',\n        'profesor',\n        'preregistros.usuario',\n        'estudiantesActivos.usuario'\n    ])-&gt;findOrFail($id);\n\n    // Estudiantes disponibles para asignar\n    $estudiantesDisponibles = Preregistro::with(['usuario', 'horarioPreferido'])\n        -&gt;where('periodo_id', $grupo-&gt;periodo_id)\n        -&gt;where('nivel_solicitado', $grupo-&gt;nivel_ingles)\n        -&gt;where('estado', 'pendiente')\n        -&gt;whereIn('pago_estado', ['pagado', 'prorroga'])\n        -&gt;get();\n\n    return view('coordinador.grupos.show', compact(\n        'grupo',\n        'estudiantesDisponibles'\n    ));\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-editid","title":"M\u00e9todo: edit($id)","text":"<p>Muestra el formulario para editar un grupo existente.</p> <pre><code>public function edit($id)\n{\n    $grupo = Grupo::findOrFail($id);\n    $periodos = Periodo::whereIn('estado', ['configuracion', 'preregistros_activos', 'preregistros_cerrados'])-&gt;get();\n    $horarios = HorarioPeriodo::where('activo', true)-&gt;get();\n\n    $aulas = Aula::where('disponible', true)-&gt;get();\n    $profesores = Profesor::all();\n\n    return view('coordinador.grupos.edit', compact(\n        'grupo',\n        'periodos',\n        'horarios',\n        'aulas',\n        'profesores'\n    ));\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-updaterequest-request-id","title":"M\u00e9todo: update(Request $request, $id)","text":"<p>Actualiza un grupo existente con validaciones de integridad.</p> <pre><code>public function update(Request $request, $id)\n{\n    $grupo = Grupo::findOrFail($id);\n\n    $request-&gt;validate([\n        'horario_periodo_id' =&gt; 'required|exists:horarios_periodo,id',\n        'aula_id' =&gt; 'nullable|exists:aulas,id',\n        'profesor_id' =&gt; 'nullable|exists:profesores,id_profesor',\n        'capacidad_maxima' =&gt; 'required|integer|min:15|max:40',\n    ]);\n\n    try {\n        // Verificar que la capacidad no sea menor a los estudiantes inscritos\n        if ($request-&gt;capacidad_maxima &lt; $grupo-&gt;estudiantes_inscritos) {\n            return back()-&gt;with('error', \n                \"La capacidad no puede ser menor a los estudiantes inscritos ({$grupo-&gt;estudiantes_inscritos}).\"\n            )-&gt;withInput();\n        }\n\n        // Validaciones adicionales usando transacci\u00f3n\n        return DB::transaction(function () use ($request, $grupo) {\n            // Validar aula si est\u00e1 asignada o cambi\u00f3\n            if ($request-&gt;aula_id &amp;&amp; $request-&gt;aula_id != $grupo-&gt;aula_id) {\n                $grupo-&gt;validarAsignacionAula($request-&gt;aula_id);\n            }\n\n            // Validar profesor si est\u00e1 asignado o cambi\u00f3  \n            if ($request-&gt;profesor_id &amp;&amp; $request-&gt;profesor_id != $grupo-&gt;profesor_id) {\n                $grupo-&gt;validarAsignacionProfesor($request-&gt;profesor_id);\n            }\n\n            // Determinar estado autom\u00e1ticamente\n            $estado = $this-&gt;determinarEstado($request, $grupo);\n\n            $grupo-&gt;update([\n                'horario_periodo_id' =&gt; $request-&gt;horario_periodo_id,\n                'aula_id' =&gt; $request-&gt;aula_id,\n                'profesor_id' =&gt; $request-&gt;profesor_id,\n                'capacidad_maxima' =&gt; $request-&gt;capacidad_maxima,\n                'estado' =&gt; $estado\n            ]);\n\n            return redirect()-&gt;route('coordinador.grupos.index')\n                -&gt;with('success', \"Grupo {$grupo-&gt;nombre_completo} actualizado exitosamente.\");\n        });\n\n    } catch (\\Exception $e) {\n        return back()-&gt;with('error', 'Error al actualizar grupo: ' . $e-&gt;getMessage())-&gt;withInput();\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodos-de-gestion-de-estado","title":"M\u00e9todos de Gesti\u00f3n de Estado","text":""},{"location":"sprints/sprint-3/coordinadorGrupoController/#determinarestadoinicialrequest-request","title":"determinarEstadoInicial(Request $request)","text":"<p>Determina el estado inicial al crear un grupo.</p> <pre><code>private function determinarEstadoInicial(Request $request)\n{\n    if ($request-&gt;profesor_id &amp;&amp; $request-&gt;aula_id) {\n        return 'activo';\n    } elseif ($request-&gt;profesor_id) {\n        return 'con_profesor';\n    } elseif ($request-&gt;aula_id) {\n        return 'con_aula';\n    } else {\n        return 'planificado';\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#determinarestadorequest-request-grupo-grupo","title":"determinarEstado(Request $request, Grupo $grupo)","text":"<p>Determina el estado autom\u00e1ticamente al actualizar, respetando estados finales.</p> <pre><code>private function determinarEstado(Request $request, Grupo $grupo)\n{\n    // Si el grupo ya estaba activo o cancelado, mantener ese estado\n    $estadosFinales = ['activo', 'cancelado'];\n\n    // Si ya est\u00e1 activo o cancelado, mantener ese estado\n    if (in_array($grupo-&gt;estado, $estadosFinales)) {\n        return $grupo-&gt;estado;\n    }\n\n    // Manejar valores nulos/vac\u00edos\n    $tieneProfesor = ($request-&gt;profesor_id !== null &amp;&amp; $request-&gt;profesor_id !== '');\n    $tieneAula = ($request-&gt;aula_id !== null &amp;&amp; $request-&gt;aula_id !== '');\n\n    // L\u00f3gica autom\u00e1tica de estados\n    if ($tieneProfesor &amp;&amp; $tieneAula) {\n        return 'activo';\n    } elseif ($tieneProfesor) {\n        return 'con_profesor';\n    } elseif ($tieneAula) {\n        return 'con_aula';\n    } else {\n        return 'planificado';\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodos-de-gestion-de-estudiantes","title":"M\u00e9todos de Gesti\u00f3n de Estudiantes","text":""},{"location":"sprints/sprint-3/coordinadorGrupoController/#asignarestudianterequest-request-id","title":"asignarEstudiante(Request $request, $id)","text":"<p>Asigna un estudiante a un grupo espec\u00edfico.</p> <pre><code>public function asignarEstudiante(Request $request, $id)\n{\n    $grupo = Grupo::findOrFail($id);\n\n    $request-&gt;validate([\n        'preregistro_id' =&gt; 'required|exists:preregistros,id'\n    ]);\n\n    try {\n        $preregistro = Preregistro::findOrFail($request-&gt;preregistro_id);\n\n        if (!$preregistro-&gt;puedeSerAsignado()) {\n            return back()-&gt;with('error', 'Este estudiante no puede ser asignado a un grupo.');\n        }\n\n        if (!$grupo-&gt;tieneCapacidad()) {\n            return back()-&gt;with('error', 'El grupo no tiene capacidad disponible.');\n        }\n\n        $grupo-&gt;asignarEstudiante($preregistro-&gt;id);\n\n        return back()-&gt;with('success', 'Estudiante asignado al grupo exitosamente.');\n\n    } catch (\\Exception $e) {\n        return back()-&gt;with('error', $e-&gt;getMessage());\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#removerestudianterequest-request-id","title":"removerEstudiante(Request $request, $id)","text":"<p>Remueve un estudiante de un grupo.</p> <pre><code>public function removerEstudiante(Request $request, $id)\n{\n    $grupo = Grupo::findOrFail($id);\n\n    $request-&gt;validate([\n        'preregistro_id' =&gt; 'required|exists:preregistros,id'\n    ]);\n\n    try {\n        $grupo-&gt;removerEstudiante($request-&gt;preregistro_id);\n\n        return back()-&gt;with('success', 'Estudiante removido del grupo exitosamente.');\n\n    } catch (\\Exception $e) {\n        return back()-&gt;with('error', $e-&gt;getMessage());\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#metodo-cambiarestadorequest-request-id","title":"M\u00e9todo: cambiarEstado(Request $request, $id)","text":"<p>Permite cambiar manualmente el estado de un grupo con validaciones.</p> <pre><code>public function cambiarEstado(Request $request, $id)\n{\n    $grupo = Grupo::findOrFail($id);\n\n    $request-&gt;validate([\n        'estado' =&gt; 'required|in:planificado,con_profesor,con_aula,activo,cancelado'\n    ]);\n\n    try {\n        // Validaciones espec\u00edficas por estado\n        if ($request-&gt;estado === 'activo' &amp;&amp; !$grupo-&gt;puedeSerActivo()) {\n            return back()-&gt;with('error', \n                'El grupo necesita profesor, aula y capacidad disponible para activarse.'\n            );\n        }\n\n        if ($request-&gt;estado === 'cancelado' &amp;&amp; !$grupo-&gt;puedeSerCancelado()) {\n            return back()-&gt;with('error', \n                'No se puede cancelar un grupo con estudiantes inscritos.'\n            );\n        }\n\n        $grupo-&gt;update(['estado' =&gt; $request-&gt;estado]);\n\n        return back()-&gt;with('success', 'Estado del grupo actualizado exitosamente.');\n\n    } catch (\\Exception $e) {\n        return back()-&gt;with('error', 'Error al cambiar estado: ' . $e-&gt;getMessage());\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#caracteristicas-de-seguridad-y-validaciones","title":"Caracter\u00edsticas de Seguridad y Validaciones","text":""},{"location":"sprints/sprint-3/coordinadorGrupoController/#validaciones-implementadas","title":"Validaciones Implementadas","text":"<ul> <li>Unicidad de grupo: Mismo nivel y letra en un periodo</li> <li>Capacidad m\u00ednima/m\u00e1xima: Entre 15 y 40 estudiantes</li> <li>Integridad de capacidad: No reducir capacidad por debajo de inscritos actuales</li> <li>Validaci\u00f3n de relaciones: Aula y profesor existen y est\u00e1n disponibles</li> <li>Estados v\u00e1lidos: Transiciones de estado controladas</li> </ul>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#manejo-de-transacciones","title":"Manejo de Transacciones","text":"<p>Uso de transacciones de base de datos para operaciones cr\u00edticas que involucran m\u00faltiples validaciones y actualizaciones.</p>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#estados-del-grupo","title":"Estados del Grupo","text":"<ol> <li>planificado: Grupo creado sin asignaciones</li> <li>con_profesor: Tiene profesor asignado</li> <li>con_aula: Tiene aula asignada  </li> <li>activo: Tiene profesor, aula y capacidad disponible</li> <li>cancelado: Grupo desactivado (no permite estudiantes)</li> </ol>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#flujos-de-trabajo-principales","title":"Flujos de Trabajo Principales","text":""},{"location":"sprints/sprint-3/coordinadorGrupoController/#creacion-de-grupo","title":"Creaci\u00f3n de Grupo","text":"<ol> <li>Validar datos del formulario</li> <li>Verificar unicidad del grupo</li> <li>Validar asignaciones de aula y profesor</li> <li>Determinar estado autom\u00e1ticamente</li> <li>Crear grupo con transacci\u00f3n</li> </ol>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#actualizacion-de-grupo","title":"Actualizaci\u00f3n de Grupo","text":"<ol> <li>Validar capacidad vs estudiantes inscritos</li> <li>Validar cambios en aula y profesor</li> <li>Recalcular estado autom\u00e1ticamente</li> <li>Actualizar con transacci\u00f3n</li> </ol>"},{"location":"sprints/sprint-3/coordinadorGrupoController/#gestion-de-estudiantes","title":"Gesti\u00f3n de Estudiantes","text":"<ol> <li>Verificar que el estudiante puede ser asignado</li> <li>Verificar capacidad del grupo</li> <li>Ejecutar asignaci\u00f3n/remoci\u00f3n</li> <li>Actualizar contadores</li> </ol> <p>Este controlador proporciona una gesti\u00f3n completa de grupos acad\u00e9micos con validaciones robustas que garantizan la integridad de los datos y previenen conflictos en las asignaciones.</p>"},{"location":"sprints/sprint-3/grupo/","title":"Documentaci\u00f3n del Modelo Grupo","text":""},{"location":"sprints/sprint-3/grupo/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Grupo</code> representa los grupos acad\u00e9micos en el sistema de gesti\u00f3n educativa. Gestiona la informaci\u00f3n de grupos de ingl\u00e9s, incluyendo su nivel, letra, periodo, horario, aula asignada, profesor y estudiantes inscritos. Implementa un sistema completo de estados y validaciones de negocio para garantizar la integridad de las asignaciones.</p>"},{"location":"sprints/sprint-3/grupo/#estructura-del-modelo","title":"Estructura del Modelo","text":""},{"location":"sprints/sprint-3/grupo/#namespace-y-definicion-de-clase","title":"Namespace y Definici\u00f3n de Clase","text":"<pre><code>namespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\nuse Illuminate\\Database\\Eloquent\\Builder;\n\nclass Grupo extends Model\n{\n    use HasFactory;\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#propiedades-del-modelo","title":"Propiedades del Modelo","text":""},{"location":"sprints/sprint-3/grupo/#atributos-mass-assignable","title":"Atributos Mass Assignable","text":"<pre><code>protected $fillable = [\n    'nivel_ingles',\n    'letra_grupo',\n    'periodo_id',\n    'horario_periodo_id',\n    'aula_id',\n    'profesor_id',\n    'capacidad_maxima',\n    'estudiantes_inscritos',\n    'estado'\n];\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#casts-de-atributos","title":"Casts de Atributos","text":"<pre><code>protected $casts = [\n    'nivel_ingles' =&gt; 'integer',\n    'capacidad_maxima' =&gt; 'integer',\n    'estudiantes_inscritos' =&gt; 'integer'\n];\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#constantes-del-sistema","title":"Constantes del Sistema","text":""},{"location":"sprints/sprint-3/grupo/#estados-del-grupo","title":"Estados del Grupo","text":"<pre><code>const ESTADOS = [\n    'planificado' =&gt; 'Planificado',\n    'con_profesor' =&gt; 'Con Profesor', \n    'con_aula' =&gt; 'Con Aula',\n    'activo' =&gt; 'Activo',\n    'cancelado' =&gt; 'Cancelado'\n];\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#niveles-de-ingles","title":"Niveles de Ingl\u00e9s","text":"<pre><code>const NIVELES = [\n    1 =&gt; 'Nivel 1',\n    2 =&gt; 'Nivel 2', \n    3 =&gt; 'Nivel 3',\n    4 =&gt; 'Nivel 4',\n    5 =&gt; 'Nivel 5'\n];\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#letras-de-grupo-disponibles","title":"Letras de Grupo Disponibles","text":"<pre><code>const LETRAS_GRUPO = ['A', 'B', 'C', 'D', 'E', 'F'];\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#relaciones","title":"Relaciones","text":""},{"location":"sprints/sprint-3/grupo/#relacion-con-periodo","title":"Relaci\u00f3n con Periodo","text":"<pre><code>public function periodo() \n{ \n    return $this-&gt;belongsTo(Periodo::class); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#relacion-con-horarioperiodo","title":"Relaci\u00f3n con HorarioPeriodo","text":"<pre><code>public function horario() \n{ \n    return $this-&gt;belongsTo(HorarioPeriodo::class, 'horario_periodo_id'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#relacion-con-aula","title":"Relaci\u00f3n con Aula","text":"<pre><code>public function aula() \n{ \n    return $this-&gt;belongsTo(Aula::class, 'aula_id'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#relacion-con-profesor","title":"Relaci\u00f3n con Profesor","text":"<pre><code>public function profesor() \n{ \n    return $this-&gt;belongsTo(Profesor::class, 'profesor_id', 'id_profesor');\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#relacion-con-preregistros","title":"Relaci\u00f3n con Preregistros","text":"<pre><code>public function preregistros() \n{ \n    return $this-&gt;hasMany(Preregistro::class, 'grupo_asignado_id'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#relacion-con-estudiantes-activos","title":"Relaci\u00f3n con Estudiantes Activos","text":"<pre><code>public function estudiantesActivos() \n{ \n    return $this-&gt;preregistros()-&gt;whereIn('estado', ['asignado', 'cursando']); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#scopes-de-consulta","title":"Scopes de Consulta","text":""},{"location":"sprints/sprint-3/grupo/#scope-de-grupos-activos","title":"Scope de Grupos Activos","text":"<pre><code>public function scopeActivos($query) \n{ \n    return $query-&gt;where('estado', 'activo'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#scope-de-grupos-planificados","title":"Scope de Grupos Planificados","text":"<pre><code>public function scopePlanificados($query) \n{ \n    return $query-&gt;where('estado', 'planificado'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#scope-por-nivel","title":"Scope por Nivel","text":"<pre><code>public function scopePorNivel($query, $nivel) \n{ \n    return $query-&gt;where('nivel_ingles', $nivel); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#scope-por-periodo","title":"Scope por Periodo","text":"<pre><code>public function scopePorPeriodo($query, $periodoId) \n{ \n    return $query-&gt;where('periodo_id', $periodoId); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#scope-con-capacidad-disponible","title":"Scope con Capacidad Disponible","text":"<pre><code>public function scopeConCapacidad($query) \n{ \n    return $query-&gt;whereRaw('estudiantes_inscritos &lt; capacidad_maxima'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#scope-de-grupos-solapados","title":"Scope de Grupos Solapados","text":"<pre><code>public function scopeSolapados($query, $horarioId, $aulaId = null, $profesorId = null)\n{\n    return $query-&gt;where('horario_periodo_id', $horarioId)\n        -&gt;where(function ($q) use ($aulaId, $profesorId) {\n            if ($aulaId) {\n                $q-&gt;where('aula_id', $aulaId);\n            }\n            if ($profesorId) {\n                $q-&gt;orWhere('profesor_id', $profesorId);\n            }\n        })\n        -&gt;whereNotIn('estado', ['cancelado']);\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#accessors-getters-computados","title":"Accessors (Getters Computados)","text":""},{"location":"sprints/sprint-3/grupo/#nombre-completo-del-grupo","title":"Nombre Completo del Grupo","text":"<pre><code>public function getNombreCompletoAttribute()\n{\n    return \"{$this-&gt;nivel_ingles}-{$this-&gt;letra_grupo}\";\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#nivel-formateado","title":"Nivel Formateado","text":"<pre><code>public function getNivelFormateadoAttribute()\n{\n    return self::NIVELES[$this-&gt;nivel_ingles] ?? \"Nivel {$this-&gt;nivel_ingles}\";\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#estado-formateado","title":"Estado Formateado","text":"<pre><code>public function getEstadoFormateadoAttribute()\n{\n    return self::ESTADOS[$this-&gt;estado] ?? $this-&gt;estado;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#capacidad-disponible","title":"Capacidad Disponible","text":"<pre><code>public function getCapacidadDisponibleAttribute()\n{\n    return $this-&gt;capacidad_maxima - $this-&gt;estudiantes_inscritos;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#porcentaje-de-ocupacion","title":"Porcentaje de Ocupaci\u00f3n","text":"<pre><code>public function getPorcentajeOcupacionAttribute()\n{\n    if ($this-&gt;capacidad_maxima === 0) return 0;\n    return round(($this-&gt;estudiantes_inscritos / $this-&gt;capacidad_maxima) * 100, 2);\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#clase-css-para-estado","title":"Clase CSS para Estado","text":"<pre><code>public function getClaseEstadoAttribute()\n{\n    return match($this-&gt;estado) {\n        'planificado' =&gt; 'bg-yellow-100 text-yellow-800',\n        'con_profesor' =&gt; 'bg-blue-100 text-blue-800', \n        'con_aula' =&gt; 'bg-purple-100 text-purple-800',\n        'activo' =&gt; 'bg-green-100 text-green-800',\n        'cancelado' =&gt; 'bg-red-100 text-red-800',\n        default =&gt; 'bg-gray-100 text-gray-800'\n    };\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#estado-legible","title":"Estado Legible","text":"<pre><code>public function getEstadoLegibleAttribute()\n{\n    return self::ESTADOS[$this-&gt;estado] ?? $this-&gt;estado;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#metodos-de-negocio","title":"M\u00e9todos de Negocio","text":""},{"location":"sprints/sprint-3/grupo/#verificar-capacidad-disponible","title":"Verificar Capacidad Disponible","text":"<pre><code>public function tieneCapacidad()\n{\n    return $this-&gt;estudiantes_inscritos &lt; $this-&gt;capacidad_maxima;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#verificar-si-puede-ser-activo","title":"Verificar si Puede ser Activo","text":"<pre><code>public function puedeSerActivo()\n{\n    return $this-&gt;profesor_id &amp;&amp; $this-&gt;aula_id &amp;&amp; $this-&gt;tieneCapacidad();\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#verificar-si-puede-ser-cancelado","title":"Verificar si Puede ser Cancelado","text":"<pre><code>public function puedeSerCancelado()\n{\n    return $this-&gt;estudiantes_inscritos === 0 &amp;&amp; $this-&gt;estado !== 'cancelado';\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#verificar-si-puede-ser-eliminado","title":"Verificar si Puede ser Eliminado","text":"<pre><code>public function puedeEliminarse()\n{\n    return $this-&gt;estudiantes_inscritos === 0 &amp;&amp; $this-&gt;estado === 'planificado';\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#verificar-capacidad-del-aula","title":"Verificar Capacidad del Aula","text":"<pre><code>public function aulaSoportaCapacidad()\n{\n    if (!$this-&gt;aula) return false;\n    return $this-&gt;aula-&gt;capacidad &gt;= $this-&gt;capacidad_maxima;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#verificar-conflictos-de-horario","title":"Verificar Conflictos de Horario","text":"<pre><code>public function tieneConflictosHorario()\n{\n    return self::solapados($this-&gt;horario_periodo_id, $this-&gt;aula_id, $this-&gt;profesor_id)\n        -&gt;where('id', '!=', $this-&gt;id)\n        -&gt;exists();\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#obtener-conflictos-detallados","title":"Obtener Conflictos Detallados","text":"<pre><code>public function obtenerConflictos()\n{\n    return self::solapados($this-&gt;horario_periodo_id, $this-&gt;aula_id, $this-&gt;profesor_id)\n        -&gt;where('id', '!=', $this-&gt;id)\n        -&gt;with(['periodo', 'horario', 'aula', 'profesor'])\n        -&gt;get();\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#metodos-de-gestion-de-estudiantes","title":"M\u00e9todos de Gesti\u00f3n de Estudiantes","text":""},{"location":"sprints/sprint-3/grupo/#asignar-estudiante-al-grupo","title":"Asignar Estudiante al Grupo","text":"<pre><code>public function asignarEstudiante($preregistroId)\n{\n    if (!$this-&gt;tieneCapacidad()) {\n        throw new \\Exception('El grupo no tiene capacidad disponible.');\n    }\n\n    $preregistro = Preregistro::find($preregistroId);\n    if (!$preregistro || !$preregistro-&gt;puedeSerAsignado()) {\n        throw new \\Exception('El estudiante no puede ser asignado a un grupo.');\n    }\n\n    // Verificar que el estudiante no est\u00e9 ya en un grupo activo\n    if ($preregistro-&gt;grupo_asignado_id &amp;&amp; $preregistro-&gt;grupo_asignado_id != $this-&gt;id) {\n        throw new \\Exception('El estudiante ya est\u00e1 asignado a otro grupo.');\n    }\n\n    \\DB::transaction(function () use ($preregistro) {\n        // Actualizar preregistro\n        $preregistro-&gt;update([\n            'grupo_asignado_id' =&gt; $this-&gt;id,\n            'estado' =&gt; 'asignado'\n        ]);\n\n        // Actualizar contador del grupo\n        $this-&gt;increment('estudiantes_inscritos');\n    });\n\n    return true;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#remover-estudiante-del-grupo","title":"Remover Estudiante del Grupo","text":"<pre><code>public function removerEstudiante($preregistroId)\n{\n    $preregistro = Preregistro::find($preregistroId);\n    if (!$preregistro || $preregistro-&gt;grupo_asignado_id !== $this-&gt;id) {\n        throw new \\Exception('El estudiante no est\u00e1 asignado a este grupo.');\n    }\n\n    \\DB::transaction(function () use ($preregistro) {\n        // Actualizar preregistro\n        $preregistro-&gt;update([\n            'grupo_asignado_id' =&gt; null,\n            'estado' =&gt; 'pendiente'\n        ]);\n\n        // Actualizar contador del grupo\n        if ($this-&gt;estudiantes_inscritos &gt; 0) {\n            $this-&gt;decrement('estudiantes_inscritos');\n        }\n    });\n\n    return true;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#metodos-de-validacion","title":"M\u00e9todos de Validaci\u00f3n","text":""},{"location":"sprints/sprint-3/grupo/#validar-asignacion-de-aula","title":"Validar Asignaci\u00f3n de Aula","text":"<pre><code>public function validarAsignacionAula($aulaId)\n{\n    $aula = Aula::find($aulaId);\n    if (!$aula) {\n        throw new \\Exception('El aula seleccionada no existe.');\n    }\n\n    // Verificar que el aula est\u00e9 disponible globalmente\n    if (!$aula-&gt;disponible) {\n        throw new \\Exception(\"El aula {$aula-&gt;nombre_completo} no est\u00e1 disponible.\");\n    }\n\n    // Verificar capacidad\n    if (!$aula-&gt;soportaCapacidad($this-&gt;capacidad_maxima)) {\n        throw new \\Exception(\"El aula {$aula-&gt;nombre_completo} tiene capacidad para {$aula-&gt;capacidad} estudiantes, pero el grupo requiere {$this-&gt;capacidad_maxima}.\");\n    }\n\n    // Verificar disponibilidad en horario (usando grupos existentes)\n    if (!$aula-&gt;estaDisponibleEnHorario($this-&gt;horario_periodo_id)) {\n        throw new \\Exception(\"El aula {$aula-&gt;nombre_completo} ya est\u00e1 ocupada en este horario.\");\n    }\n\n    return true;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#validar-asignacion-de-profesor","title":"Validar Asignaci\u00f3n de Profesor","text":"<pre><code>public function validarAsignacionProfesor($profesorId)\n{\n    $profesor = Profesor::find($profesorId);\n    if (!$profesor) {\n        throw new \\Exception('El profesor seleccionado no existe.');\n    }\n\n    // Verificar conflictos de horario (usando grupos existentes)\n    $conflictos = self::where('profesor_id', $profesorId)\n        -&gt;where('horario_periodo_id', $this-&gt;horario_periodo_id)\n        -&gt;where('id', '!=', $this-&gt;id)\n        -&gt;whereNotIn('estado', ['cancelado'])\n        -&gt;exists();\n\n    if ($conflictos) {\n        throw new \\Exception(\"El profesor {$profesor-&gt;nombre_profesor} ya tiene un grupo asignado en este horario.\");\n    }\n\n    return true;\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#metodos-estaticos","title":"M\u00e9todos Est\u00e1ticos","text":""},{"location":"sprints/sprint-3/grupo/#obtener-letras-disponibles","title":"Obtener Letras Disponibles","text":"<pre><code>public static function letrasDisponibles($nivel, $periodoId)\n{\n    $letrasOcupadas = self::where('nivel_ingles', $nivel)\n        -&gt;where('periodo_id', $periodoId)\n        -&gt;pluck('letra_grupo')\n        -&gt;toArray();\n\n    return array_diff(self::LETRAS_GRUPO, $letrasOcupadas);\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#hook-del-modelo","title":"Hook del Modelo","text":""},{"location":"sprints/sprint-3/grupo/#validaciones-automaticas-al-guardar","title":"Validaciones Autom\u00e1ticas al Guardar","text":"<pre><code>protected static function boot()\n{\n    parent::boot();\n\n    static::saving(function ($grupo) {\n        // Validar capacidad del aula si est\u00e1 asignada\n        if ($grupo-&gt;aula_id &amp;&amp; !$grupo-&gt;aulaSoportaCapacidad()) {\n            throw new \\Exception(\"El aula no tiene suficiente capacidad para el grupo.\");\n        }\n\n        // Validar conflictos de horario\n        if ($grupo-&gt;tieneConflictosHorario()) {\n            $conflictos = $grupo-&gt;obtenerConflictos();\n            $mensaje = \"Conflicto de horario detectado: \";\n\n            foreach ($conflictos as $conflicto) {\n                if ($conflicto-&gt;aula_id == $grupo-&gt;aula_id) {\n                    $mensaje .= \"Aula ocupada por grupo {$conflicto-&gt;nombre_completo}. \";\n                }\n                if ($conflicto-&gt;profesor_id == $grupo-&gt;profesor_id) {\n                    $mensaje .= \"Profesor asignado a grupo {$conflicto-&gt;nombre_completo}. \";\n                }\n            }\n\n            throw new \\Exception($mensaje);\n        }\n    });\n}\n</code></pre>"},{"location":"sprints/sprint-3/grupo/#caracteristicas-de-seguridad","title":"Caracter\u00edsticas de Seguridad","text":""},{"location":"sprints/sprint-3/grupo/#validaciones-implementadas","title":"Validaciones Implementadas","text":"<ul> <li>Capacidad del aula: Verifica que el aula pueda soportar la capacidad del grupo</li> <li>Conflictos de horario: Detecta solapamientos de aula y profesor</li> <li>Integridad de estudiantes: Previene asignaciones duplicadas</li> <li>Estados coherentes: Valida transiciones de estado</li> </ul>"},{"location":"sprints/sprint-3/grupo/#manejo-de-transacciones","title":"Manejo de Transacciones","text":"<ul> <li>Operaciones cr\u00edticas como asignaci\u00f3n/remoci\u00f3n de estudiantes usan transacciones</li> <li>Garantiza consistencia entre preregistros y contadores de grupo</li> </ul>"},{"location":"sprints/sprint-3/grupo/#validaciones-en-tiempo-real","title":"Validaciones en Tiempo Real","text":"<ul> <li>Hook <code>saving</code> valida autom\u00e1ticamente antes de guardar</li> <li>M\u00e9todos espec\u00edficos para validaciones de asignaci\u00f3n</li> </ul> <p>Este modelo proporciona una gesti\u00f3n completa de grupos acad\u00e9micos con validaciones robustas que garantizan la integridad de los datos y previenen conflictos en las asignaciones de estudiantes, aulas y profesores.</p>"},{"location":"sprints/sprint-3/periodo/","title":"Documentaci\u00f3n del Modelo Periodo","text":""},{"location":"sprints/sprint-3/periodo/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Periodo</code> representa los periodos acad\u00e9micos en el sistema de gesti\u00f3n educativa. Gestiona la informaci\u00f3n temporal de los ciclos escolares, incluyendo fechas de inicio y fin, estados del periodo, y todas las relaciones asociadas con horarios, grupos y preregistros.</p>"},{"location":"sprints/sprint-3/periodo/#estructura-del-modelo","title":"Estructura del Modelo","text":""},{"location":"sprints/sprint-3/periodo/#namespace-y-definicion-de-clase","title":"Namespace y Definici\u00f3n de Clase","text":"<pre><code>namespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Periodo extends Model\n{\n    use HasFactory;\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#propiedades-del-modelo","title":"Propiedades del Modelo","text":""},{"location":"sprints/sprint-3/periodo/#atributos-mass-assignable","title":"Atributos Mass Assignable","text":"<pre><code>protected $fillable = [\n    'nombre_periodo',\n    'fecha_inicio', \n    'fecha_fin',\n    'estado'\n];\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#casts-de-atributos","title":"Casts de Atributos","text":"<pre><code>protected $casts = [\n    'fecha_inicio' =&gt; 'date',\n    'fecha_fin' =&gt; 'date',\n];\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#constantes-del-sistema","title":"Constantes del Sistema","text":""},{"location":"sprints/sprint-3/periodo/#estados-del-periodo","title":"Estados del Periodo","text":"<pre><code>const ESTADOS = [\n    'configuracion' =&gt; 'En Configuraci\u00f3n',\n    'preregistros_activos' =&gt; 'Preregistros Abiertos',\n    'preregistros_cerrados' =&gt; 'Preregistros Cerrados',\n    'en_curso' =&gt; 'En Curso',\n    'finalizado' =&gt; 'Finalizado',\n    'cancelado' =&gt; 'Cancelado'\n];\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#relaciones","title":"Relaciones","text":""},{"location":"sprints/sprint-3/periodo/#relacion-con-horariosperiodo","title":"Relaci\u00f3n con HorariosPeriodo","text":"<pre><code>public function horariosPeriodo() \n{ \n    return $this-&gt;hasMany(HorarioPeriodo::class); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#relacion-con-horarios-base","title":"Relaci\u00f3n con Horarios Base","text":"<pre><code>public function horariosBase() \n{ \n    return $this-&gt;belongsToMany(Horario::class, 'horarios_periodo', 'periodo_id', 'horario_base_id')\n                -&gt;withPivot('activo')\n                -&gt;withTimestamps(); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#relacion-con-grupos","title":"Relaci\u00f3n con Grupos","text":"<pre><code>public function grupos() \n{ \n    return $this-&gt;hasMany(Grupo::class); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#relacion-con-preregistros","title":"Relaci\u00f3n con Preregistros","text":"<pre><code>public function preregistros() \n{ \n    return $this-&gt;hasMany(Preregistro::class); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#scopes-de-consulta","title":"Scopes de Consulta","text":""},{"location":"sprints/sprint-3/periodo/#scope-de-periodos-activos","title":"Scope de Periodos Activos","text":"<pre><code>public function scopeActivo($query) \n{ \n    return $query-&gt;where('estado', 'en_curso'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#scope-de-periodos-con-preregistros-activos","title":"Scope de Periodos con Preregistros Activos","text":"<pre><code>public function scopeConPreRegistrosActivos($query) \n{ \n    return $query-&gt;where('estado', 'preregistros_activos'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#scope-de-periodos-con-preregistros-cerrados","title":"Scope de Periodos con Preregistros Cerrados","text":"<pre><code>public function scopeConPreRegistrosCerrados($query) \n{ \n    return $query-&gt;where('estado', 'preregistros_cerrados'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#scope-de-periodos-finalizados","title":"Scope de Periodos Finalizados","text":"<pre><code>public function scopeFinalizados($query) \n{ \n    return $query-&gt;where('estado', 'finalizado'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#scope-de-periodos-cancelados","title":"Scope de Periodos Cancelados","text":"<pre><code>public function scopeCancelados($query) \n{ \n    return $query-&gt;where('estado', 'cancelado'); \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#metodos-de-estado","title":"M\u00e9todos de Estado","text":""},{"location":"sprints/sprint-3/periodo/#verificar-estado-de-configuracion","title":"Verificar Estado de Configuraci\u00f3n","text":"<pre><code>public function estaEnConfiguracion() \n{ \n    return $this-&gt;estado === 'configuracion'; \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-preregistros-abiertos","title":"Verificar Preregistros Abiertos","text":"<pre><code>public function preregistrosAbiertos() \n{ \n    return $this-&gt;estado === 'preregistros_activos'; \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-preregistros-cerrados","title":"Verificar Preregistros Cerrados","text":"<pre><code>public function preregistrosCerrados() \n{ \n    return $this-&gt;estado === 'preregistros_cerrados'; \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-estado-en-curso","title":"Verificar Estado en Curso","text":"<pre><code>public function estaEnCurso() \n{ \n    return $this-&gt;estado === 'en_curso'; \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-estado-finalizado","title":"Verificar Estado Finalizado","text":"<pre><code>public function estaFinalizado() \n{ \n    return $this-&gt;estado === 'finalizado'; \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-estado-cancelado","title":"Verificar Estado Cancelado","text":"<pre><code>public function estaCancelado() \n{ \n    return $this-&gt;estado === 'cancelado'; \n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#metodos-de-utilidad","title":"M\u00e9todos de Utilidad","text":""},{"location":"sprints/sprint-3/periodo/#calcular-dias-de-duracion","title":"Calcular D\u00edas de Duraci\u00f3n","text":"<pre><code>public function getDiasDuracionAttribute(): int\n{\n    return $this-&gt;fecha_inicio-&gt;diffInDays($this-&gt;fecha_fin);\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-si-puede-eliminarse","title":"Verificar si Puede Eliminarse","text":"<pre><code>public function puedeEliminarse()\n{\n    return $this-&gt;estaEnConfiguracion() &amp;&amp; \n        $this-&gt;grupos()-&gt;count() === 0 &amp;&amp;\n        $this-&gt;preregistros()-&gt;count() === 0;\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#validar-cambio-de-estado","title":"Validar Cambio de Estado","text":"<pre><code>public function puedeCambiarA($nuevoEstado)\n{\n    // Estados finales: no se puede cambiar desde ellos\n    if (in_array($this-&gt;estado, ['finalizado', 'cancelado'])) {\n        return false;\n    }\n\n    // Estados que no pueden ser destino desde cualquier estado\n    if (in_array($nuevoEstado, ['finalizado', 'cancelado'])) {\n        return true; // Permitir finalizar/cancelar desde cualquier estado activo\n    }\n\n    // Transiciones principales permitidas (con flexibilidad)\n    $transicionesPermitidas = [\n        'configuracion' =&gt; ['preregistros_activos', 'preregistros_cerrados', 'en_curso'],\n        'preregistros_activos' =&gt; ['configuracion', 'preregistros_cerrados', 'en_curso'],\n        'preregistros_cerrados' =&gt; ['preregistros_activos', 'en_curso', 'configuracion'],\n        'en_curso' =&gt; ['preregistros_cerrados', 'preregistros_activos', 'configuracion'],\n    ];\n\n    return in_array($nuevoEstado, $transicionesPermitidas[$this-&gt;estado] ?? []);\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#accessors-getters-computados","title":"Accessors (Getters Computados)","text":""},{"location":"sprints/sprint-3/periodo/#estado-legible","title":"Estado Legible","text":"<pre><code>public function getEstadoLegibleAttribute()\n{\n    return self::ESTADOS[$this-&gt;estado] ?? $this-&gt;estado;\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#metodos-de-validacion-de-negocio","title":"M\u00e9todos de Validaci\u00f3n de Negocio","text":""},{"location":"sprints/sprint-3/periodo/#verificar-si-acepta-preregistros","title":"Verificar si Acepta Preregistros","text":"<pre><code>public function aceptaPreRegistros()\n{\n    return $this-&gt;preregistrosAbiertos();\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-si-permite-gestion-de-horarios","title":"Verificar si Permite Gesti\u00f3n de Horarios","text":"<pre><code>public function permiteGestionHorarios()\n{\n    return !$this-&gt;estaFinalizado() &amp;&amp; !$this-&gt;estaCancelado();\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificar-si-permite-preregistros-de-estudiantes","title":"Verificar si Permite Preregistros de Estudiantes","text":"<pre><code>public function permitePreRegistrosEstudiantes()\n{\n    return $this-&gt;preregistrosAbiertos();\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#flujos-de-trabajo-y-validaciones","title":"Flujos de Trabajo y Validaciones","text":""},{"location":"sprints/sprint-3/periodo/#estados-del-periodo-y-sus-significados","title":"Estados del Periodo y sus Significados","text":"<p>configuracion: Periodo en preparaci\u00f3n, permite configuraci\u00f3n de horarios y grupos preregistros_activos: Periodo aceptando preregistros de estudiantes preregistros_cerrados: Preregistros cerrados, permite asignaci\u00f3n de estudiantes a grupos en_curso: Periodo activo con clases en desarrollo finalizado: Periodo completado, solo consulta cancelado: Periodo cancelado, no permite operaciones</p>"},{"location":"sprints/sprint-3/periodo/#validaciones-de-transicion-de-estados","title":"Validaciones de Transici\u00f3n de Estados","text":"<p>El m\u00e9todo <code>puedeCambiarA()</code> implementa las siguientes reglas:</p> <ul> <li>Estados finales (<code>finalizado</code>, <code>cancelado</code>) no permiten cambios</li> <li>Se puede finalizar o cancelar desde cualquier estado activo</li> <li>Transiciones flexibles entre estados de configuraci\u00f3n y preregistros</li> <li>No se permite retroceder desde estados avanzados a configuraci\u00f3n b\u00e1sica</li> </ul>"},{"location":"sprints/sprint-3/periodo/#restricciones-operativas","title":"Restricciones Operativas","text":"<p>Para Eliminaci\u00f3n: - Solo periodos en estado \"configuracion\" - Sin grupos asociados - Sin preregistros existentes</p> <p>Para Gesti\u00f3n de Horarios: - No permitido en estados \"finalizado\" o \"cancelado\"</p> <p>Para Preregistros de Estudiantes: - Solo permitido en estado \"preregistros_activos\"</p>"},{"location":"sprints/sprint-3/periodo/#ejemplos-de-uso","title":"Ejemplos de Uso","text":""},{"location":"sprints/sprint-3/periodo/#creacion-de-periodo","title":"Creaci\u00f3n de Periodo","text":"<pre><code>$periodo = Periodo::create([\n    'nombre_periodo' =&gt; 'Primavera 2024',\n    'fecha_inicio' =&gt; '2024-01-15',\n    'fecha_fin' =&gt; '2024-05-20',\n    'estado' =&gt; 'configuracion'\n]);\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#verificacion-de-estado","title":"Verificaci\u00f3n de Estado","text":"<pre><code>if ($periodo-&gt;preregistrosAbiertos()) {\n    // Permitir preregistro de estudiantes\n}\n\nif ($periodo-&gt;permiteGestionHorarios()) {\n    // Permitir gesti\u00f3n de horarios\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodo/#cambio-de-estado","title":"Cambio de Estado","text":"<pre><code>if ($periodo-&gt;puedeCambiarA('preregistros_activos')) {\n    $periodo-&gt;update(['estado' =&gt; 'preregistros_activos']);\n}\n</code></pre> <p>Este modelo proporciona una gesti\u00f3n completa de periodos acad\u00e9micos con validaciones robustas que garantizan la integridad de las transiciones de estado y previenen operaciones inv\u00e1lidas seg\u00fan el estado actual del periodo.</p>"},{"location":"sprints/sprint-3/periodoController/","title":"Documentaci\u00f3n del Controlador PeriodoController","text":""},{"location":"sprints/sprint-3/periodoController/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El controlador <code>PeriodoController</code> gestiona toda la l\u00f3gica relacionada con la administraci\u00f3n de periodos acad\u00e9micos en el sistema. Proporciona funcionalidades completas para crear, editar, visualizar y gestionar periodos, incluyendo la gesti\u00f3n de horarios, transiciones de estado y validaciones complejas de negocio.</p>"},{"location":"sprints/sprint-3/periodoController/#estructura-del-controlador","title":"Estructura del Controlador","text":""},{"location":"sprints/sprint-3/periodoController/#namespace-y-dependencias","title":"Namespace y Dependencias","text":"<pre><code>namespace App\\Http\\Controllers;\n\nuse App\\Models\\Periodo;\nuse App\\Models\\Horario;\nuse App\\Models\\HorarioPeriodo;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Log;\nuse Carbon\\Carbon;\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodos-principales","title":"M\u00e9todos Principales","text":""},{"location":"sprints/sprint-3/periodoController/#metodo-index","title":"M\u00e9todo: index()","text":"<p>Muestra la lista paginada de periodos con conteos estad\u00edsticos y filtros por estado.</p> <pre><code>public function index()\n{\n    $query = Periodo::withCount([\n        'grupos',\n        'preregistros',\n        'preregistros as preregistros_pagados_count' =&gt; function($query) {\n            $query-&gt;where('pago_estado', 'pagado');\n        },\n        'horariosPeriodo as horarios_activos_count' =&gt; function($query) {\n            $query-&gt;where('activo', true);\n        }\n    ])-&gt;orderBy('fecha_inicio', 'desc');\n\n    if (request('estado')) {\n        $query-&gt;where('estado', request('estado'));\n    }\n\n    $periodos = $query-&gt;paginate(10);\n\n    return view('coordinador.periodos.index', compact('periodos'));\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-create","title":"M\u00e9todo: create()","text":"<p>Muestra el formulario para crear un nuevo periodo.</p> <pre><code>public function create()\n{\n    return view('coordinador.periodos.create');\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-storerequest-request","title":"M\u00e9todo: store(Request $request)","text":"<p>Valida y almacena un nuevo periodo en el sistema.</p> <pre><code>public function store(Request $request)\n{\n    $request-&gt;validate([\n        'nombre_periodo' =&gt; 'required|string|max:50|unique:periodos,nombre_periodo',\n        'fecha_inicio' =&gt; 'required|date|after:today',\n        'fecha_fin' =&gt; 'required|date|after:fecha_inicio',\n    ]);\n\n    try {\n        DB::beginTransaction();\n\n        $periodo = Periodo::create([\n            'nombre_periodo' =&gt; $request-&gt;nombre_periodo,\n            'fecha_inicio' =&gt; $request-&gt;fecha_inicio,\n            'fecha_fin' =&gt; $request-&gt;fecha_fin,\n            'estado' =&gt; 'configuracion'\n        ]);\n\n        DB::commit();\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', 'Per\u00edodo creado exitosamente. Ahora puedes agregar horarios desde plantillas.');\n\n    } catch (\\Exception $e) {\n        DB::rollBack();\n\n        Log::error('Error creando per\u00edodo: ' . $e-&gt;getMessage(), [\n            'request_data' =&gt; $request-&gt;all(),\n            'error_trace' =&gt; $e-&gt;getTraceAsString()\n        ]);\n\n        return redirect()-&gt;back()\n            -&gt;with('error', 'Error al crear el per\u00edodo: ' . $e-&gt;getMessage())\n            -&gt;withInput();\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-showperiodo-periodo","title":"M\u00e9todo: show(Periodo $periodo)","text":"<p>Muestra los detalles completos de un periodo espec\u00edfico.</p> <pre><code>public function show(Periodo $periodo)\n{\n    $horariosPeriodo = $periodo-&gt;horariosPeriodo()\n                            -&gt;with('horarioBase')\n                            -&gt;orderBy('tipo')\n                            -&gt;orderBy('hora_inicio')\n                            -&gt;get();\n\n    $estadisticas = $this-&gt;obtenerEstadisticasDetalladas($periodo-&gt;id);\n\n    $horariosBaseDisponibles = Horario::where('activo', true)\n        -&gt;whereNotIn('id', function($query) use ($periodo) {\n            $query-&gt;select('horario_base_id')\n                  -&gt;from('horarios_periodo')\n                  -&gt;where('periodo_id', $periodo-&gt;id);\n        })\n        -&gt;get();\n\n    return view('coordinador.periodos.show', compact(\n        'periodo', \n        'horariosPeriodo', \n        'estadisticas',\n        'horariosBaseDisponibles'\n    ));\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-editperiodo-periodo","title":"M\u00e9todo: edit(Periodo $periodo)","text":"<p>Muestra el formulario para editar un periodo existente.</p> <pre><code>public function edit(Periodo $periodo)\n{\n    if (!$periodo-&gt;estaEnConfiguracion()) {\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('warning', 'Solo se pueden editar periodos en estado \"Configuraci\u00f3n\"');\n    }\n\n    return view('coordinador.periodos.edit', compact('periodo'));\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-updaterequest-request-periodo-periodo","title":"M\u00e9todo: update(Request $request, Periodo $periodo)","text":"<p>Actualiza un periodo existente con validaciones de estado.</p> <pre><code>public function update(Request $request, Periodo $periodo)\n{\n    if (!$periodo-&gt;estaEnConfiguracion()) {\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('warning', 'Solo se pueden editar periodos en estado \"Configuraci\u00f3n\"');\n    }\n\n    $request-&gt;validate([\n        'fecha_inicio' =&gt; 'required|date',\n        'fecha_fin' =&gt; 'required|date|after:fecha_inicio',\n    ]);\n\n    try {\n        $periodo-&gt;update([\n            'fecha_inicio' =&gt; $request-&gt;fecha_inicio,\n            'fecha_fin' =&gt; $request-&gt;fecha_fin,\n        ]);\n\n        Log::info('Periodo actualizado (solo fechas)', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'fecha_inicio' =&gt; $periodo-&gt;fecha_inicio,\n            'fecha_fin' =&gt; $periodo-&gt;fecha_fin\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', 'Fechas del periodo actualizadas exitosamente.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error actualizando periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al actualizar el periodo.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-destroyperiodo-periodo","title":"M\u00e9todo: destroy(Periodo $periodo)","text":"<p>Elimina un periodo del sistema con validaciones estrictas.</p> <pre><code>public function destroy(Periodo $periodo)\n{\n    if (!$periodo-&gt;estaEnConfiguracion()) {\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('warning', 'Solo se pueden eliminar periodos en estado \"Configuraci\u00f3n\"');\n    }\n\n    if (!$periodo-&gt;puedeEliminarse()) {\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('warning', 'No se puede eliminar el periodo porque tiene grupos o pre-registros asociados.');\n    }\n\n    try {\n        $nombrePeriodo = $periodo-&gt;nombre_periodo;\n        $periodo-&gt;delete();\n\n        Log::info('Periodo eliminado', ['periodo_nombre' =&gt; $nombrePeriodo]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', \"Periodo \\\"{$nombrePeriodo}\\\" eliminado exitosamente.\");\n\n    } catch (\\Exception $e) {\n        Log::error('Error eliminando periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al eliminar el periodo.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodos-de-gestion-de-horarios","title":"M\u00e9todos de Gesti\u00f3n de Horarios","text":""},{"location":"sprints/sprint-3/periodoController/#metodo-agregarhorariosrequest-request-periodo-periodo","title":"M\u00e9todo: agregarHorarios(Request $request, Periodo $periodo)","text":"<p>Agrega horarios base a un periodo espec\u00edfico.</p> <pre><code>public function agregarHorarios(Request $request, Periodo $periodo)\n{\n    if ($periodo-&gt;estaFinalizado() || $periodo-&gt;estaCancelado()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden agregar horarios en periodos finalizados o cancelados');\n    }\n\n    $request-&gt;validate([\n        'horarios_base_ids' =&gt; 'required|array|min:1',\n        'horarios_base_ids.*' =&gt; 'exists:horarios,id'\n    ]);\n\n    try {\n        DB::transaction(function () use ($periodo, $request) {\n            foreach ($request-&gt;horarios_base_ids as $horarioBaseId) {\n                if (!$periodo-&gt;horariosPeriodo()-&gt;where('horario_base_id', $horarioBaseId)-&gt;exists()) {\n                    $horarioBase = Horario::find($horarioBaseId);\n\n                    HorarioPeriodo::create([\n                        'periodo_id' =&gt; $periodo-&gt;id,\n                        'horario_base_id' =&gt; $horarioBaseId,\n                        'nombre' =&gt; $this-&gt;generarNombreHorarioPeriodo($horarioBase, $periodo),\n                        'tipo' =&gt; $horarioBase-&gt;tipo,\n                        'dias' =&gt; $horarioBase-&gt;dias,\n                        'hora_inicio' =&gt; $horarioBase-&gt;hora_inicio,\n                        'hora_fin' =&gt; $horarioBase-&gt;hora_fin,\n                        'activo' =&gt; true\n                    ]);\n                }\n            }\n        });\n\n        Log::info('Horarios agregados a periodo', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_actual' =&gt; $periodo-&gt;estado,\n            'horarios_count' =&gt; count($request-&gt;horarios_base_ids)\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', 'Horarios agregados exitosamente al periodo.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error agregando horarios: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al agregar horarios: ' . $e-&gt;getMessage());\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-eliminarhorarioperiodoperiodo-periodo-horarioperiodo-horarioperiodo","title":"M\u00e9todo: eliminarHorarioPeriodo(Periodo $periodo, HorarioPeriodo $horarioPeriodo)","text":"<p>Elimina un horario espec\u00edfico de un periodo.</p> <pre><code>public function eliminarHorarioPeriodo(Periodo $periodo, HorarioPeriodo $horarioPeriodo)\n{\n    if ($periodo-&gt;estaFinalizado() || $periodo-&gt;estaCancelado()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden eliminar horarios en periodos finalizados o cancelados');\n    }\n\n    if ($horarioPeriodo-&gt;periodo_id !== $periodo-&gt;id) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'El horario no pertenece a este periodo.');\n    }\n\n    if ($horarioPeriodo-&gt;grupos()-&gt;exists()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se puede eliminar el horario porque tiene grupos asignados.');\n    }\n\n    try {\n        $nombreHorario = $horarioPeriodo-&gt;nombre;\n        $horarioPeriodo-&gt;delete();\n\n        Log::info('Horario periodo eliminado', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_actual' =&gt; $periodo-&gt;estado,\n            'horario_periodo_id' =&gt; $horarioPeriodo-&gt;id,\n            'nombre' =&gt; $nombreHorario\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', \"Horario \\\"{$nombreHorario}\\\" eliminado del periodo.\");\n\n    } catch (\\Exception $e) {\n        Log::error('Error eliminando horario periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al eliminar el horario.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-togglehorarioperiodoperiodo-periodo-horarioperiodo-horarioperiodo","title":"M\u00e9todo: toggleHorarioPeriodo(Periodo $periodo, HorarioPeriodo $horarioPeriodo)","text":"<p>Activa o desactiva un horario en un periodo.</p> <pre><code>public function toggleHorarioPeriodo(Periodo $periodo, HorarioPeriodo $horarioPeriodo)\n{\n    if ($periodo-&gt;estaFinalizado() || $periodo-&gt;estaCancelado()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden modificar horarios en periodos finalizados o cancelados');\n    }\n\n    if ($horarioPeriodo-&gt;periodo_id !== $periodo-&gt;id) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'El horario no pertenece a este periodo.');\n    }\n\n    try {\n        $nuevoEstado = !$horarioPeriodo-&gt;activo;\n        $horarioPeriodo-&gt;update(['activo' =&gt; $nuevoEstado]);\n\n        $estadoTexto = $nuevoEstado ? 'activado' : 'desactivado';\n\n        Log::info('Horario periodo toggled', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_actual' =&gt; $periodo-&gt;estado,\n            'horario_periodo_id' =&gt; $horarioPeriodo-&gt;id,\n            'nuevo_estado' =&gt; $estadoTexto\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', \"Horario {$estadoTexto} correctamente.\");\n\n    } catch (\\Exception $e) {\n        Log::error('Error cambiando estado horario periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al cambiar estado del horario.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodos-de-gestion-de-estado","title":"M\u00e9todos de Gesti\u00f3n de Estado","text":""},{"location":"sprints/sprint-3/periodoController/#metodo-activarpreregistrosperiodo-periodo","title":"M\u00e9todo: activarPreregistros(Periodo $periodo)","text":"<p>Activa los preregistros para un periodo con validaciones completas.</p> <pre><code>public function activarPreregistros(Periodo $periodo)\n{\n    if (!$periodo-&gt;puedeCambiarA('preregistros_activos')) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede activar preregistros desde '{$periodo-&gt;estado_legible}'\"\n        );\n    }\n\n    if ($periodo-&gt;horariosPeriodo()-&gt;where('activo', true)-&gt;count() === 0) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden activar preregistros: Debe tener al menos un horario activo en el per\u00edodo.');\n    }\n\n    if (!\\App\\Models\\Aula::where('disponible', true)-&gt;exists()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden activar preregistros: Debe crear aulas disponibles en el sistema.');\n    }\n\n    if (!\\App\\Models\\Profesor::exists()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden activar preregistros: Debe tener profesores registrados en el sistema.');\n    }\n\n    try {\n        $periodo-&gt;update(['estado' =&gt; 'preregistros_activos']);\n\n        Log::info('Pre-registros activados', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_anterior' =&gt; $periodo-&gt;getOriginal('estado'),\n            'horarios_activos' =&gt; $periodo-&gt;horariosPeriodo()-&gt;where('activo', true)-&gt;count(),\n            'aulas_disponibles' =&gt; \\App\\Models\\Aula::where('disponible', true)-&gt;count(),\n            'total_profesores' =&gt; \\App\\Models\\Profesor::count()\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', 'Pre-registros activados. Los estudiantes ya pueden registrarse.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error activando pre-registros: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al activar pre-registros.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-cerrarpreregistrosperiodo-periodo","title":"M\u00e9todo: cerrarPreregistros(Periodo $periodo)","text":"<p>Cierra los preregistros de un periodo.</p> <pre><code>public function cerrarPreregistros(Periodo $periodo)\n{\n    if (!$periodo-&gt;puedeCambiarA('preregistros_cerrados')) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede cerrar preregistros desde '{$periodo-&gt;estado_legible}'\"\n        );\n    }\n\n    if ($periodo-&gt;preregistros()-&gt;count() === 0) {\n        return redirect()-&gt;back()\n            -&gt;with('warning', '\u00bfEst\u00e1 seguro? El per\u00edodo no tiene preregistros. \u00bfDesea continuar?')\n            -&gt;with('confirmar_cierre', true);\n    }\n\n    try {\n        $periodo-&gt;update(['estado' =&gt; 'preregistros_cerrados']);\n\n        Log::info('Pre-registros cerrados', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_anterior' =&gt; $periodo-&gt;getOriginal('estado'),\n            'total_preregistros' =&gt; $periodo-&gt;preregistros()-&gt;count()\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', 'Pre-registros cerrados. Se proceder\u00e1 con la asignaci\u00f3n de grupos.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error cerrando pre-registros: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al cerrar pre-registros.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-iniciarperiodoperiodo-periodo","title":"M\u00e9todo: iniciarPeriodo(Periodo $periodo)","text":"<p>Inicia un periodo acad\u00e9mico con automatizaci\u00f3n de estados.</p> <pre><code>public function iniciarPeriodo(Periodo $periodo)\n{\n    if (!$periodo-&gt;puedeCambiarA('en_curso')) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede iniciar periodo desde '{$periodo-&gt;estado_legible}'\"\n        );\n    }\n\n    try {\n        DB::transaction(function () use ($periodo) {\n            $estadoAnterior = $periodo-&gt;estado;\n            $periodo-&gt;update(['estado' =&gt; 'en_curso']);\n\n            $preregistrosActualizados = $periodo-&gt;preregistros()\n                -&gt;where('estado', 'asignado')\n                -&gt;whereNotNull('grupo_asignado_id')\n                -&gt;update(['estado' =&gt; 'cursando']);\n\n            $gruposActualizados = $periodo-&gt;grupos()\n                -&gt;where('estado', 'activo')\n                -&gt;update(['estado' =&gt; 'en_curso']);\n\n            Log::info('Periodo iniciado con automatizaci\u00f3n', [\n                'periodo_id' =&gt; $periodo-&gt;id,\n                'estado_anterior' =&gt; $estadoAnterior,\n                'preregistros_actualizados' =&gt; $preregistrosActualizados,\n                'grupos_actualizados' =&gt; $gruposActualizados\n            ]);\n        });\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', 'Periodo iniciado exitosamente. Los estudiantes asignados ahora est\u00e1n en curso.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error iniciando periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al iniciar periodo.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-finalizarperiodoperiodo-periodo","title":"M\u00e9todo: finalizarPeriodo(Periodo $periodo)","text":"<p>Finaliza un periodo acad\u00e9mico.</p> <pre><code>public function finalizarPeriodo(Periodo $periodo)\n{\n    if (!$periodo-&gt;puedeCambiarA('finalizado')) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede finalizar periodo desde '{$periodo-&gt;estado_legible}'\"\n        );\n    }\n\n    try {\n        DB::transaction(function () use ($periodo) {\n            $estadoAnterior = $periodo-&gt;estado;\n            $periodo-&gt;update(['estado' =&gt; 'finalizado']);\n\n            if ($estadoAnterior === 'en_curso') {\n                $periodo-&gt;grupos()-&gt;where('estado', 'en_curso')-&gt;update(['estado' =&gt; 'finalizado']);\n                $periodo-&gt;preregistros()-&gt;where('estado', 'cursando')-&gt;update(['estado' =&gt; 'finalizado']);\n            }\n        });\n\n        Log::info('Periodo finalizado', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_anterior' =&gt; $periodo-&gt;getOriginal('estado')\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', 'Periodo finalizado exitosamente.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error finalizando periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al finalizar periodo.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-cancelarperiodoperiodo-periodo","title":"M\u00e9todo: cancelarPeriodo(Periodo $periodo)","text":"<p>Cancela un periodo acad\u00e9mico.</p> <pre><code>public function cancelarPeriodo(Periodo $periodo)\n{\n    if (!$periodo-&gt;puedeCambiarA('cancelado')) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede cancelar periodo desde '{$periodo-&gt;estado_legible}'\"\n        );\n    }\n\n    try {\n        DB::transaction(function () use ($periodo) {\n            $estadoAnterior = $periodo-&gt;estado;\n            $periodo-&gt;update(['estado' =&gt; 'cancelado']);\n\n            if (in_array($estadoAnterior, ['en_curso', 'preregistros_abiertos', 'preregistros_cerrados'])) {\n                $periodo-&gt;grupos()-&gt;update(['estado' =&gt; 'cancelado']);\n                $periodo-&gt;preregistros()\n                    -&gt;whereIn('estado', ['asignado', 'cursando'])\n                    -&gt;update([\n                        'estado' =&gt; 'pendiente',\n                        'grupo_asignado_id' =&gt; null\n                    ]);\n            }\n        });\n\n        Log::info('Periodo cancelado', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_anterior' =&gt; $periodo-&gt;getOriginal('estado')\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', 'Periodo cancelado exitosamente.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error cancelando periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al cancelar periodo.');\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodo-cambiarestadorequest-request-periodo-periodo","title":"M\u00e9todo: cambiarEstado(Request $request, Periodo $periodo)","text":"<p>M\u00e9todo gen\u00e9rico para cambiar el estado de un periodo con validaciones completas.</p> <pre><code>public function cambiarEstado(Request $request, Periodo $periodo)\n{\n    $request-&gt;validate([\n        'nuevo_estado' =&gt; 'required|in:configuracion,preregistros_activos,preregistros_cerrados,en_curso,finalizado,cancelado'\n    ]);\n\n    $nuevoEstado = $request-&gt;nuevo_estado;\n\n    if (!$periodo-&gt;puedeCambiarA($nuevoEstado)) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede cambiar de '{$periodo-&gt;estado_legible}' a '\" . \n            ($periodo::ESTADOS[$nuevoEstado] ?? $nuevoEstado) . \"'\"\n        );\n    }\n\n    if ($nuevoEstado === 'preregistros_activos') {\n        if ($periodo-&gt;horariosPeriodo()-&gt;where('activo', true)-&gt;count() === 0) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'No se pueden activar preregistros: Debe tener al menos un horario activo en el per\u00edodo.');\n        }\n\n        if (!\\App\\Models\\Aula::where('disponible', true)-&gt;exists()) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'No se pueden activar preregistros: Debe crear aulas disponibles en el sistema.');\n        }\n\n        if (!\\App\\Models\\Profesor::exists()) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'No se pueden activar preregistros: Debe tener profesores registrados en el sistema.');\n        }\n    }\n\n    try {\n        DB::transaction(function () use ($periodo, $nuevoEstado) {\n            $estadoActual = $periodo-&gt;estado;\n\n            switch ($nuevoEstado) {\n                case 'en_curso':\n                    $periodo-&gt;preregistros()\n                        -&gt;where('estado', 'asignado')\n                        -&gt;whereNotNull('grupo_asignado_id')\n                        -&gt;update(['estado' =&gt; 'cursando']);\n\n                    $periodo-&gt;grupos()\n                        -&gt;where('estado', 'activo')\n                        -&gt;update(['estado' =&gt; 'en_curso']);\n                    break;\n\n                case 'finalizado':\n                    if ($estadoActual === 'en_curso') {\n                        $periodo-&gt;grupos()-&gt;where('estado', 'en_curso')-&gt;update(['estado' =&gt; 'finalizado']);\n                        $periodo-&gt;preregistros()-&gt;where('estado', 'cursando')-&gt;update(['estado' =&gt; 'finalizado']);\n                    }\n                    break;\n\n                case 'cancelado':\n                    $periodo-&gt;grupos()-&gt;update(['estado' =&gt; 'cancelado']);\n                    $periodo-&gt;preregistros()\n                        -&gt;whereIn('estado', ['asignado', 'cursando'])\n                        -&gt;update([\n                            'estado' =&gt; 'pendiente',\n                            'grupo_asignado_id' =&gt; null\n                        ]);\n                    break;\n            }\n\n            $periodo-&gt;update(['estado' =&gt; $nuevoEstado]);\n        });\n\n        Log::info(\"Estado cambiado\", [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_anterior' =&gt; $periodo-&gt;getOriginal('estado'),\n            'nuevo_estado' =&gt; $nuevoEstado\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', \"Estado actualizado: \" . $periodo-&gt;estado_legible);\n\n    } catch (\\Exception $e) {\n        Log::error('Error cambiando estado: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al cambiar estado: ' . $e-&gt;getMessage());\n    }\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#metodos-privados","title":"M\u00e9todos Privados","text":""},{"location":"sprints/sprint-3/periodoController/#generarnombrehorarioperiodohorario-horario-periodo-periodo","title":"generarNombreHorarioPeriodo(Horario $horario, Periodo $periodo)","text":"<p>Genera un nombre \u00fanico para el horario del periodo.</p> <pre><code>private function generarNombreHorarioPeriodo(Horario $horario, Periodo $periodo)\n{\n    $base = str_replace('Plantilla', '', $horario-&gt;nombre);\n    $base = trim($base);\n\n    return \"{$base} - {$periodo-&gt;nombre_periodo}\";\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#obtenerestadisticasdetalladasperiodoid","title":"obtenerEstadisticasDetalladas($periodoId)","text":"<p>Calcula estad\u00edsticas detalladas para un periodo espec\u00edfico.</p> <pre><code>private function obtenerEstadisticasDetalladas($periodoId)\n{\n    return [\n        'total_grupos' =&gt; DB::table('grupos')-&gt;where('periodo_id', $periodoId)-&gt;count(),\n        'grupos_activos' =&gt; DB::table('grupos')-&gt;where('periodo_id', $periodoId)-&gt;where('estado', 'activo')-&gt;count(),\n        'total_preregistros' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;count(),\n        'preregistros_pagados' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;where('pago_estado', 'pagado')-&gt;count(),\n        'preregistros_con_prorroga' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;where('pago_estado', 'prorroga')-&gt;count(),\n        'estudiantes_activos' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;where('estado', 'cursando')-&gt;count(),\n        'horarios_activos' =&gt; DB::table('horarios_periodo')-&gt;where('periodo_id', $periodoId)-&gt;where('activo', true)-&gt;count(),\n    ];\n}\n</code></pre>"},{"location":"sprints/sprint-3/periodoController/#caracteristicas-de-seguridad-y-validaciones","title":"Caracter\u00edsticas de Seguridad y Validaciones","text":""},{"location":"sprints/sprint-3/periodoController/#validaciones-implementadas","title":"Validaciones Implementadas","text":"<ul> <li>Estado coherente: Solo permite operaciones en estados v\u00e1lidos</li> <li>Dependencias del sistema: Verifica horarios, aulas y profesores antes de activar preregistros</li> <li>Integridad referencial: Previene eliminaci\u00f3n de horarios con grupos asignados</li> <li>Transiciones de estado: Valida cambios de estado seg\u00fan reglas de negocio</li> </ul>"},{"location":"sprints/sprint-3/periodoController/#manejo-de-transacciones","title":"Manejo de Transacciones","text":"<ul> <li>Operaciones cr\u00edticas usan transacciones de base de datos</li> <li>Garantiza consistencia en cambios de estado y actualizaciones masivas</li> </ul>"},{"location":"sprints/sprint-3/periodoController/#logging-y-auditoria","title":"Logging y Auditor\u00eda","text":"<ul> <li>Registro detallado de todas las operaciones importantes</li> <li>Informaci\u00f3n contextual para debugging y auditor\u00eda</li> </ul> <p>Este controlador proporciona una gesti\u00f3n completa de periodos acad\u00e9micos con validaciones robustas que garantizan la integridad del sistema y previenen operaciones inv\u00e1lidas seg\u00fan el estado actual del periodo.</p>"},{"location":"sprints/sprint-3/preregistroController/","title":"Documentaci\u00f3n del Controlador PreregistroController","text":""},{"location":"sprints/sprint-3/preregistroController/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El controlador <code>PreregistroController</code> gestiona toda la l\u00f3gica relacionada con los preregistros de estudiantes en el sistema. Proporciona funcionalidades para que los alumnos realicen preregistros en periodos activos, consulten sus preregistros existentes y visualicen el estado de sus solicitudes.</p>"},{"location":"sprints/sprint-3/preregistroController/#estructura-del-controlador","title":"Estructura del Controlador","text":""},{"location":"sprints/sprint-3/preregistroController/#namespace-y-dependencias","title":"Namespace y Dependencias","text":"<pre><code>namespace App\\Http\\Controllers;\n\nuse App\\Models\\Preregistro;\nuse App\\Models\\Periodo;\nuse App\\Models\\HorarioPeriodo;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\n</code></pre>"},{"location":"sprints/sprint-3/preregistroController/#metodos-principales","title":"M\u00e9todos Principales","text":""},{"location":"sprints/sprint-3/preregistroController/#metodo-create","title":"M\u00e9todo: create()","text":"<p>Muestra el formulario para que el estudiante realice un nuevo preregistro.</p> <pre><code>public function create()\n{\n    // Obtener periodo activo para preregistros\n    $periodoActivo = Periodo::conPreRegistrosActivos()-&gt;first();\n\n    if (!$periodoActivo) {\n        return redirect()-&gt;route('alumno.dashboard')\n            -&gt;with('error', 'No hay un periodo activo para preregistro en este momento.');\n    }\n\n    // Obtener horarios del periodo activo \n    $horarios = HorarioPeriodo::where('periodo_id', $periodoActivo-&gt;id)\n        -&gt;where('activo', true)\n        -&gt;with('horarioBase')\n        -&gt;get();\n\n    // Verificar si ya tiene preregistro activo\n    $preregistroExistente = Preregistro::where('usuario_id', Auth::id())\n        -&gt;where('periodo_id', $periodoActivo-&gt;id)\n        -&gt;whereIn('estado', ['pendiente', 'asignado', 'cursando'])\n        -&gt;first();\n\n    if ($preregistroExistente) {\n        return redirect()-&gt;route('alumno.dashboard')\n            -&gt;with('info', 'Ya tienes un preregistro activo para este periodo.');\n    }\n\n    return view('alumno.preregistro.create', compact('periodoActivo', 'horarios'));\n}\n</code></pre> <p>Funcionalidades del m\u00e9todo: - Verifica la existencia de un periodo activo para preregistros - Obtiene los horarios disponibles del periodo activo - Valida que el estudiante no tenga un preregistro activo en el mismo periodo - Retorna la vista del formulario de preregistro</p>"},{"location":"sprints/sprint-3/preregistroController/#metodo-storerequest-request","title":"M\u00e9todo: store(Request $request)","text":"<p>Procesa y almacena un nuevo preregistro realizado por el estudiante.</p> <pre><code>public function store(Request $request)\n{\n    // Obtener periodo activo para preregistros\n    $periodoActivo = Periodo::conPreRegistrosActivos()-&gt;first();\n\n    if (!$periodoActivo) {\n        return back()-&gt;with('error', 'No hay un periodo activo para preregistro.');\n    }\n\n    // Validar que no tenga preregistro activo\n    $preregistroExistente = Preregistro::where('usuario_id', Auth::id())\n        -&gt;where('periodo_id', $periodoActivo-&gt;id)\n        -&gt;whereIn('estado', ['pendiente', 'asignado', 'cursando'])\n        -&gt;first();\n\n    if ($preregistroExistente) {\n        return redirect()-&gt;route('alumno.dashboard')\n            -&gt;with('error', 'Ya tienes un preregistro activo para este periodo.');\n    }\n\n    $validatedData = $request-&gt;validate([\n        'nivel_solicitado' =&gt; 'required|integer|between:1,5',\n        'horario_preferido_id' =&gt; 'required|exists:horarios_periodo,id',\n        'semestre_actual' =&gt; 'required|integer',\n    ]);\n\n    try {\n        Preregistro::create([\n            'usuario_id' =&gt; Auth::id(),\n            'periodo_id' =&gt; $periodoActivo-&gt;id,\n            'nivel_solicitado' =&gt; $validatedData['nivel_solicitado'],\n            'horario_preferido_id' =&gt; $validatedData['horario_preferido_id'],\n            'semestre_actual' =&gt; $validatedData['semestre_actual'],\n            'estado' =&gt; 'pendiente',\n            'pago_estado' =&gt; 'pendiente'\n        ]);\n\n        return redirect()-&gt;route('alumno.preregistro.index')\n            -&gt;with('success', 'Preregistro realizado exitosamente. Ser\u00e1s asignado a un grupo pr\u00f3ximamente.');\n\n    } catch (\\Exception $e) {\n        return back()-&gt;with('error', 'Error al realizar el preregistro: ' . $e-&gt;getMessage())\n            -&gt;withInput();\n    }\n}\n</code></pre> <p>Validaciones implementadas: - nivel_solicitado: N\u00famero entero entre 1 y 5 - horario_preferido_id: Debe existir en la tabla de horarios_periodo - semestre_actual: N\u00famero entero requerido</p> <p>Flujo del m\u00e9todo: 1. Verifica periodo activo para preregistros 2. Valida que no exista preregistro activo previo 3. Valida datos del formulario 4. Crea el registro de preregistro 5. Redirige con mensaje de \u00e9xito o error</p>"},{"location":"sprints/sprint-3/preregistroController/#metodo-index","title":"M\u00e9todo: index()","text":"<p>Muestra la lista de preregistros del estudiante autenticado.</p> <pre><code>public function index()\n{\n    $preregistros = Preregistro::with([\n            'periodo', \n            'horarioPreferido.horarioBase',\n            'grupoAsignado'\n        ])\n        -&gt;where('usuario_id', Auth::id())\n        -&gt;orderBy('created_at', 'desc')\n        -&gt;get();\n\n    return view('alumno.preregistro.index', compact('preregistros'));\n}\n</code></pre> <p>Caracter\u00edsticas: - Carga relaciones necesarias para mostrar informaci\u00f3n completa - Filtra solo los preregistros del usuario autenticado - Ordena por fecha de creaci\u00f3n descendente - Retorna vista con la colecci\u00f3n de preregistros</p>"},{"location":"sprints/sprint-3/preregistroController/#metodo-showpreregistro-preregistro","title":"M\u00e9todo: show(Preregistro $preregistro)","text":"<p>Muestra los detalles de un preregistro espec\u00edfico.</p> <pre><code>public function show(Preregistro $preregistro)\n{\n    // Verificar que el preregistro pertenezca al usuario\n    if ($preregistro-&gt;usuario_id !== Auth::id()) {\n        abort(403);\n    }\n\n    $preregistro-&gt;load([\n        'periodo',\n        'horarioPreferido.horarioBase', \n        'grupoAsignado.profesor',\n        'grupoAsignado.aula'\n    ]);\n\n    return view('alumno.preregistro.show', compact('preregistro'));\n}\n</code></pre> <p>Seguridad implementada: - Verificaci\u00f3n de propiedad del preregistro - C\u00f3digo 403 si el preregistro no pertenece al usuario</p> <p>Relaciones cargadas: - Periodo del preregistro - Horario preferido con su horario base - Grupo asignado con profesor y aula</p>"},{"location":"sprints/sprint-3/preregistroController/#caracteristicas-de-seguridad","title":"Caracter\u00edsticas de Seguridad","text":""},{"location":"sprints/sprint-3/preregistroController/#control-de-acceso","title":"Control de Acceso","text":"<ul> <li>Autenticaci\u00f3n requerida: Todos los m\u00e9todos requieren usuario autenticado</li> <li>Propiedad de datos: Los estudiantes solo pueden ver sus propios preregistros</li> <li>Verificaci\u00f3n de periodo: Solo permite preregistros en periodos activos</li> </ul>"},{"location":"sprints/sprint-3/preregistroController/#validaciones-de-negocio","title":"Validaciones de Negocio","text":""},{"location":"sprints/sprint-3/preregistroController/#para-crear-preregistro","title":"Para Crear Preregistro:","text":"<ul> <li>Solo un preregistro activo por periodo por estudiante</li> <li>Periodo debe estar en estado \"preregistros_activos\"</li> <li>Horarios deben estar activos en el periodo</li> </ul>"},{"location":"sprints/sprint-3/preregistroController/#estados-de-preregistro-considerados-activos","title":"Estados de Preregistro Considerados Activos:","text":"<ul> <li>pendiente: Preregistro realizado, esperando asignaci\u00f3n</li> <li>asignado: Estudiante asignado a un grupo</li> <li>cursando: Estudiante activo en un grupo</li> </ul>"},{"location":"sprints/sprint-3/preregistroController/#manejo-de-errores","title":"Manejo de Errores","text":"<ul> <li>Mensajes descriptivos para el usuario</li> <li>Redirecci\u00f3n apropiada seg\u00fan el contexto</li> <li>Preservaci\u00f3n de datos del formulario en caso de error</li> </ul>"},{"location":"sprints/sprint-3/preregistroController/#flujos-de-trabajo","title":"Flujos de Trabajo","text":""},{"location":"sprints/sprint-3/preregistroController/#flujo-de-preregistro-exitoso","title":"Flujo de Preregistro Exitoso:","text":"<ol> <li>Estudiante accede al formulario de preregistro</li> <li>Sistema verifica periodo activo y preregistros existentes</li> <li>Estudiante completa formulario con nivel y horario preferido</li> <li>Sistema crea preregistro con estado \"pendiente\"</li> <li>Estudiante es redirigido a la lista de preregistros con mensaje de \u00e9xito</li> </ol>"},{"location":"sprints/sprint-3/preregistroController/#flujo-con-restricciones","title":"Flujo con Restricciones:","text":"<ol> <li>Si no hay periodo activo: muestra error y redirige al dashboard</li> <li>Si ya tiene preregistro activo: muestra informaci\u00f3n y redirige al dashboard</li> <li>Si hay error en validaci\u00f3n: muestra error y mantiene datos del formulario</li> </ol>"},{"location":"sprints/sprint-3/preregistroController/#relaciones-con-otros-componentes","title":"Relaciones con Otros Componentes","text":""},{"location":"sprints/sprint-3/preregistroController/#integracion-con-modelo-periodo","title":"Integraci\u00f3n con Modelo Periodo:","text":"<ul> <li>Usa el scope <code>conPreRegistrosActivos()</code> para obtener periodos v\u00e1lidos</li> <li>Relaciona preregistro con periodo espec\u00edfico</li> </ul>"},{"location":"sprints/sprint-3/preregistroController/#integracion-con-modelo-horarioperiodo","title":"Integraci\u00f3n con Modelo HorarioPeriodo:","text":"<ul> <li>Proporciona horarios disponibles para selecci\u00f3n</li> <li>Relaciona preregistro con horario preferido</li> </ul>"},{"location":"sprints/sprint-3/preregistroController/#integracion-con-modelo-grupo","title":"Integraci\u00f3n con Modelo Grupo:","text":"<ul> <li>Permite visualizar grupo asignado cuando existe</li> <li>Carga informaci\u00f3n de profesor y aula del grupo</li> </ul> <p>Este controlador proporciona una interfaz segura y amigable para que los estudiantes realicen sus preregistros, con validaciones robustas que garantizan la integridad de los datos y previenen duplicados o operaciones inv\u00e1lidas.</p>"},{"location":"sprints/sprint-3/preregistros/","title":"Documentaci\u00f3n del Modelo Preregistro","text":""},{"location":"sprints/sprint-3/preregistros/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo <code>Preregistro</code> representa las solicitudes de preregistro de estudiantes para cursos de ingl\u00e9s en el sistema. Gestiona toda la informaci\u00f3n relacionada con las inscripciones preliminares de estudiantes, incluyendo niveles solicitados, horarios preferidos, estados de pago y asignaci\u00f3n a grupos.</p>"},{"location":"sprints/sprint-3/preregistros/#estructura-del-modelo","title":"Estructura del Modelo","text":""},{"location":"sprints/sprint-3/preregistros/#namespace-y-definicion-de-clase","title":"Namespace y Definici\u00f3n de Clase","text":"<pre><code>namespace App\\Models;\n\nuse Illuminate\\Database\\Eloquent\\Factories\\HasFactory;\nuse Illuminate\\Database\\Eloquent\\Model;\n\nclass Preregistro extends Model\n{\n    use HasFactory;\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#propiedades-del-modelo","title":"Propiedades del Modelo","text":""},{"location":"sprints/sprint-3/preregistros/#atributos-mass-assignable","title":"Atributos Mass Assignable","text":"<pre><code>protected $fillable = [\n    'usuario_id',\n    'periodo_id',\n    'nivel_solicitado',\n    'horario_preferido_id',\n    'semestre_carrera',\n    'grupo_asignado_id',\n    'estado',\n    'pago_estado'\n];\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#casts-de-atributos","title":"Casts de Atributos","text":"<pre><code>protected $casts = [\n    'nivel_solicitado' =&gt; 'integer'\n];\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#constantes-del-sistema","title":"Constantes del Sistema","text":""},{"location":"sprints/sprint-3/preregistros/#estados-del-preregistro","title":"Estados del Preregistro","text":"<pre><code>const ESTADOS = [\n    'pendiente' =&gt; 'Pendiente de Asignaci\u00f3n',\n    'asignado' =&gt; 'Asignado a Grupo',\n    'cursando' =&gt; 'Cursando',\n    'finalizado' =&gt; 'Finalizado',\n    'cancelado' =&gt; 'Cancelado'\n];\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#estados-de-pago-incluye-prorroga","title":"Estados de Pago (Incluye Pr\u00f3rroga)","text":"<pre><code>const PAGO_ESTADOS = [\n    'pendiente' =&gt; 'Pendiente de Pago',\n    'prorroga' =&gt; 'En Pr\u00f3rroga',\n    'pagado' =&gt; 'Pagado',\n    'rechazado' =&gt; 'Pago Rechazado'\n];\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#niveles-disponibles","title":"Niveles Disponibles","text":"<pre><code>const NIVELES = [\n    1 =&gt; 'Nivel 1',\n    2 =&gt; 'Nivel 2', \n    3 =&gt; 'Nivel 3',\n    4 =&gt; 'Nivel 4',\n    5 =&gt; 'Nivel 5'\n];\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#relaciones","title":"Relaciones","text":""},{"location":"sprints/sprint-3/preregistros/#relacion-con-usuario","title":"Relaci\u00f3n con Usuario","text":"<pre><code>public function usuario()\n{\n    return $this-&gt;belongsTo(Usuario::class);\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#relacion-con-periodo","title":"Relaci\u00f3n con Periodo","text":"<pre><code>public function periodo()\n{\n    return $this-&gt;belongsTo(Periodo::class);\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#relacion-con-horariopreferido","title":"Relaci\u00f3n con HorarioPreferido","text":"<pre><code>public function horarioPreferido()\n{\n    return $this-&gt;belongsTo(HorarioPeriodo::class, 'horario_preferido_id');\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#relacion-con-grupoasignado","title":"Relaci\u00f3n con GrupoAsignado","text":"<pre><code>public function grupoAsignado()\n{\n    return $this-&gt;belongsTo(Grupo::class, 'grupo_asignado_id');\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#scopes-de-consulta","title":"Scopes de Consulta","text":""},{"location":"sprints/sprint-3/preregistros/#scope-de-preregistros-pendientes","title":"Scope de Preregistros Pendientes","text":"<pre><code>public function scopePendientes($query)\n{\n    return $query-&gt;where('estado', 'pendiente');\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#scope-de-preregistros-pagados","title":"Scope de Preregistros Pagados","text":"<pre><code>public function scopePagados($query)\n{\n    return $query-&gt;where('pago_estado', 'pagado');\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#scope-de-preregistros-que-pueden-asignarse","title":"Scope de Preregistros que Pueden Asignarse","text":"<pre><code>public function scopePuedenAsignarse($query)\n{\n    return $query-&gt;where('estado', 'pendiente')\n                -&gt;whereIn('pago_estado', ['pagado', 'prorroga']);\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#scope-de-preregistros-activos","title":"Scope de Preregistros Activos","text":"<pre><code>public function scopeActivos($query)\n{\n    return $query-&gt;whereIn('estado', ['pendiente', 'asignado', 'cursando']);\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#scope-de-preregistros-con-prorroga","title":"Scope de Preregistros con Pr\u00f3rroga","text":"<pre><code>public function scopeConProrroga($query)\n{\n    return $query-&gt;where('pago_estado', 'prorroga');\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#accessors-getters-computados","title":"Accessors (Getters Computados)","text":""},{"location":"sprints/sprint-3/preregistros/#nivel-formateado","title":"Nivel Formateado","text":"<pre><code>public function getNivelFormateadoAttribute()\n{\n    return self::NIVELES[$this-&gt;nivel_solicitado] ?? \"Nivel {$this-&gt;nivel_solicitado}\";\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#estado-formateado","title":"Estado Formateado","text":"<pre><code>public function getEstadoFormateadoAttribute()\n{\n    return self::ESTADOS[$this-&gt;estado] ?? $this-&gt;estado;\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#estado-de-pago-formateado","title":"Estado de Pago Formateado","text":"<pre><code>public function getPagoEstadoFormateadoAttribute()\n{\n    return self::PAGO_ESTADOS[$this-&gt;pago_estado] ?? $this-&gt;pago_estado;\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#color-de-estado-de-pago","title":"Color de Estado de Pago","text":"<pre><code>public function getColorPagoAttribute()\n{\n    return match($this-&gt;pago_estado) {\n        'pendiente' =&gt; 'yellow',\n        'prorroga' =&gt; 'blue',\n        'pagado' =&gt; 'green',\n        'rechazado' =&gt; 'red',\n        default =&gt; 'gray'\n    };\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#metodos-de-negocio","title":"M\u00e9todos de Negocio","text":""},{"location":"sprints/sprint-3/preregistros/#verificar-si-puede-ser-asignado","title":"Verificar si Puede ser Asignado","text":"<pre><code>public function puedeSerAsignado()\n{\n    return $this-&gt;estado === 'pendiente' &amp;&amp; \n           in_array($this-&gt;pago_estado, ['pagado', 'prorroga']) &amp;&amp;\n           $this-&gt;periodo-&gt;aceptaPreRegistros();\n}\n</code></pre> <p>Condiciones para asignaci\u00f3n: - Estado debe ser 'pendiente' - Pago debe estar 'pagado' o 'prorroga' - El periodo debe aceptar preregistros</p>"},{"location":"sprints/sprint-3/preregistros/#verificar-si-esta-listo-para-cursar","title":"Verificar si Est\u00e1 Listo para Cursar","text":"<pre><code>public function estaListoParaCursar()\n{\n    return $this-&gt;estado === 'asignado' &amp;&amp; \n           in_array($this-&gt;pago_estado, ['pagado', 'prorroga']);\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#verificar-si-puede-ser-cancelado","title":"Verificar si Puede ser Cancelado","text":"<pre><code>public function puedeSerCancelado()\n{\n    return in_array($this-&gt;estado, ['pendiente', 'asignado']) &amp;&amp;\n           !$this-&gt;periodo-&gt;estaFinalizado();\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#verificar-estados-especificos","title":"Verificar Estados Espec\u00edficos","text":"<pre><code>public function estaCursando()\n{\n    return $this-&gt;estado === 'cursando';\n}\n\npublic function estaFinalizado()\n{\n    return $this-&gt;estado === 'finalizado';\n}\n\npublic function estaCancelado()\n{\n    return $this-&gt;estado === 'cancelado';\n}\n\npublic function tieneProrroga()\n{\n    return $this-&gt;pago_estado === 'prorroga';\n}\n</code></pre>"},{"location":"sprints/sprint-3/preregistros/#verificar-si-esta-vencido","title":"Verificar si Est\u00e1 Vencido","text":"<pre><code>public function estaVencido()\n{\n    return $this-&gt;pago_estado === 'pendiente' &amp;&amp; \n           $this-&gt;created_at-&gt;diffInDays(now()) &gt; 7;\n}\n</code></pre> <p>L\u00f3gica de vencimiento: - Solo aplica para estado de pago 'pendiente' - Considera vencido despu\u00e9s de 7 d\u00edas desde la creaci\u00f3n</p>"},{"location":"sprints/sprint-3/preregistros/#sincronizar-con-estado-del-periodo","title":"Sincronizar con Estado del Periodo","text":"<pre><code>public function sincronizarConPeriodo()\n{\n    if ($this-&gt;periodo-&gt;estaEnCurso() &amp;&amp; $this-&gt;estaListoParaCursar()) {\n        $this-&gt;update(['estado' =&gt; 'cursando']);\n    }\n\n    if ($this-&gt;periodo-&gt;estaFinalizado() &amp;&amp; $this-&gt;estado === 'cursando') {\n        $this-&gt;update(['estado' =&gt; 'finalizado']);\n    }\n}\n</code></pre> <p>Automatizaci\u00f3n de estados: - Cambia a 'cursando' cuando el periodo inicia y el preregistro est\u00e1 listo - Cambia a 'finalizado' cuando el periodo finaliza y estaba cursando</p>"},{"location":"sprints/sprint-3/preregistros/#validar-transiciones-de-estado","title":"Validar Transiciones de Estado","text":"<pre><code>public function puedeCambiarA($nuevoEstado)\n{\n    $transicionesPermitidas = [\n        'pendiente' =&gt; ['asignado', 'cancelado'],\n        'asignado' =&gt; ['cursando', 'cancelado'],\n        'cursando' =&gt; ['finalizado'],\n        'finalizado' =&gt; [],\n        'cancelado' =&gt; []\n    ];\n\n    return in_array($nuevoEstado, $transicionesPermitidas[$this-&gt;estado]);\n}\n</code></pre> <p>Reglas de transici\u00f3n: - pendiente \u2192 asignado, cancelado - asignado \u2192 cursando, cancelado - cursando \u2192 finalizado - finalizado \u2192 (sin transiciones permitidas) - cancelado \u2192 (sin transiciones permitidas)</p>"},{"location":"sprints/sprint-3/preregistros/#flujos-de-trabajo-y-validaciones","title":"Flujos de Trabajo y Validaciones","text":""},{"location":"sprints/sprint-3/preregistros/#ciclo-de-vida-del-preregistro","title":"Ciclo de Vida del Preregistro","text":"<ol> <li>Creaci\u00f3n: Estado inicial 'pendiente', pago 'pendiente'</li> <li>Pago: Cambia a 'pagado' o 'prorroga'</li> <li>Asignaci\u00f3n: Cambia a 'asignado' cuando se asigna a grupo</li> <li>Inicio de Curso: Cambia a 'cursando' cuando el periodo inicia</li> <li>Finalizaci\u00f3n: Cambia a 'finalizado' cuando el periodo termina</li> <li>Cancelaci\u00f3n: Puede cancelarse en estados 'pendiente' o 'asignado'</li> </ol>"},{"location":"sprints/sprint-3/preregistros/#validaciones-de-integridad","title":"Validaciones de Integridad","text":"<p>Para Asignaci\u00f3n a Grupo: - Preregistro debe estar en estado 'pendiente' - Pago debe estar 'pagado' o 'prorroga' - Periodo debe aceptar preregistros</p> <p>Para Inicio de Curso: - Preregistro debe estar 'asignado' - Pago debe estar 'pagado' o 'prorroga' - Periodo debe estar 'en_curso'</p> <p>Para Cancelaci\u00f3n: - Solo permitido en estados 'pendiente' o 'asignado' - Periodo no debe estar finalizado</p>"},{"location":"sprints/sprint-3/preregistros/#gestion-de-prorrogas","title":"Gesti\u00f3n de Pr\u00f3rrogas","text":"<p>Caracter\u00edsticas de la pr\u00f3rroga: - Estado de pago especial 'prorroga' - Permite asignaci\u00f3n a grupos igual que 'pagado' - Color azul en interfaces para identificaci\u00f3n visual - Scope espec\u00edfico para consultas</p>"},{"location":"sprints/sprint-3/preregistros/#integracion-con-el-sistema","title":"Integraci\u00f3n con el Sistema","text":""},{"location":"sprints/sprint-3/preregistros/#relacion-con-periodos","title":"Relaci\u00f3n con Periodos","text":"<ul> <li>Los preregistros est\u00e1n vinculados a periodos espec\u00edficos</li> <li>Sincronizaci\u00f3n autom\u00e1tica con cambios de estado del periodo</li> <li>Validaci\u00f3n de que el periodo acepte preregistros</li> </ul>"},{"location":"sprints/sprint-3/preregistros/#relacion-con-grupos","title":"Relaci\u00f3n con Grupos","text":"<ul> <li>Asignaci\u00f3n opcional a grupos mediante <code>grupo_asignado_id</code></li> <li>Informaci\u00f3n del grupo disponible a trav\u00e9s de la relaci\u00f3n</li> </ul>"},{"location":"sprints/sprint-3/preregistros/#relacion-con-horarios","title":"Relaci\u00f3n con Horarios","text":"<ul> <li>Horario preferido seleccionado durante el preregistro</li> <li>Informaci\u00f3n del horario base disponible para mostrar al estudiante</li> </ul> <p>Este modelo proporciona una gesti\u00f3n completa de los preregistros de estudiantes con validaciones robustas que garantizan la integridad de los datos y automatizaciones que sincronizan el estado del preregistro con el ciclo de vida del periodo acad\u00e9mico.</p>"},{"location":"sprints/sprint-4/","title":"Resumen de la Reestructuraci\u00f3n Arquitect\u00f3nica - Sprint 4","text":"<p>Historial de Versiones | Versi\u00f3n | Fecha | Autor | Descripci\u00f3n de los Cambios | |---------|-------|-------|---------------------------| | 1.0 | 15/01/2025 | Isaac Jonathan Santos Rojas | Documentaci\u00f3n inicial del Sprint 4 | | 1.1 | 20/01/2025 | Isaac Jonathan Santos Rojas | Agregados modelos HorarioPeriodo y Grupo | | 1.2 | 25/01/2025 | Isaac Jonathan Santos Rojas | Documentaci\u00f3n completa del PeriodoController | | | | | |</p>"},{"location":"sprints/sprint-4/#transformacion-central","title":"Transformaci\u00f3n Central","text":"<p>El Sprint 4 ejecut\u00f3 una reestructuraci\u00f3n fundamental del sistema GLOTTY, transformando la arquitectura de m\u00f3dulos independientes a un modelo centrado en el Periodo Acad\u00e9mico como entidad ra\u00edz. Esta transformaci\u00f3n estableci\u00f3 una jerarqu\u00eda clara donde todas las operaciones acad\u00e9micas dependen contextualmente de un periodo espec\u00edfico.</p>"},{"location":"sprints/sprint-4/#componentes-clave-implementados","title":"Componentes Clave Implementados","text":""},{"location":"sprints/sprint-4/#modelo-periodo-como-nucleo","title":"Modelo Periodo como N\u00facleo","text":"<p>El modelo Periodo fue elevado a entidad central del sistema, gestionando el ciclo de vida completo de los periodos acad\u00e9micos a trav\u00e9s de seis estados operativos: configuraci\u00f3n, preregistros activos, preregistros cerrados, en curso, finalizado y cancelado. Cada estado controla permisos operativos espec\u00edficos y permite transiciones controladas.</p>"},{"location":"sprints/sprint-4/#modelo-horarioperiodo-como-conector-estrategico","title":"Modelo HorarioPeriodo como Conector Estrat\u00e9gico","text":"<p>Se implement\u00f3 el modelo pivote HorarioPeriodo que resuelve el desaf\u00edo de reutilizaci\u00f3n de horarios mediante una estrategia de instant\u00e1neas. Este modelo almacena copias de los datos cr\u00edticos del horario base, permitiendo la reutilizaci\u00f3n entre periodos mientras preserva la inmutabilidad de datos hist\u00f3ricos.</p>"},{"location":"sprints/sprint-4/#relaciones-establecidas","title":"Relaciones Establecidas","text":"<p>La reestructuraci\u00f3n defini\u00f3 relaciones jer\u00e1rquicas claras:</p> <ul> <li>Periodo \u2192 HorarioPeriodo (uno a muchos)</li> <li>Periodo \u2192 Grupos (uno a muchos) </li> <li>Periodo \u2192 Preregistros (uno a muchos)</li> <li>HorarioPeriodo \u2192 Grupos (uno a muchos)</li> <li>HorarioBase \u2192 HorarioPeriodo (uno a muchos)</li> </ul>"},{"location":"sprints/sprint-4/#beneficios-arquitectonicos-obtenidos","title":"Beneficios Arquitect\u00f3nicos Obtenidos","text":""},{"location":"sprints/sprint-4/#coherencia-organizacional","title":"Coherencia Organizacional","text":"<p>Todas las operaciones acad\u00e9micas quedaron contextualizadas dentro de periodos espec\u00edficos, eliminando ambig\u00fcedades en la gesti\u00f3n de datos y proporcionando estructura l\u00f3gica al sistema.</p>"},{"location":"sprints/sprint-4/#reutilizacion-eficiente","title":"Reutilizaci\u00f3n Eficiente","text":"<p>Los horarios base pueden ser asociados a m\u00faltiples periodos acad\u00e9micos mediante el modelo HorarioPeriodo, optimizando la gesti\u00f3n de recursos temporales y reduciendo duplicaci\u00f3n.</p>"},{"location":"sprints/sprint-4/#preservacion-historica","title":"Preservaci\u00f3n Hist\u00f3rica","text":"<p>La estrategia de instant\u00e1neas garantiza que los datos hist\u00f3ricos permanezcan inmutables, permitiendo auditor\u00eda completa y preservando el contexto original de cada operaci\u00f3n acad\u00e9mica.</p>"},{"location":"sprints/sprint-4/#escalabilidad","title":"Escalabilidad","text":"<p>La arquitectura establecida proporciona bases s\u00f3lidas para futuras expansiones, permitiendo la incorporaci\u00f3n de nuevos m\u00f3dulos acad\u00e9micos dentro del paradigma centrado en periodos.</p>"},{"location":"sprints/sprint-4/#mantenibilidad","title":"Mantenibilidad","text":"<p>La separaci\u00f3n clara de responsabilidades y las relaciones bien definidas facilitan el mantenimiento y evoluci\u00f3n del sistema, reduciendo la complejidad acoplada.</p>"},{"location":"sprints/sprint-4/#impacto-en-el-flujo-academico","title":"Impacto en el Flujo Acad\u00e9mico","text":"<p>El sistema ahora opera bajo un flujo coherente donde cada acci\u00f3n acad\u00e9mica -desde la asignaci\u00f3n de horarios hasta la gesti\u00f3n de grupos y preregistros- queda referenciada a un periodo acad\u00e9mico espec\u00edfico. Esto proporciona trazabilidad completa, control de acceso basado en estados y gesti\u00f3n hist\u00f3rica estructurada.</p> <p>La reestructuraci\u00f3n transform\u00f3 GLOTTY de una colecci\u00f3n de m\u00f3dulos independientes a una plataforma acad\u00e9mica integrada con arquitectura empresarial s\u00f3lida, preparada para el crecimiento futuro y el mantenimiento a largo plazo.</p>"},{"location":"sprints/sprint-4/grupo/","title":"Grupo - Gesti\u00f3n de Grupos Acad\u00e9micos","text":""},{"location":"sprints/sprint-4/grupo/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo Grupo representa la entidad central para la organizaci\u00f3n de estudiantes en el sistema GLOTTY despu\u00e9s de la reestructuraci\u00f3n del Sprint 4. Cada grupo queda contextualizado dentro de un periodo acad\u00e9mico espec\u00edfico y establece relaciones con horarios, aulas y profesores, formando una estructura acad\u00e9mica completa y coherente.</p>"},{"location":"sprints/sprint-4/grupo/#estructura-de-datos","title":"Estructura de Datos","text":""},{"location":"sprints/sprint-4/grupo/#campos-principales-y-configuracion","title":"Campos Principales y Configuraci\u00f3n","text":"<pre><code>protected $fillable = [\n    'nivel_ingles',\n    'letra_grupo',\n    'periodo_id',\n    'horario_periodo_id',\n    'aula_id',\n    'profesor_id',\n    'capacidad_maxima',\n    'estudiantes_inscritos',\n    'estado'\n];\n\nprotected $casts = [\n    'nivel_ingles' =&gt; 'integer',\n    'capacidad_maxima' =&gt; 'integer',\n    'estudiantes_inscritos' =&gt; 'integer'\n];\n</code></pre> <p>El modelo gestiona la configuraci\u00f3n completa de un grupo acad\u00e9mico, incluyendo su nivel de ingl\u00e9s, identificaci\u00f3n \u00fanica mediante letra, relaciones contextuales con periodo y horario, asignaci\u00f3n de recursos f\u00edsicos y humanos, y control de capacidad e inscripciones.</p>"},{"location":"sprints/sprint-4/grupo/#sistema-de-estados-del-grupo","title":"Sistema de Estados del Grupo","text":"<pre><code>const ESTADOS = [\n    'planificado' =&gt; 'Planificado',\n    'con_profesor' =&gt; 'Con Profesor', \n    'con_aula' =&gt; 'Con Aula',\n    'activo' =&gt; 'Activo',\n    'cancelado' =&gt; 'Cancelado'\n];\n</code></pre> <p>Los grupos siguen un flujo de estados progresivo que representa su nivel de configuraci\u00f3n. Desde la planificaci\u00f3n inicial hasta la activaci\u00f3n completa, cada estado indica qu\u00e9 recursos han sido asignados y qu\u00e9 operaciones est\u00e1n permitidas.</p>"},{"location":"sprints/sprint-4/grupo/#niveles-de-ingles-y-letras-de-grupo","title":"Niveles de Ingl\u00e9s y Letras de Grupo","text":"<pre><code>const NIVELES = [\n    1 =&gt; 'Nivel 1',\n    2 =&gt; 'Nivel 2', \n    3 =&gt; 'Nivel 3',\n    4 =&gt; 'Nivel 4',\n    5 =&gt; 'Nivel 5'\n];\n\nconst LETRAS_GRUPO = ['A', 'B', 'C', 'D', 'E', 'F'];\n</code></pre> <p>El sistema soporta cinco niveles de ingl\u00e9s y utiliza letras consecutivas para identificar grupos dentro del mismo nivel y periodo, garantizando nombres \u00fanicos y significativos.</p>"},{"location":"sprints/sprint-4/grupo/#relaciones-contextualizadas","title":"Relaciones Contextualizadas","text":""},{"location":"sprints/sprint-4/grupo/#relacion-con-periodo-academico","title":"Relaci\u00f3n con Periodo Acad\u00e9mico","text":"<pre><code>public function periodo() \n{ \n    return $this-&gt;belongsTo(Periodo::class); \n}\n</code></pre> <p>Cada grupo pertenece obligatoriamente a un periodo acad\u00e9mico espec\u00edfico, estableciendo el contexto temporal fundamental para todas sus operaciones. Esta relaci\u00f3n permite la gesti\u00f3n coherente de grupos dentro de ciclos escolares definidos.</p>"},{"location":"sprints/sprint-4/grupo/#relacion-con-horario-contextualizado","title":"Relaci\u00f3n con Horario Contextualizado","text":"<pre><code>public function horario() \n{ \n    return $this-&gt;belongsTo(HorarioPeriodo::class, 'horario_periodo_id'); \n}\n</code></pre> <p>La relaci\u00f3n con HorarioPeriodo asegura que el horario del grupo est\u00e9 contextualizado dentro del periodo acad\u00e9mico, utilizando el modelo pivote que mantiene instant\u00e1neas espec\u00edficas por periodo.</p>"},{"location":"sprints/sprint-4/grupo/#relaciones-con-recursos","title":"Relaciones con Recursos","text":"<pre><code>public function aula() \n{ \n    return $this-&gt;belongsTo(Aula::class, 'aula_id'); \n}\n\npublic function profesor() \n{ \n    return $this-&gt;belongsTo(Profesor::class, 'profesor_id', 'id_profesor');\n}\n</code></pre> <p>Las relaciones con Aula y Profesor gestionan la asignaci\u00f3n de recursos f\u00edsicos y humanos al grupo, con validaciones integradas para evitar conflictos y garantizar la viabilidad operativa.</p>"},{"location":"sprints/sprint-4/grupo/#gestion-de-estudiantes","title":"Gesti\u00f3n de Estudiantes","text":"<pre><code>public function preregistros() \n{ \n    return $this-&gt;hasMany(Preregistro::class, 'grupo_asignado_id'); \n}\n\npublic function estudiantesActivos() \n{ \n    return $this-&gt;preregistros()-&gt;whereIn('estado', ['asignado', 'cursando']); \n}\n</code></pre> <p>El grupo mantiene relaci\u00f3n con los preregistros de estudiantes asignados, proporcionando m\u00e9todos especializados para acceder espec\u00edficamente a los estudiantes activos.</p>"},{"location":"sprints/sprint-4/grupo/#sistema-de-consultas-especializadas","title":"Sistema de Consultas Especializadas","text":""},{"location":"sprints/sprint-4/grupo/#scopes-para-gestion-operativa","title":"Scopes para Gesti\u00f3n Operativa","text":"<p>El modelo incluye scopes optimizados para las operaciones m\u00e1s comunes:</p> <ul> <li>activos: Grupos en estado operativo completo</li> <li>planificados: Grupos en fase de configuraci\u00f3n inicial</li> <li>porNivel: Filtrado por nivel de ingl\u00e9s espec\u00edfico</li> <li>porPeriodo: Grupos dentro de un periodo acad\u00e9mico</li> <li>conCapacidad: Grupos con disponibilidad para nuevos estudiantes</li> </ul>"},{"location":"sprints/sprint-4/grupo/#deteccion-de-conflictos-de-horario","title":"Detecci\u00f3n de Conflictos de Horario","text":"<pre><code>public function scopeSolapados($query, $horarioId, $aulaId = null, $profesorId = null)\n{\n    return $query-&gt;where('horario_periodo_id', $horarioId)\n        -&gt;where(function ($q) use ($aulaId, $profesorId) {\n            if ($aulaId) {\n                $q-&gt;where('aula_id', $aulaId);\n            }\n            if ($profesorId) {\n                $q-&gt;orWhere('profesor_id', $profesorId);\n            }\n        })\n        -&gt;whereNotIn('estado', ['cancelado']);\n}\n</code></pre> <p>Este scope identifica grupos que podr\u00edan generar conflictos por solapamiento de horarios, considerando tanto aulas como profesores, y excluyendo grupos cancelados del an\u00e1lisis.</p>"},{"location":"sprints/sprint-4/grupo/#metodos-de-utilidad-y-presentacion","title":"M\u00e9todos de Utilidad y Presentaci\u00f3n","text":""},{"location":"sprints/sprint-4/grupo/#generacion-de-nombres-y-formatos","title":"Generaci\u00f3n de Nombres y Formatos","text":"<pre><code>public function getNombreCompletoAttribute()\n{\n    return \"{$this-&gt;nivel_ingles}-{$this-&gt;letra_grupo}\";\n}\n\npublic function getNivelFormateadoAttribute()\n{\n    return self::NIVELES[$this-&gt;nivel_ingles] ?? \"Nivel {$this-&gt;nivel_ingles}\";\n}\n</code></pre> <p>Los accesores proporcionan representaciones formateadas del grupo, incluyendo nombres completos y niveles legibles, optimizando la presentaci\u00f3n en interfaces de usuario.</p>"},{"location":"sprints/sprint-4/grupo/#gestion-de-capacidad-y-ocupacion","title":"Gesti\u00f3n de Capacidad y Ocupaci\u00f3n","text":"<pre><code>public function getCapacidadDisponibleAttribute()\n{\n    return $this-&gt;capacidad_maxima - $this-&gt;estudiantes_inscritos;\n}\n\npublic function getPorcentajeOcupacionAttribute()\n{\n    if ($this-&gt;capacidad_maxima === 0) return 0;\n    return round(($this-&gt;estudiantes_inscritos / $this-&gt;capacidad_maxima) * 100, 2);\n}\n</code></pre> <p>Estos m\u00e9todos calculan autom\u00e1ticamente la capacidad disponible y el porcentaje de ocupaci\u00f3n del grupo, facilitando la toma de decisiones en procesos de asignaci\u00f3n.</p>"},{"location":"sprints/sprint-4/grupo/#logica-de-negocio-avanzada","title":"L\u00f3gica de Negocio Avanzada","text":""},{"location":"sprints/sprint-4/grupo/#validaciones-de-asignacion-de-recursos","title":"Validaciones de Asignaci\u00f3n de Recursos","text":""},{"location":"sprints/sprint-4/grupo/#validacion-de-aula","title":"Validaci\u00f3n de Aula","text":"<pre><code>public function validarAsignacionAula($aulaId)\n{\n    $aula = Aula::find($aulaId);\n    if (!$aula) {\n        throw new \\Exception('El aula seleccionada no existe.');\n    }\n\n    if (!$aula-&gt;disponible) {\n        throw new \\Exception(\"El aula {$aula-&gt;nombre_completo} no est\u00e1 disponible.\");\n    }\n\n    if (!$aula-&gt;soportaCapacidad($this-&gt;capacidad_maxima)) {\n        throw new \\Exception(\"El aula {$aula-&gt;nombre_completo} tiene capacidad para {$aula-&gt;capacidad} estudiantes, pero el grupo requiere {$this-&gt;capacidad_maxima}.\");\n    }\n\n    if (!$aula-&gt;estaDisponibleEnHorario($this-&gt;horario_periodo_id)) {\n        throw new \\Exception(\"El aula {$aula-&gt;nombre_completo} ya est\u00e1 ocupada en este horario.\");\n    }\n\n    return true;\n}\n</code></pre> <p>El m\u00e9todo realiza validaciones exhaustivas para la asignaci\u00f3n de aulas, verificando existencia, disponibilidad global, capacidad suficiente y disponibilidad en el horario espec\u00edfico.</p>"},{"location":"sprints/sprint-4/grupo/#validacion-de-profesor","title":"Validaci\u00f3n de Profesor","text":"<pre><code>public function validarAsignacionProfesor($profesorId)\n{\n    $profesor = Profesor::find($profesorId);\n    if (!$profesor) {\n        throw new \\Exception('El profesor seleccionado no existe.');\n    }\n\n    $conflictos = self::where('profesor_id', $profesorId)\n        -&gt;where('horario_periodo_id', $this-&gt;horario_periodo_id)\n        -&gt;where('id', '!=', $this-&gt;id)\n        -&gt;whereNotIn('estado', ['cancelado'])\n        -&gt;exists();\n\n    if ($conflictos) {\n        throw new \\Exception(\"El profesor {$profesor-&gt;nombre_profesor} ya tiene un grupo asignado en este horario.\");\n    }\n\n    return true;\n}\n</code></pre> <p>Valida la asignaci\u00f3n de profesores verificando existencia y detectando conflictos de horario con otros grupos activos.</p>"},{"location":"sprints/sprint-4/grupo/#gestion-de-estudiantes_1","title":"Gesti\u00f3n de Estudiantes","text":""},{"location":"sprints/sprint-4/grupo/#asignacion-de-estudiantes","title":"Asignaci\u00f3n de Estudiantes","text":"<pre><code>public function asignarEstudiante($preregistroId)\n{\n    if (!$this-&gt;tieneCapacidad()) {\n        throw new \\Exception('El grupo no tiene capacidad disponible.');\n    }\n\n    $preregistro = Preregistro::find($preregistroId);\n    if (!$preregistro || !$preregistro-&gt;puedeSerAsignado()) {\n        throw new \\Exception('El estudiante no puede ser asignado a un grupo.');\n    }\n\n    if ($preregistro-&gt;grupo_asignado_id &amp;&amp; $preregistro-&gt;grupo_asignado_id != $this-&gt;id) {\n        throw new \\Exception('El estudiante ya est\u00e1 asignado a otro grupo.');\n    }\n\n    \\DB::transaction(function () use ($preregistro) {\n        $preregistro-&gt;update([\n            'grupo_asignado_id' =&gt; $this-&gt;id,\n            'estado' =&gt; 'asignado'\n        ]);\n\n        $this-&gt;increment('estudiantes_inscritos');\n    });\n\n    return true;\n}\n</code></pre> <p>El m\u00e9todo gestiona la asignaci\u00f3n de estudiantes con validaciones completas y transacciones at\u00f3micas, asegurando la consistencia de datos.</p>"},{"location":"sprints/sprint-4/grupo/#remocion-de-estudiantes","title":"Remoci\u00f3n de Estudiantes","text":"<pre><code>public function removerEstudiante($preregistroId)\n{\n    $preregistro = Preregistro::find($preregistroId);\n    if (!$preregistro || $preregistro-&gt;grupo_asignado_id !== $this-&gt;id) {\n        throw new \\Exception('El estudiante no est\u00e1 asignado a este grupo.');\n    }\n\n    \\DB::transaction(function () use ($preregistro) {\n        $preregistro-&gt;update([\n            'grupo_asignado_id' =&gt; null,\n            'estado' =&gt; 'pendiente'\n        ]);\n\n        if ($this-&gt;estudiantes_inscritos &gt; 0) {\n            $this-&gt;decrement('estudiantes_inscritos');\n        }\n    });\n\n    return true;\n}\n</code></pre> <p>Permite la remoci\u00f3n segura de estudiantes mediante transacciones que mantienen la consistencia entre el grupo y el preregistro.</p>"},{"location":"sprints/sprint-4/grupo/#sistema-de-validacion-automatica","title":"Sistema de Validaci\u00f3n Autom\u00e1tica","text":""},{"location":"sprints/sprint-4/grupo/#hook-de-validacion-pre-guardado","title":"Hook de Validaci\u00f3n Pre-Guardado","text":"<pre><code>protected static function boot()\n{\n    parent::boot();\n\n    static::saving(function ($grupo) {\n        if ($grupo-&gt;aula_id &amp;&amp; !$grupo-&gt;aulaSoportaCapacidad()) {\n            throw new \\Exception(\"El aula no tiene suficiente capacidad para el grupo.\");\n        }\n\n        if ($grupo-&gt;tieneConflictosHorario()) {\n            $conflictos = $grupo-&gt;obtenerConflictos();\n            $mensaje = \"Conflicto de horario detectado: \";\n\n            foreach ($conflictos as $conflicto) {\n                if ($conflicto-&gt;aula_id == $grupo-&gt;aula_id) {\n                    $mensaje .= \"Aula ocupada por grupo {$conflicto-&gt;nombre_completo}. \";\n                }\n                if ($conflicto-&gt;profesor_id == $grupo-&gt;profesor_id) {\n                    $mensaje .= \"Profesor asignado a grupo {$conflicto-&gt;nombre_completo}. \";\n                }\n            }\n\n            throw new \\Exception($mensaje);\n        }\n    });\n}\n</code></pre> <p>El hook autom\u00e1tico valida la capacidad del aula y detecta conflictos de horario antes de guardar cualquier cambio en el grupo, previniendo inconsistencias en la configuraci\u00f3n acad\u00e9mica.</p>"},{"location":"sprints/sprint-4/grupo/#gestion-de-letras-disponibles","title":"Gesti\u00f3n de Letras Disponibles","text":""},{"location":"sprints/sprint-4/grupo/#asignacion-automatica-de-letras","title":"Asignaci\u00f3n Autom\u00e1tica de Letras","text":"<pre><code>public static function letrasDisponibles($nivel, $periodoId)\n{\n    $letrasOcupadas = self::where('nivel_ingles', $nivel)\n        -&gt;where('periodo_id', $periodoId)\n        -&gt;pluck('letra_grupo')\n        -&gt;toArray();\n\n    return array_diff(self::LETRAS_GRUPO, $letrasOcupadas);\n}\n</code></pre> <p>Este m\u00e9todo identifica las letras disponibles para nuevos grupos dentro de un nivel y periodo espec\u00edficos, facilitando la creaci\u00f3n de grupos con identificadores \u00fanicos.</p>"},{"location":"sprints/sprint-4/grupo/#impacto-de-la-reestructuracion","title":"Impacto de la Reestructuraci\u00f3n","text":"<p>La integraci\u00f3n obligatoria con el modelo Periodo transform\u00f3 significativamente la gesti\u00f3n de grupos:</p> <ul> <li>Contextualizaci\u00f3n completa dentro de ciclos acad\u00e9micos espec\u00edficos</li> <li>Coordinaci\u00f3n autom\u00e1tica con el estado del periodo acad\u00e9mico</li> <li>Validaciones basadas en el contexto temporal del periodo</li> <li>Capacidad de generar reportes hist\u00f3ricos por periodo</li> <li>Prevenci\u00f3n de operaciones fuera de contexto temporal</li> </ul> <p>Esta arquitectura asegura que cada grupo opere dentro del contexto temporal correcto, proporcionando coherencia organizacional y facilitando la gesti\u00f3n acad\u00e9mica institucional a trav\u00e9s de relaciones jer\u00e1rquicas claras y validadas.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/","title":"HorarioPeriodo - Modelo Pivote de Reestructuraci\u00f3n","text":""},{"location":"sprints/sprint-4/horarioPeriodo/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo HorarioPeriodo constituye el componente fundamental de la reestructuraci\u00f3n arquitect\u00f3nica del Sprint 4. Funciona como modelo pivote que establece la relaci\u00f3n muchos-a-muchos entre periodos acad\u00e9micos y horarios base, permitiendo la reutilizaci\u00f3n contextual de horarios mientras mantiene instant\u00e1neas espec\u00edficas por periodo.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#estructura-de-datos","title":"Estructura de Datos","text":""},{"location":"sprints/sprint-4/horarioPeriodo/#tabla-y-campos-principales","title":"Tabla y Campos Principales","text":"<pre><code>protected $table = 'horarios_periodo';\n\nprotected $fillable = [\n    'periodo_id',\n    'horario_base_id', \n    'nombre',\n    'tipo',\n    'dias',\n    'hora_inicio',\n    'hora_fin',\n    'activo'\n];\n</code></pre> <p>La tabla horarios_periodo act\u00faa como tabla pivote extendida que almacena tanto las relaciones como copias instant\u00e1neas de los datos del horario base. Esta estrategia permite que los horarios base puedan ser reutilizados en m\u00faltiples periodos acad\u00e9micos mientras se preserva la informaci\u00f3n espec\u00edfica de cada instancia.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#sistema-de-tipado-de-datos","title":"Sistema de Tipado de Datos","text":"<pre><code>protected $casts = [\n    'dias' =&gt; 'array',\n    'hora_inicio' =&gt; 'datetime:H:i:s',\n    'hora_fin' =&gt; 'datetime:H:i:s',\n    'activo' =&gt; 'boolean',\n];\n</code></pre> <p>El modelo implementa un sistema de conversi\u00f3n de tipos avanzado que transforma autom\u00e1ticamente el campo 'dias' de formato JSON a array nativo de PHP, facilitando la manipulaci\u00f3n de datos. Los campos de tiempo se convierten a objetos DateTime con formato espec\u00edfico, mientras que el campo 'activo' se maneja como booleano para control de estado.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#relaciones-del-modelo","title":"Relaciones del Modelo","text":""},{"location":"sprints/sprint-4/horarioPeriodo/#relacion-con-periodo-academico","title":"Relaci\u00f3n con Periodo Acad\u00e9mico","text":"<pre><code>public function periodo()\n{\n    return $this-&gt;belongsTo(Periodo::class);\n}\n</code></pre> <p>Cada instancia de HorarioPeriodo pertenece a un periodo acad\u00e9mico espec\u00edfico, estableciendo la dependencia contextual fundamental de la reestructuraci\u00f3n. Esta relaci\u00f3n garantiza que todos los horarios operen dentro del contexto de un periodo acad\u00e9mico definido.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#relacion-con-horario-base","title":"Relaci\u00f3n con Horario Base","text":"<pre><code>public function horarioBase()\n{\n    return $this-&gt;belongsTo(Horario::class, 'horario_base_id');\n}\n</code></pre> <p>La relaci\u00f3n con el horario base permite mantener el v\u00ednculo con la definici\u00f3n original del horario, facilitando la trazabilidad y posibles actualizaciones mientras se preserva la instant\u00e1nea espec\u00edfica del periodo.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#relacion-con-grupos","title":"Relaci\u00f3n con Grupos","text":"<pre><code>public function grupos()\n{\n    return $this-&gt;hasMany(Grupo::class, 'horario_periodo_id');\n}\n</code></pre> <p>Los grupos establecen relaci\u00f3n directa con las instancias espec\u00edficas de HorarioPeriodo, asegurando que cada grupo quede asociado a un horario contextualizado dentro de un periodo acad\u00e9mico particular.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#sistema-de-instantaneas","title":"Sistema de Instant\u00e1neas","text":""},{"location":"sprints/sprint-4/horarioPeriodo/#estrategia-de-copia-de-datos","title":"Estrategia de Copia de Datos","text":"<p>El modelo implementa una estrategia de instant\u00e1neas que copia los campos cr\u00edticos del horario base ('nombre', 'tipo', 'dias', 'hora_inicio', 'hora_fin') en cada instancia de HorarioPeriodo. Este enfoque proporciona:</p> <ul> <li>Inmutabilidad de datos hist\u00f3ricos una vez asignados a grupos</li> <li>Independencia de modificaciones futuras en horarios base</li> <li>Preservaci\u00f3n del contexto temporal espec\u00edfico de cada periodo</li> <li>Capacidad de auditor\u00eda y trazabilidad completa</li> </ul>"},{"location":"sprints/sprint-4/horarioPeriodo/#metodos-de-formateo-de-datos","title":"M\u00e9todos de Formateo de Datos","text":""},{"location":"sprints/sprint-4/horarioPeriodo/#formateo-de-dias-de-la-semana","title":"Formateo de D\u00edas de la Semana","text":"<pre><code>public function getDiasFormateadosAttribute()\n{\n    if (!$this-&gt;dias) return '';\n\n    $diasMap = [\n        'Lunes' =&gt; 'Lun',\n        'Martes' =&gt; 'Mar', \n        'Mi\u00e9rcoles' =&gt; 'Mi\u00e9',\n        'Jueves' =&gt; 'Jue',\n        'Viernes' =&gt; 'Vie',\n        'S\u00e1bado' =&gt; 'S\u00e1b'\n    ];\n\n    return collect($this-&gt;dias)-&gt;map(function ($dia) use ($diasMap) {\n        return $diasMap[$dia] ?? $dia;\n    })-&gt;implode(', ');\n}\n</code></pre> <p>Este m\u00e9todo transforma el array de d\u00edas almacenado en formato completo a abreviaturas estandarizadas, optimizando la presentaci\u00f3n visual en interfaces de usuario sin perder la informaci\u00f3n original.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#representacion-completa-del-horario","title":"Representaci\u00f3n Completa del Horario","text":"<pre><code>public function getHorarioCompletoAttribute()\n{\n    return \"{$this-&gt;dias_formateados} {$this-&gt;hora_inicio-&gt;format('H:i')} - {$this-&gt;hora_fin-&gt;format('H:i')}\";\n}\n</code></pre> <p>Proporciona una representaci\u00f3n legible del horario que combina d\u00edas formateados con el rango horario, facilitando la identificaci\u00f3n r\u00e1pida en listados y selecciones.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#metodos-de-utilidad","title":"M\u00e9todos de Utilidad","text":""},{"location":"sprints/sprint-4/horarioPeriodo/#calculo-de-duracion","title":"C\u00e1lculo de Duraci\u00f3n","text":"<pre><code>public function getDuracionAttribute()\n{\n    return $this-&gt;hora_inicio-&gt;diffInHours($this-&gt;hora_fin);\n}\n</code></pre> <p>Calcula autom\u00e1ticamente la duraci\u00f3n en horas del bloque horario, proporcionando informaci\u00f3n valiosa para la planificaci\u00f3n acad\u00e9mica y validaciones de disponibilidad.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#filtrado-por-estado-activo","title":"Filtrado por Estado Activo","text":"<pre><code>public function scopeActivos($query)\n{\n    return $query-&gt;where('activo', true);\n}\n</code></pre> <p>Permite filtrar exclusivamente los horarios activos dentro de un periodo, optimizando las consultas para operaciones de asignaci\u00f3n y gesti\u00f3n en curso.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#descripcion-contextual","title":"Descripci\u00f3n Contextual","text":"<pre><code>public function getDescripcionCompletaAttribute()\n{\n    return $this-&gt;nombre . ' - ' . $this-&gt;periodo-&gt;nombre_periodo;\n}\n</code></pre> <p>Genera una descripci\u00f3n que contextualiza el horario dentro de su periodo acad\u00e9mico, mejorando la identificaci\u00f3n en interfaces administrativas.</p>"},{"location":"sprints/sprint-4/horarioPeriodo/#impacto-arquitectonico","title":"Impacto Arquitect\u00f3nico","text":"<p>La implementaci\u00f3n del modelo HorarioPeriodo resolvi\u00f3 desaf\u00edos cr\u00edticos de la arquitectura anterior:</p> <ul> <li>Separaci\u00f3n de preocupaciones entre definici\u00f3n base y contexto operativo</li> <li>Preservaci\u00f3n de datos hist\u00f3ricos contra modificaciones futuras</li> <li>Reutilizaci\u00f3n eficiente de horarios base entre m\u00faltiples periodos</li> <li>Contextualizaci\u00f3n completa de todas las operaciones acad\u00e9micas</li> <li>Capacidad de auditor\u00eda y trazabilidad temporal</li> </ul> <p>Esta arquitectura permite que un horario base definido una vez pueda ser reutilizado en m\u00faltiples periodos acad\u00e9micos con estados espec\u00edficos, mientras se mantienen instant\u00e1neas inmutables para cada uso contextual. El modelo act\u00faa como puente entre la definici\u00f3n est\u00e1tica de horarios y la ejecuci\u00f3n din\u00e1mica dentro de periodos acad\u00e9micos espec\u00edficos, estableciendo las bases para un sistema escalable y mantenible.</p>"},{"location":"sprints/sprint-4/periodo/","title":"Periodo Acad\u00e9mico - Modelo Principal","text":""},{"location":"sprints/sprint-4/periodo/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo Periodo representa el n\u00facleo central del sistema GLOTTY despu\u00e9s de la reestructuraci\u00f3n arquitect\u00f3nica del Sprint 4. Constituye la entidad ra\u00edz de la que dependen todas las operaciones acad\u00e9micas, estableciendo una jerarqu\u00eda clara y coherente en la gesti\u00f3n institucional.</p>"},{"location":"sprints/sprint-4/periodo/#estructura-del-modelo","title":"Estructura del Modelo","text":""},{"location":"sprints/sprint-4/periodo/#definicion-de-campos","title":"Definici\u00f3n de Campos","text":"<pre><code>protected $fillable = [\n    'nombre_periodo',\n    'fecha_inicio', \n    'fecha_fin',\n    'estado'\n];\n\nprotected $casts = [\n    'fecha_inicio' =&gt; 'date',\n    'fecha_fin' =&gt; 'date',\n];\n</code></pre> <p>El modelo gestiona los periodos acad\u00e9micos mediante cuatro campos fundamentales. El campo 'nombre_periodo' identifica de manera \u00fanica cada ciclo escolar, mientras que 'fecha_inicio' y 'fecha_fin' definen el rango temporal del periodo. El campo 'estado' controla el flujo de vida del periodo acad\u00e9mico, permitiendo transiciones entre diferentes fases operativas.</p>"},{"location":"sprints/sprint-4/periodo/#estados-del-periodo-academico","title":"Estados del Periodo Acad\u00e9mico","text":"<pre><code>const ESTADOS = [\n    'configuracion' =&gt; 'En Configuraci\u00f3n',\n    'preregistros_activos' =&gt; 'Preregistros Abiertos',\n    'preregistros_cerrados' =&gt; 'Preregistros Cerrados',\n    'en_curso' =&gt; 'En Curso',\n    'finalizado' =&gt; 'Finalizado',\n    'cancelado' =&gt; 'Cancelado'\n];\n</code></pre> <p>El sistema implementa seis estados que representan el ciclo de vida completo de un periodo acad\u00e9mico. Cada estado tiene implicaciones espec\u00edficas sobre las operaciones permitidas, creando un flujo de trabajo estructurado desde la configuraci\u00f3n inicial hasta la finalizaci\u00f3n o cancelaci\u00f3n.</p>"},{"location":"sprints/sprint-4/periodo/#relaciones-arquitectonicas","title":"Relaciones Arquitect\u00f3nicas","text":""},{"location":"sprints/sprint-4/periodo/#relacion-con-horarios","title":"Relaci\u00f3n con Horarios","text":"<pre><code>public function horariosPeriodo() { \n    return $this-&gt;hasMany(HorarioPeriodo::class); \n}\n\npublic function horariosBase() { \n    return $this-&gt;belongsToMany(Horario::class, 'horarios_periodo', 'periodo_id', 'horario_base_id')\n                -&gt;withPivot('activo')\n                -&gt;withTimestamps(); \n}\n</code></pre> <p>La relaci\u00f3n con horarios se implementa mediante el modelo pivote HorarioPeriodo, que permite la reutilizaci\u00f3n de horarios base entre diferentes periodos acad\u00e9micos. Esta arquitectura muchos-a-muchos optimiza la gesti\u00f3n temporal al permitir que un mismo horario pueda ser asociado a m\u00faltiples periodos con estados espec\u00edficos.</p>"},{"location":"sprints/sprint-4/periodo/#relacion-con-grupos-y-preregistros","title":"Relaci\u00f3n con Grupos y Preregistros","text":"<pre><code>public function grupos() { \n    return $this-&gt;hasMany(Grupo::class); \n}\n\npublic function preregistros() { \n    return $this-&gt;hasMany(Preregistro::class); \n}\n</code></pre> <p>Los grupos y preregistros establecen relaciones de dependencia directa con el periodo acad\u00e9mico. Esta estructura garantiza que toda la actividad acad\u00e9mica quede contextualizada dentro de un periodo espec\u00edfico, proporcionando coherencia organizacional y facilitando la gesti\u00f3n hist\u00f3rica de datos.</p>"},{"location":"sprints/sprint-4/periodo/#sistema-de-consultas-por-estado","title":"Sistema de Consultas por Estado","text":""},{"location":"sprints/sprint-4/periodo/#scopes-de-filtrado","title":"Scopes de Filtrado","text":"<p>El modelo incluye scopes especializados para filtrar periodos seg\u00fan su estado operativo:</p> <ul> <li>scopeActivo: Periodos actualmente en curso</li> <li>scopeConPreRegistrosActivos: Periodos que aceptan preregistros</li> <li>scopeConPreRegistrosCerrados: Periodos con preregistros finalizados</li> <li>scopeFinalizados: Periodos acad\u00e9micamente completados</li> <li>scopeCancelados: Periodos cancelados antes de su finalizaci\u00f3n</li> </ul> <p>Estos scopes facilitan la consulta de periodos seg\u00fan necesidades espec\u00edficas del negocio, optimizando las operaciones de b\u00fasqueda y filtrado.</p>"},{"location":"sprints/sprint-4/periodo/#gestion-del-ciclo-de-vida","title":"Gesti\u00f3n del Ciclo de Vida","text":""},{"location":"sprints/sprint-4/periodo/#metodos-de-verificacion-de-estado","title":"M\u00e9todos de Verificaci\u00f3n de Estado","text":"<p>El modelo proporciona m\u00e9todos booleanos para verificar el estado actual del periodo:</p> <ul> <li>estaEnConfiguracion: Verifica si el periodo est\u00e1 en fase de configuraci\u00f3n inicial</li> <li>preregistrosAbiertos: Determina si el periodo acepta preregistros de estudiantes</li> <li>preregistrosCerrados: Indica si el periodo ha cerrado los preregistros</li> <li>estaEnCurso: Confirma si el periodo est\u00e1 activo acad\u00e9micamente</li> <li>estaFinalizado: Verifica si el periodo ha concluido</li> <li>estaCancelado: Determina si el periodo fue cancelado</li> </ul>"},{"location":"sprints/sprint-4/periodo/#transiciones-de-estado-controladas","title":"Transiciones de Estado Controladas","text":"<pre><code>public function puedeCambiarA($nuevoEstado)\n{\n    if (in_array($this-&gt;estado, ['finalizado', 'cancelado'])) {\n        return false;\n    }\n\n    if (in_array($nuevoEstado, ['finalizado', 'cancelado'])) {\n        return true;\n    }\n\n    $transicionesPermitidas = [\n        'configuracion' =&gt; ['preregistros_activos', 'preregistros_cerrados', 'en_curso'],\n        'preregistros_activos' =&gt; ['configuracion', 'preregistros_cerrados', 'en_curso'],\n        'preregistros_cerrados' =&gt; ['preregistros_activos', 'en_curso', 'configuracion'],\n        'en_curso' =&gt; ['preregistros_cerrados', 'preregistros_activos', 'configuracion'],\n    ];\n\n    return in_array($nuevoEstado, $transicionesPermitidas[$this-&gt;estado] ?? []);\n}\n</code></pre> <p>El m\u00e9todo puedeCambiarA implementa un sistema de transiciones de estado controlado que permite flexibilidad operativa manteniendo la integridad del flujo de trabajo. Los estados finalizados y cancelados son terminales, mientras que los estados activos permiten transiciones bidireccionales seg\u00fan las necesidades acad\u00e9micas.</p>"},{"location":"sprints/sprint-4/periodo/#metodos-de-utilidad","title":"M\u00e9todos de Utilidad","text":""},{"location":"sprints/sprint-4/periodo/#calculo-de-duracion","title":"C\u00e1lculo de Duraci\u00f3n","text":"<pre><code>public function getDiasDuracionAttribute(): int\n{\n    return $this-&gt;fecha_inicio-&gt;diffInDays($this-&gt;fecha_fin);\n}\n</code></pre> <p>Calcula autom\u00e1ticamente la duraci\u00f3n en d\u00edas del periodo acad\u00e9mico, proporcionando informaci\u00f3n valiosa para la planificaci\u00f3n y gesti\u00f3n temporal.</p>"},{"location":"sprints/sprint-4/periodo/#validaciones-de-eliminacion","title":"Validaciones de Eliminaci\u00f3n","text":"<pre><code>public function puedeEliminarse()\n{\n    return $this-&gt;estaEnConfiguracion() &amp;&amp; \n        $this-&gt;grupos()-&gt;count() === 0 &amp;&amp;\n        $this-&gt;preregistros()-&gt;count() === 0;\n}\n</code></pre> <p>Restringe la eliminaci\u00f3n de periodos a aquellos que se encuentran en estado de configuraci\u00f3n y no tienen grupos o preregistros asociados, protegiendo la integridad de los datos acad\u00e9micos.</p>"},{"location":"sprints/sprint-4/periodo/#control-de-operaciones","title":"Control de Operaciones","text":"<p>Los m\u00e9todos permiteGestionHorarios y permitePreRegistrosEstudiantes controlan el acceso a funcionalidades cr\u00edticas del sistema bas\u00e1ndose en el estado actual del periodo, asegurando que las operaciones solo se realicen en contextos apropiados.</p>"},{"location":"sprints/sprint-4/periodo/#impacto-arquitectonico","title":"Impacto Arquitect\u00f3nico","text":"<p>La reestructuraci\u00f3n centrada en el modelo Periodo transform\u00f3 significativamente la arquitectura del sistema GLOTTY. Al establecer el periodo acad\u00e9mico como entidad ra\u00edz, se logr\u00f3:</p> <ul> <li>Coherencia organizacional mediante relaciones jer\u00e1rquicas claras</li> <li>Contextualizaci\u00f3n de todas las operaciones acad\u00e9micas</li> <li>Reutilizaci\u00f3n eficiente de recursos como horarios entre periodos</li> <li>Gesti\u00f3n hist\u00f3rica estructurada de datos acad\u00e9micos</li> <li>Escalabilidad para futuras expansiones del sistema</li> </ul> <p>Esta arquitectura garantiza que cada acci\u00f3n dentro del sistema quede referenciada a un periodo acad\u00e9mico espec\u00edfico, proporcionando trazabilidad completa y facilitando la administraci\u00f3n institucional.</p>"},{"location":"sprints/sprint-4/periodoController/","title":"PeriodoController - Controlador Principal del Sistema","text":""},{"location":"sprints/sprint-4/periodoController/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El PeriodoController constituye el n\u00facleo central del sistema GLOTTY despu\u00e9s de la reestructuraci\u00f3n arquitect\u00f3nica del Sprint 4. Como controlador principal, gestiona el ciclo de vida completo de los periodos acad\u00e9micos y coordina todas las operaciones relacionadas con la gesti\u00f3n institucional.</p>"},{"location":"sprints/sprint-4/periodoController/#gestion-del-ciclo-de-vida-del-periodo","title":"Gesti\u00f3n del Ciclo de Vida del Periodo","text":""},{"location":"sprints/sprint-4/periodoController/#listado-y-consulta-de-periodos","title":"Listado y Consulta de Periodos","text":"<pre><code>public function index()\n{\n    $query = Periodo::withCount([\n        'grupos',\n        'preregistros',\n        'preregistros as preregistros_pagados_count' =&gt; function($query) {\n            $query-&gt;where('pago_estado', 'pagado');\n        },\n        'horariosPeriodo as horarios_activos_count' =&gt; function($query) {\n            $query-&gt;where('activo', true);\n        }\n    ])-&gt;orderBy('fecha_inicio', 'desc');\n\n    if (request('estado')) {\n        $query-&gt;where('estado', request('estado'));\n    }\n\n    $periodos = $query-&gt;paginate(10);\n\n    return view('coordinador.periodos.index', compact('periodos'));\n}\n</code></pre> <p>El m\u00e9todo index implementa un sistema de consulta avanzado que incluye conteos relacionados y filtrado por estado. Proporciona una visi\u00f3n completa de todos los periodos acad\u00e9micos con m\u00e9tricas clave para la toma de decisiones.</p>"},{"location":"sprints/sprint-4/periodoController/#creacion-de-nuevos-periodos","title":"Creaci\u00f3n de Nuevos Periodos","text":"<pre><code>public function store(Request $request)\n{\n    $request-&gt;validate([\n        'nombre_periodo' =&gt; 'required|string|max:50|unique:periodos,nombre_periodo',\n        'fecha_inicio' =&gt; 'required|date|after:today',\n        'fecha_fin' =&gt; 'required|date|after:fecha_inicio',\n    ]);\n\n    try {\n        DB::beginTransaction();\n\n        $periodo = Periodo::create([\n            'nombre_periodo' =&gt; $request-&gt;nombre_periodo,\n            'fecha_inicio' =&gt; $request-&gt;fecha_inicio,\n            'fecha_fin' =&gt; $request-&gt;fecha_fin,\n            'estado' =&gt; 'configuracion'\n        ]);\n\n        DB::commit();\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', 'Per\u00edodo creado exitosamente. Ahora puedes agregar horarios desde plantillas.');\n\n    } catch (\\Exception $e) {\n        DB::rollBack();\n\n        Log::error('Error creando per\u00edodo: ' . $e-&gt;getMessage(), [\n            'request_data' =&gt; $request-&gt;all(),\n            'error_trace' =&gt; $e-&gt;getTraceAsString()\n        ]);\n\n        return redirect()-&gt;back()\n            -&gt;with('error', 'Error al crear el per\u00edodo: ' . $e-&gt;getMessage())\n            -&gt;withInput();\n    }\n}\n</code></pre> <p>La creaci\u00f3n de periodos implementa transacciones de base de datos para garantizar la consistencia y registra eventos detallados para auditor\u00eda. Las validaciones aseguran que los periodos se creen con fechas futuras y nombres \u00fanicos.</p>"},{"location":"sprints/sprint-4/periodoController/#visualizacion-detallada-del-periodo","title":"Visualizaci\u00f3n Detallada del Periodo","text":"<pre><code>public function show(Periodo $periodo)\n{\n    $horariosPeriodo = $periodo-&gt;horariosPeriodo()\n                            -&gt;with('horarioBase')\n                            -&gt;orderBy('tipo')\n                            -&gt;orderBy('hora_inicio')\n                            -&gt;get();\n\n    $estadisticas = $this-&gt;obtenerEstadisticasDetalladas($periodo-&gt;id);\n\n    $horariosBaseDisponibles = Horario::where('activo', true)\n        -&gt;whereNotIn('id', function($query) use ($periodo) {\n            $query-&gt;select('horario_base_id')\n                  -&gt;from('horarios_periodo')\n                  -&gt;where('periodo_id', $periodo-&gt;id);\n        })\n        -&gt;get();\n\n    return view('coordinador.periodos.show', compact(\n        'periodo', \n        'horariosPeriodo', \n        'estadisticas',\n        'horariosBaseDisponibles'\n    ));\n}\n</code></pre> <p>El m\u00e9todo show proporciona una vista completa del periodo que incluye horarios contextualizados, estad\u00edsticas detalladas y horarios base disponibles para agregar, facilitando la gesti\u00f3n integral del periodo acad\u00e9mico.</p>"},{"location":"sprints/sprint-4/periodoController/#gestion-de-horarios-contextualizados","title":"Gesti\u00f3n de Horarios Contextualizados","text":""},{"location":"sprints/sprint-4/periodoController/#agregar-horarios-desde-plantillas","title":"Agregar Horarios desde Plantillas","text":"<pre><code>public function agregarHorarios(Request $request, Periodo $periodo)\n{\n    if ($periodo-&gt;estaFinalizado() || $periodo-&gt;estaCancelado()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden agregar horarios en periodos finalizados o cancelados');\n    }\n\n    $request-&gt;validate([\n        'horarios_base_ids' =&gt; 'required|array|min:1',\n        'horarios_base_ids.*' =&gt; 'exists:horarios,id'\n    ]);\n\n    try {\n        DB::transaction(function () use ($periodo, $request) {\n            foreach ($request-&gt;horarios_base_ids as $horarioBaseId) {\n                if (!$periodo-&gt;horariosPeriodo()-&gt;where('horario_base_id', $horarioBaseId)-&gt;exists()) {\n                    $horarioBase = Horario::find($horarioBaseId);\n\n                    HorarioPeriodo::create([\n                        'periodo_id' =&gt; $periodo-&gt;id,\n                        'horario_base_id' =&gt; $horarioBaseId,\n                        'nombre' =&gt; $this-&gt;generarNombreHorarioPeriodo($horarioBase, $periodo),\n                        'tipo' =&gt; $horarioBase-&gt;tipo,\n                        'dias' =&gt; $horarioBase-&gt;dias,\n                        'hora_inicio' =&gt; $horarioBase-&gt;hora_inicio,\n                        'hora_fin' =&gt; $horarioBase-&gt;hora_fin,\n                        'activo' =&gt; true\n                    ]);\n                }\n            }\n        });\n\n        Log::info('Horarios agregados a periodo', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_actual' =&gt; $periodo-&gt;estado,\n            'horarios_count' =&gt; count($request-&gt;horarios_base_ids)\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', 'Horarios agregados exitosamente al periodo.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error agregando horarios: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al agregar horarios: ' . $e-&gt;getMessage());\n    }\n}\n</code></pre> <p>Este m\u00e9todo implementa la estrategia de reutilizaci\u00f3n de horarios base mediante la creaci\u00f3n de instancias contextualizadas en HorarioPeriodo. La l\u00f3gica evita duplicados y genera nombres descriptivos que incluyen referencia al periodo.</p>"},{"location":"sprints/sprint-4/periodoController/#gestion-de-horarios-del-periodo","title":"Gesti\u00f3n de Horarios del Periodo","text":"<pre><code>public function eliminarHorarioPeriodo(Periodo $periodo, HorarioPeriodo $horarioPeriodo)\n{\n    if ($periodo-&gt;estaFinalizado() || $periodo-&gt;estaCancelado()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden eliminar horarios en periodos finalizados o cancelados');\n    }\n\n    if ($horarioPeriodo-&gt;periodo_id !== $periodo-&gt;id) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'El horario no pertenece a este periodo.');\n    }\n\n    if ($horarioPeriodo-&gt;grupos()-&gt;exists()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se puede eliminar el horario porque tiene grupos asignados.');\n    }\n\n    try {\n        $nombreHorario = $horarioPeriodo-&gt;nombre;\n        $horarioPeriodo-&gt;delete();\n\n        Log::info('Horario periodo eliminado', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_actual' =&gt; $periodo-&gt;estado,\n            'horario_periodo_id' =&gt; $horarioPeriodo-&gt;id,\n            'nombre' =&gt; $nombreHorario\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.show', $periodo)\n            -&gt;with('success', \"Horario \\\"{$nombreHorario}\\\" eliminado del periodo.\");\n\n    } catch (\\Exception $e) {\n        Log::error('Error eliminando horario periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al eliminar el horario.');\n    }\n}\n</code></pre> <p>La eliminaci\u00f3n de horarios incluye validaciones de integridad referencial que previenen la eliminaci\u00f3n de horarios con grupos asignados, protegiendo la consistencia de los datos acad\u00e9micos.</p>"},{"location":"sprints/sprint-4/periodoController/#transiciones-de-estado-controladas","title":"Transiciones de Estado Controladas","text":""},{"location":"sprints/sprint-4/periodoController/#activacion-de-preregistros-con-validaciones","title":"Activaci\u00f3n de Preregistros con Validaciones","text":"<pre><code>public function activarPreregistros(Periodo $periodo)\n{\n    if (!$periodo-&gt;puedeCambiarA('preregistros_activos')) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede activar preregistros desde '{$periodo-&gt;estado_legible}'\"\n        );\n    }\n\n    if ($periodo-&gt;horariosPeriodo()-&gt;where('activo', true)-&gt;count() === 0) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden activar preregistros: Debe tener al menos un horario activo en el per\u00edodo.');\n    }\n\n    if (!\\App\\Models\\Aula::where('disponible', true)-&gt;exists()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden activar preregistros: Debe crear aulas disponibles en el sistema.');\n    }\n\n    if (!\\App\\Models\\Profesor::exists()) {\n        return redirect()-&gt;back()\n            -&gt;with('error', 'No se pueden activar preregistros: Debe tener profesores registrados en el sistema.');\n    }\n\n    try {\n        $periodo-&gt;update(['estado' =&gt; 'preregistros_activos']);\n\n        Log::info('Pre-registros activados', [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_anterior' =&gt; $periodo-&gt;getOriginal('estado'),\n            'horarios_activos' =&gt; $periodo-&gt;horariosPeriodo()-&gt;where('activo', true)-&gt;count(),\n            'aulas_disponibles' =&gt; \\App\\Models\\Aula::where('disponible', true)-&gt;count(),\n            'total_profesores' =&gt; \\App\\Models\\Profesor::count()\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', 'Pre-registros activados. Los estudiantes ya pueden registrarse.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error activando pre-registros: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al activar pre-registros.');\n    }\n}\n</code></pre> <p>La activaci\u00f3n de preregistros implementa validaciones exhaustivas que garantizan la viabilidad operativa del periodo, verificando la existencia de horarios activos, aulas disponibles y profesores registrados.</p>"},{"location":"sprints/sprint-4/periodoController/#inicio-del-periodo-con-automatizacion","title":"Inicio del Periodo con Automatizaci\u00f3n","text":"<pre><code>public function iniciarPeriodo(Periodo $periodo)\n{\n    if (!$periodo-&gt;puedeCambiarA('en_curso')) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede iniciar periodo desde '{$periodo-&gt;estado_legible}'\"\n        );\n    }\n\n    try {\n        DB::transaction(function () use ($periodo) {\n            $estadoAnterior = $periodo-&gt;estado;\n            $periodo-&gt;update(['estado' =&gt; 'en_curso']);\n\n            $preregistrosActualizados = $periodo-&gt;preregistros()\n                -&gt;where('estado', 'asignado')\n                -&gt;whereNotNull('grupo_asignado_id')\n                -&gt;update(['estado' =&gt; 'cursando']);\n\n            $gruposActualizados = $periodo-&gt;grupos()\n                -&gt;where('estado', 'activo')\n                -&gt;update(['estado' =&gt; 'en_curso']);\n\n            Log::info('Periodo iniciado con automatizaci\u00f3n', [\n                'periodo_id' =&gt; $periodo-&gt;id,\n                'estado_anterior' =&gt; $estadoAnterior,\n                'preregistros_actualizados' =&gt; $preregistrosActualizados,\n                'grupos_actualizados' =&gt; $gruposActualizados\n            ]);\n        });\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', 'Periodo iniciado exitosamente. Los estudiantes asignados ahora est\u00e1n en curso.');\n\n    } catch (\\Exception $e) {\n        Log::error('Error iniciando periodo: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al iniciar periodo.');\n    }\n}\n</code></pre> <p>El inicio del periodo automatiza la transici\u00f3n de estados de preregistros y grupos, actualizando masivamente a los estudiantes asignados al estado \"cursando\" y a los grupos al estado \"en_curso\".</p>"},{"location":"sprints/sprint-4/periodoController/#sistema-unificado-de-cambio-de-estado","title":"Sistema Unificado de Cambio de Estado","text":"<pre><code>public function cambiarEstado(Request $request, Periodo $periodo)\n{\n    $request-&gt;validate([\n        'nuevo_estado' =&gt; 'required|in:configuracion,preregistros_activos,preregistros_cerrados,en_curso,finalizado,cancelado'\n    ]);\n\n    $nuevoEstado = $request-&gt;nuevo_estado;\n\n    if (!$periodo-&gt;puedeCambiarA($nuevoEstado)) {\n        return redirect()-&gt;back()-&gt;with('error', \n            \"No se puede cambiar de '{$periodo-&gt;estado_legible}' a '\" . \n            ($periodo::ESTADOS[$nuevoEstado] ?? $nuevoEstado) . \"'\"\n        );\n    }\n\n    if ($nuevoEstado === 'preregistros_activos') {\n        if ($periodo-&gt;horariosPeriodo()-&gt;where('activo', true)-&gt;count() === 0) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'No se pueden activar preregistros: Debe tener al menos un horario activo en el per\u00edodo.');\n        }\n\n        if (!\\App\\Models\\Aula::where('disponible', true)-&gt;exists()) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'No se pueden activar preregistros: Debe crear aulas disponibles en el sistema.');\n        }\n\n        if (!\\App\\Models\\Profesor::exists()) {\n            return redirect()-&gt;back()\n                -&gt;with('error', 'No se pueden activar preregistros: Debe tener profesores registrados en el sistema.');\n        }\n    }\n\n    try {\n        DB::transaction(function () use ($periodo, $nuevoEstado) {\n            $estadoActual = $periodo-&gt;estado;\n\n            switch ($nuevoEstado) {\n                case 'en_curso':\n                    $periodo-&gt;preregistros()\n                        -&gt;where('estado', 'asignado')\n                        -&gt;whereNotNull('grupo_asignado_id')\n                        -&gt;update(['estado' =&gt; 'cursando']);\n\n                    $periodo-&gt;grupos()\n                        -&gt;where('estado', 'activo')\n                        -&gt;update(['estado' =&gt; 'en_curso']);\n                    break;\n\n                case 'finalizado':\n                    if ($estadoActual === 'en_curso') {\n                        $periodo-&gt;grupos()-&gt;where('estado', 'en_curso')-&gt;update(['estado' =&gt; 'finalizado']);\n                        $periodo-&gt;preregistros()-&gt;where('estado', 'cursando')-&gt;update(['estado' =&gt; 'finalizado']);\n                    }\n                    break;\n\n                case 'cancelado':\n                    $periodo-&gt;grupos()-&gt;update(['estado' =&gt; 'cancelado']);\n                    $periodo-&gt;preregistros()\n                        -&gt;whereIn('estado', ['asignado', 'cursando'])\n                        -&gt;update([\n                            'estado' =&gt; 'pendiente',\n                            'grupo_asignado_id' =&gt; null\n                        ]);\n                    break;\n            }\n\n            $periodo-&gt;update(['estado' =&gt; $nuevoEstado]);\n        });\n\n        Log::info(\"Estado cambiado\", [\n            'periodo_id' =&gt; $periodo-&gt;id,\n            'estado_anterior' =&gt; $periodo-&gt;getOriginal('estado'),\n            'nuevo_estado' =&gt; $nuevoEstado\n        ]);\n\n        return redirect()-&gt;route('coordinador.periodos.index')\n            -&gt;with('success', \"Estado actualizado: \" . $periodo-&gt;estado_legible);\n\n    } catch (\\Exception $e) {\n        Log::error('Error cambiando estado: ' . $e-&gt;getMessage());\n        return redirect()-&gt;back()-&gt;with('error', 'Error al cambiar estado: ' . $e-&gt;getMessage());\n    }\n}\n</code></pre> <p>El m\u00e9todo cambiarEstado proporciona una interfaz unificada para todas las transiciones de estado, incorporando l\u00f3gica espec\u00edfica para cada transici\u00f3n y manteniendo la consistencia de datos mediante transacciones.</p>"},{"location":"sprints/sprint-4/periodoController/#utilidades-y-metodos-de-soporte","title":"Utilidades y M\u00e9todos de Soporte","text":""},{"location":"sprints/sprint-4/periodoController/#generacion-de-nombres-de-horarios-contextualizados","title":"Generaci\u00f3n de Nombres de Horarios Contextualizados","text":"<pre><code>private function generarNombreHorarioPeriodo(Horario $horario, Periodo $periodo)\n{\n    $base = str_replace('Plantilla', '', $horario-&gt;nombre);\n    $base = trim($base);\n\n    return \"{$base} - {$periodo-&gt;nombre_periodo}\";\n}\n</code></pre> <p>Este m\u00e9todo genera nombres descriptivos para los horarios contextualizados que combinan informaci\u00f3n del horario base con referencia al periodo acad\u00e9mico.</p>"},{"location":"sprints/sprint-4/periodoController/#obtencion-de-estadisticas-detalladas","title":"Obtenci\u00f3n de Estad\u00edsticas Detalladas","text":"<pre><code>private function obtenerEstadisticasDetalladas($periodoId)\n{\n    return [\n        'total_grupos' =&gt; DB::table('grupos')-&gt;where('periodo_id', $periodoId)-&gt;count(),\n        'grupos_activos' =&gt; DB::table('grupos')-&gt;where('periodo_id', $periodoId)-&gt;where('estado', 'activo')-&gt;count(),\n        'total_preregistros' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;count(),\n        'preregistros_pagados' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;where('pago_estado', 'pagado')-&gt;count(),\n        'preregistros_con_prorroga' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;where('pago_estado', 'prorroga')-&gt;count(),\n        'estudiantes_activos' =&gt; DB::table('preregistros')-&gt;where('periodo_id', $periodoId)-&gt;where('estado', 'cursando')-&gt;count(),\n        'horarios_activos' =&gt; DB::table('horarios_periodo')-&gt;where('periodo_id', $periodoId)-&gt;where('activo', true)-&gt;count(),\n    ];\n}\n</code></pre> <p>Proporciona m\u00e9tricas completas del periodo para dashboards y reportes, incluyendo informaci\u00f3n sobre grupos, preregistros, estados de pago y horarios activos.</p>"},{"location":"sprints/sprint-4/periodoController/#impacto-arquitectonico","title":"Impacto Arquitect\u00f3nico","text":"<p>El PeriodoController representa la materializaci\u00f3n de la reestructuraci\u00f3n arquitect\u00f3nica centrada en periodos acad\u00e9micos:</p> <ul> <li>Centralizaci\u00f3n de todas las operaciones acad\u00e9micas alrededor del periodo</li> <li>Coordinaci\u00f3n autom\u00e1tica entre estados del periodo y entidades relacionadas</li> <li>Validaciones de viabilidad operativa antes de transiciones cr\u00edticas</li> <li>Gesti\u00f3n transaccional para mantener consistencia de datos</li> <li>Sistema de logging comprehensivo para auditor\u00eda y troubleshooting</li> <li>Reutilizaci\u00f3n eficiente de recursos mediante horarios contextualizados</li> </ul> <p>Esta arquitectura garantiza que cada operaci\u00f3n del sistema quede referenciada a un periodo acad\u00e9mico espec\u00edfico, proporcionando trazabilidad completa y facilitando la gesti\u00f3n institucional mediante relaciones jer\u00e1rquicas claras.</p>"},{"location":"sprints/sprint-4/preregistro/","title":"Preregistro - Gesti\u00f3n de Solicitudes Acad\u00e9micas","text":""},{"location":"sprints/sprint-4/preregistro/#descripcion-general","title":"Descripci\u00f3n General","text":"<p>El modelo Preregistro gestiona el proceso completo de solicitudes de inscripci\u00f3n de estudiantes dentro del sistema GLOTTY. Despu\u00e9s de la reestructuraci\u00f3n del Sprint 4, este modelo establece una relaci\u00f3n obligatoria con el periodo acad\u00e9mico, contextualizando todas las solicitudes dentro de un ciclo escolar espec\u00edfico y sincronizando su estado con el flujo del periodo.</p>"},{"location":"sprints/sprint-4/preregistro/#estructura-de-datos","title":"Estructura de Datos","text":""},{"location":"sprints/sprint-4/preregistro/#campos-principales-y-relaciones","title":"Campos Principales y Relaciones","text":"<pre><code>protected $fillable = [\n    'usuario_id',\n    'periodo_id',\n    'nivel_solicitado',\n    'horario_preferido_id',\n    'semestre_carrera',\n    'grupo_asignado_id',\n    'estado',\n    'pago_estado'\n];\n</code></pre> <p>El modelo captura toda la informaci\u00f3n necesaria para el proceso de preregistro, incluyendo la identificaci\u00f3n del estudiante, el periodo acad\u00e9mico objetivo, el nivel solicitado, preferencias de horario, y el estado tanto acad\u00e9mico como financiero de la solicitud.</p>"},{"location":"sprints/sprint-4/preregistro/#sistema-de-estados","title":"Sistema de Estados","text":""},{"location":"sprints/sprint-4/preregistro/#estados-academicos-del-preregistro","title":"Estados Acad\u00e9micos del Preregistro","text":"<pre><code>const ESTADOS = [\n    'pendiente' =&gt; 'Pendiente de Asignaci\u00f3n',\n    'asignado' =&gt; 'Asignado a Grupo',\n    'cursando' =&gt; 'Cursando',\n    'finalizado' =&gt; 'Finalizado',\n    'cancelado' =&gt; 'Cancelado'\n];\n</code></pre> <p>El flujo acad\u00e9mico sigue una progresi\u00f3n l\u00f3gica desde la solicitud inicial hasta la finalizaci\u00f3n o cancelaci\u00f3n. Cada estado representa una fase espec\u00edfica en el ciclo de vida del preregistro, con transiciones controladas que aseguran la integridad del proceso.</p>"},{"location":"sprints/sprint-4/preregistro/#estados-de-pago-con-prorroga","title":"Estados de Pago con Pr\u00f3rroga","text":"<pre><code>const PAGO_ESTADOS = [\n    'pendiente' =&gt; 'Pendiente de Pago',\n    'prorroga' =&gt; 'En Pr\u00f3rroga',\n    'pagado' =&gt; 'Pagado',\n    'rechazado' =&gt; 'Pago Rechazado'\n];\n</code></pre> <p>El sistema de pagos incorpora un estado de pr\u00f3rroga que permite flexibilidad en los plazos de pago mientras mantiene el control sobre el proceso financiero. Esta adici\u00f3n responde a necesidades operativas reales sin comprometer la gesti\u00f3n financiera.</p>"},{"location":"sprints/sprint-4/preregistro/#relaciones-contextualizadas","title":"Relaciones Contextualizadas","text":""},{"location":"sprints/sprint-4/preregistro/#relacion-con-periodo-academico","title":"Relaci\u00f3n con Periodo Acad\u00e9mico","text":"<pre><code>public function periodo()\n{\n    return $this-&gt;belongsTo(Periodo::class);\n}\n</code></pre> <p>La relaci\u00f3n obligatoria con el modelo Periodo constituye el cambio arquitect\u00f3nico m\u00e1s significativo. Cada preregistro queda vinculado a un periodo acad\u00e9mico espec\u00edfico, permitiendo la sincronizaci\u00f3n autom\u00e1tica de estados y la contextualizaci\u00f3n de todas las operaciones.</p>"},{"location":"sprints/sprint-4/preregistro/#relacion-con-horario-preferido","title":"Relaci\u00f3n con Horario Preferido","text":"<pre><code>public function horarioPreferido()\n{\n    return $this-&gt;belongsTo(HorarioPeriodo::class, 'horario_preferido_id');\n}\n</code></pre> <p>La preferencia de horario se establece mediante relaci\u00f3n con HorarioPeriodo, asegurando que las opciones presentadas al estudiante est\u00e9n contextualizadas dentro del periodo acad\u00e9mico activo.</p>"},{"location":"sprints/sprint-4/preregistro/#relacion-con-grupo-asignado","title":"Relaci\u00f3n con Grupo Asignado","text":"<pre><code>public function grupoAsignado()\n{\n    return $this-&gt;belongsTo(Grupo::class, 'grupo_asignado_id');\n}\n</code></pre> <p>Una vez asignado, el preregistro establece relaci\u00f3n con el grupo espec\u00edfico donde el estudiante cursar\u00e1, completando el proceso de inscripci\u00f3n.</p>"},{"location":"sprints/sprint-4/preregistro/#sistema-de-consultas-especializadas","title":"Sistema de Consultas Especializadas","text":""},{"location":"sprints/sprint-4/preregistro/#scopes-para-gestion-operativa","title":"Scopes para Gesti\u00f3n Operativa","text":"<p>El modelo incluye scopes optimizados para las operaciones m\u00e1s comunes:</p> <ul> <li>pendientes: Filtra solicitudes pendientes de asignaci\u00f3n</li> <li>pagados: Identifica preregistros con pago completado</li> <li>puedenAsignarse: Combina estado pendiente con estados de pago v\u00e1lidos (incluyendo pr\u00f3rroga)</li> <li>activos: Agrupa todos los estados acad\u00e9micos activos</li> <li>conProrroga: Espec\u00edfico para gestionar casos con extensi\u00f3n de pago</li> </ul> <p>Estos scopes facilitan la implementaci\u00f3n de l\u00f3gica de negocio compleja mediante consultas simples y legibles.</p>"},{"location":"sprints/sprint-4/preregistro/#logica-de-negocio-avanzada","title":"L\u00f3gica de Negocio Avanzada","text":""},{"location":"sprints/sprint-4/preregistro/#validaciones-de-asignacion","title":"Validaciones de Asignaci\u00f3n","text":"<pre><code>public function puedeSerAsignado()\n{\n    return $this-&gt;estado === 'pendiente' &amp;&amp; \n           in_array($this-&gt;pago_estado, ['pagado', 'prorroga']) &amp;&amp;\n           $this-&gt;periodo-&gt;aceptaPreRegistros();\n}\n</code></pre> <p>El m\u00e9todo valida m\u00faltiples condiciones para determinar si un preregistro puede ser asignado a un grupo: estado acad\u00e9mico pendiente, pago en estado v\u00e1lido (incluyendo pr\u00f3rroga), y periodo acad\u00e9mico que acepte preregistros activamente.</p>"},{"location":"sprints/sprint-4/preregistro/#sincronizacion-con-periodo-academico","title":"Sincronizaci\u00f3n con Periodo Acad\u00e9mico","text":"<pre><code>public function sincronizarConPeriodo()\n{\n    if ($this-&gt;periodo-&gt;estaEnCurso() &amp;&amp; $this-&gt;estaListoParaCursar()) {\n        $this-&gt;update(['estado' =&gt; 'cursando']);\n    }\n\n    if ($this-&gt;periodo-&gt;estaFinalizado() &amp;&amp; $this-&gt;estado === 'cursando') {\n        $this-&gt;update(['estado' =&gt; 'finalizado']);\n    }\n}\n</code></pre> <p>Este m\u00e9todo implementa la sincronizaci\u00f3n autom\u00e1tica entre el estado del preregistro y el estado del periodo acad\u00e9mico. Cuando un periodo inicia, los preregistros asignados y con pago en orden cambian autom\u00e1ticamente a estado \"cursando\". Al finalizar el periodo, los preregistros en curso se marcan como finalizados.</p>"},{"location":"sprints/sprint-4/preregistro/#gestion-de-vencimientos-y-prorrogas","title":"Gesti\u00f3n de Vencimientos y Pr\u00f3rrogas","text":"<pre><code>public function estaVencido()\n{\n    return $this-&gt;pago_estado === 'pendiente' &amp;&amp; \n           $this-&gt;created_at-&gt;diffInDays(now()) &gt; 7;\n}\n</code></pre> <p>El sistema diferencia claramente entre preregistros pendientes de pago (sujetos a vencimiento) y aquellos en pr\u00f3rroga (exentos de vencimiento autom\u00e1tico), proporcionando flexibilidad operativa mientras mantiene controles financieros.</p>"},{"location":"sprints/sprint-4/preregistro/#transiciones-de-estado-controladas","title":"Transiciones de Estado Controladas","text":""},{"location":"sprints/sprint-4/preregistro/#matriz-de-transiciones-permitidas","title":"Matriz de Transiciones Permitidas","text":"<pre><code>public function puedeCambiarA($nuevoEstado)\n{\n    $transicionesPermitidas = [\n        'pendiente' =&gt; ['asignado', 'cancelado'],\n        'asignado' =&gt; ['cursando', 'cancelado'],\n        'cursando' =&gt; ['finalizado'],\n        'finalizado' =&gt; [],\n        'cancelado' =&gt; []\n    ];\n\n    return in_array($nuevoEstado, $transicionesPermitidas[$this-&gt;estado]);\n}\n</code></pre> <p>El modelo implementa un sistema de transiciones de estado estricto que previene cambios inv\u00e1lidos en el flujo acad\u00e9mico. Los estados finales (finalizado, cancelado) son terminales, mientras que los estados intermedios permiten solo transiciones l\u00f3gicas y controladas.</p>"},{"location":"sprints/sprint-4/preregistro/#utilidades-de-presentacion","title":"Utilidades de Presentaci\u00f3n","text":""},{"location":"sprints/sprint-4/preregistro/#formateo-de-datos-para-interfaz","title":"Formateo de Datos para Interfaz","text":"<p>Los accesores getNivelFormateadoAttribute, getEstadoFormateadoAttribute y getPagoEstadoFormateadoAttribute transforman los valores t\u00e9cnicos almacenados en la base de datos en representaciones legibles para el usuario final, mejorando la experiencia en interfaces administrativas.</p>"},{"location":"sprints/sprint-4/preregistro/#sistema-de-colores-para-estados-de-pago","title":"Sistema de Colores para Estados de Pago","text":"<pre><code>public function getColorPagoAttribute()\n{\n    return match($this-&gt;pago_estado) {\n        'pendiente' =&gt; 'yellow',\n        'prorroga' =&gt; 'blue',\n        'pagado' =&gt; 'green',\n        'rechazado' =&gt; 'red',\n        default =&gt; 'gray'\n    };\n}\n</code></pre> <p>Proporciona una representaci\u00f3n visual consistente de los estados de pago a trav\u00e9s de colores estandarizados, facilitando la identificaci\u00f3n r\u00e1pida de situaciones que requieren atenci\u00f3n en dashboards administrativos.</p>"},{"location":"sprints/sprint-4/preregistro/#impacto-de-la-reestructuracion","title":"Impacto de la Reestructuraci\u00f3n","text":"<p>La integraci\u00f3n obligatoria con el modelo Periodo transform\u00f3 significativamente la gesti\u00f3n de preregistros:</p> <ul> <li>Contextualizaci\u00f3n autom\u00e1tica dentro de ciclos acad\u00e9micos espec\u00edficos</li> <li>Sincronizaci\u00f3n bidireccional entre estados de preregistro y periodo</li> <li>Validaciones basadas en el estado operativo del periodo acad\u00e9mico</li> <li>Capacidad de generar reportes hist\u00f3ricos por periodo</li> <li>Prevenci\u00f3n de operaciones fuera de contexto temporal</li> </ul> <p>Esta arquitectura asegura que cada preregistro opere dentro del contexto temporal correcto, proporcionando coherencia organizacional y facilitando la gesti\u00f3n acad\u00e9mica institucional.</p>"}]}